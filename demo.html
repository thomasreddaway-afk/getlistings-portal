<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Get Listings Portal - Demo</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            primary: { DEFAULT: '#c8102e', dark: '#a50d25', light: '#d4334d' },
            secondary: { DEFAULT: '#0ea5e9', dark: '#0284c7' }
          }
        }
      }
    }
  </script>
  <style>
    .sidebar-item.active { background: #c8102e; color: white; }
    .lead-row:hover { background: #f9fafb; }
    .lead-row.selected { background: #f0fdf4; border-left: 3px solid #16a34a; }
    .stage-card { transition: transform 0.15s, box-shadow 0.15s; }
    .stage-card:hover { transform: translateY(-2px); box-shadow: 0 4px 12px rgba(0,0,0,0.1); }
    .tab-btn.active { border-bottom: 2px solid #16a34a; color: #16a34a; }
    
    /* Hide scrollbar but allow scrolling */
    .scrollbar-hide::-webkit-scrollbar { display: none; }
    .scrollbar-hide { scrollbar-width: none; -ms-overflow-style: none; }
    
    /* Animated score rings */
    .score-ring {
      position: relative;
    }
    .score-ring::before {
      content: '';
      position: absolute;
      inset: -3px;
      border-radius: 50%;
      border: 2px solid currentColor;
      opacity: 0.3;
      animation: pulse-ring 2s ease-out infinite;
    }
    .score-ring::after {
      content: '';
      position: absolute;
      inset: -6px;
      border-radius: 50%;
      border: 1px solid currentColor;
      opacity: 0.15;
      animation: pulse-ring 2s ease-out infinite 0.5s;
    }
    @keyframes pulse-ring {
      0% { transform: scale(1); opacity: 0.3; }
      50% { transform: scale(1.08); opacity: 0.15; }
      100% { transform: scale(1); opacity: 0.3; }
    }
    .score-ring-green { color: #22c55e; }
    .score-ring-yellow { color: #eab308; }
    .score-ring-orange { color: #f97316; }
    
    /* Subtle glow for high scores */
    .score-glow-green { box-shadow: 0 0 12px rgba(34, 197, 94, 0.25); }
    .score-glow-yellow { box-shadow: 0 0 10px rgba(234, 179, 8, 0.2); }
    .score-glow-orange { box-shadow: 0 0 8px rgba(249, 115, 22, 0.15); }
    
    /* Filter modal animation */
    @keyframes slide-up {
      from { transform: translateY(100%); }
      to { transform: translateY(0); }
    }
    .animate-slide-up { animation: slide-up 0.3s ease-out; }
    
    /* Toggle active state */
    .filter-toggle.active { background: #c8102e; }
    .filter-toggle.active > div { transform: translateX(20px); }
    .score-glow-yellow { box-shadow: 0 0 10px rgba(234, 179, 8, 0.2); }
    .score-glow-orange { box-shadow: 0 0 8px rgba(249, 115, 22, 0.15); }
    
    /* Resizable column handles */
    .resize-handle {
      position: absolute;
      right: 0;
      top: 0;
      bottom: 0;
      width: 5px;
      cursor: col-resize;
      background: transparent;
      transition: background-color 0.15s;
    }
    .resize-handle:hover,
    .resize-handle.active {
      background-color: #c8102e;
    }
    .resizable-th {
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
    }
    
    /* Pipeline drag and drop */
    .pipeline-card.dragging {
      opacity: 0.5;
      transform: rotate(3deg);
    }
    .pipeline-dropzone.drag-over {
      background-color: rgba(200, 16, 46, 0.1);
      border: 2px dashed #c8102e;
    }
    
    /* Onboarding modal */
    .onboarding-overlay {
      background: rgba(0, 0, 0, 0.7);
      backdrop-filter: blur(4px);
    }
    .onboarding-step {
      display: none;
    }
    .onboarding-step.active {
      display: block;
    }
    .onboarding-dot {
      width: 8px;
      height: 8px;
      border-radius: 50%;
      background: #d1d5db;
      transition: all 0.3s;
    }
    .onboarding-dot.active {
      background: #c8102e;
      width: 24px;
      border-radius: 4px;
    }
    @keyframes fade-in {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }
    .animate-fade-in {
      animation: fade-in 0.3s ease-out;
    }
  </style>
</head>
<body class="bg-gray-50 font-sans antialiased">
  <div id="app" class="flex h-screen overflow-hidden">
    
    <!-- Sidebar -->
    <aside class="w-72 bg-white border-r border-gray-200 flex flex-col">
      <!-- Logo -->
      <div class="px-4 pt-[22px] pb-5 border-b border-gray-200">
        <div class="flex items-center space-x-3">
          <div class="w-10 h-10 bg-primary rounded-lg flex items-center justify-center">
            <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"/>
            </svg>
          </div>
          <div>
            <h1 class="font-bold text-gray-900">Get Listings</h1>
            <p class="text-sm text-gray-500">Desktop Portal</p>
          </div>
        </div>
      </div>
      
      <!-- Navigation -->
      <nav class="flex-1 p-4 space-y-1 overflow-y-auto">
        <!-- Dashboard - always first -->
        <button onclick="showPage('dashboard')" id="nav-dashboard" class="sidebar-item active w-full flex items-center space-x-3 px-3 py-2.5 rounded-lg text-sm font-medium">
          <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 5a1 1 0 011-1h14a1 1 0 011 1v2a1 1 0 01-1 1H5a1 1 0 01-1-1V5zM4 13a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H5a1 1 0 01-1-1v-6zM16 13a1 1 0 011-1h2a1 1 0 011 1v6a1 1 0 01-1 1h-2a1 1 0 01-1-1v-6z"/></svg>
          <span>Dashboard</span>
        </button>
        
        <!-- Lead Generation Section -->
        <div class="pt-4">
          <p class="px-3 text-xs font-semibold text-gray-400 uppercase tracking-wider mb-2">Lead Generation</p>
          
          <button onclick="showPage('leads')" id="nav-leads" class="sidebar-item w-full flex items-center space-x-3 px-3 py-2.5 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-100">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"/></svg>
            <span>Seller Scores</span>
          </button>
          
          <button onclick="showPage('hottest')" id="nav-hottest" class="sidebar-item w-full flex items-center space-x-3 px-3 py-2.5 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-100">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 18.657A8 8 0 016.343 7.343S7 9 9 10c0-2 .5-5 2.986-7C14 5 16.09 5.777 17.656 7.343A7.975 7.975 0 0120 13a7.975 7.975 0 01-2.343 5.657z"/><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.879 16.121A3 3 0 1012.015 11L11 14H9c0 .768.293 1.536.879 2.121z"/></svg>
            <span>Hottest Leads</span>
          </button>
          
          <button onclick="showPage('exclusive')" id="nav-exclusive" class="sidebar-item w-full flex items-center space-x-3 px-3 py-2.5 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-100">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"/></svg>
            <span>Valuation Requests</span>
            <span class="ml-auto bg-primary text-white text-xs px-2 py-0.5 rounded-full font-bold">PRO</span>
          </button>
          
          <button onclick="showPage('expired')" id="nav-expired" class="sidebar-item w-full flex items-center space-x-3 px-3 py-2.5 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-100">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>
            <span>Expiring Listings</span>
          </button>
        
          <button onclick="showPage('nearby')" id="nav-nearby" class="sidebar-item w-full flex items-center space-x-3 px-3 py-2.5 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-100">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"/><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"/></svg>
            <span>Territory Expansion</span>
          </button>
          
          <button onclick="showPage('pipeline')" id="nav-pipeline" class="sidebar-item w-full flex items-center space-x-3 px-3 py-2.5 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-100">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 17V7m0 10a2 2 0 01-2 2H5a2 2 0 01-2-2V7a2 2 0 012-2h2a2 2 0 012 2m0 10a2 2 0 002 2h2a2 2 0 002-2M9 7a2 2 0 012-2h2a2 2 0 012 2m0 10V7m0 10a2 2 0 002 2h2a2 2 0 002-2V7a2 2 0 00-2-2h-2a2 2 0 00-2 2"/></svg>
            <span>Lead Pipeline</span>
          </button>
        </div>
        
        <!-- Marketing Section -->
        <div class="pt-4">
          <p class="px-3 text-xs font-semibold text-gray-400 uppercase tracking-wider mb-2">Marketing</p>
          
          <button onclick="showPage('marketing')" id="nav-marketing" class="sidebar-item w-full flex items-center space-x-3 px-3 py-2.5 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-100">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"/></svg>
            <span>Content Creation</span>
          </button>
          
          <button onclick="showPage('branding')" id="nav-branding" class="sidebar-item w-full flex items-center space-x-3 px-3 py-2.5 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-100">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"/></svg>
            <span>Marketing Tips</span>
          </button>
          
          <button onclick="showPage('smsflows')" id="nav-smsflows" class="sidebar-item w-full flex items-center space-x-3 px-3 py-2.5 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-100">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"/></svg>
            <span>SMS Marketing</span>
          </button>
        </div>
        
        <!-- Analytics Section -->
        <div class="pt-4">
          <p class="px-3 text-xs font-semibold text-gray-400 uppercase tracking-wider mb-2">Insights</p>
          
          <button onclick="showPage('analytics')" id="nav-analytics" class="sidebar-item w-full flex items-center space-x-3 px-3 py-2.5 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-100">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"/></svg>
            <span>Analytics</span>
          </button>
          
          <button onclick="showPage('leaderboard')" id="nav-leaderboard" class="sidebar-item w-full flex items-center space-x-3 px-3 py-2.5 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-100">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z"/></svg>
            <span>Leaderboard</span>
          </button>
        </div>
        
        <!-- Growth Section -->
        <div class="pt-4">
          <p class="px-3 text-xs font-semibold text-gray-400 uppercase tracking-wider mb-2">Growth</p>
          
          <button onclick="showPage('launchpad')" id="nav-launchpad" class="sidebar-item w-full flex items-center space-x-3 px-3 py-2.5 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-100 relative">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"/></svg>
            <span>Launchpad</span>
            <span class="absolute right-3 bg-gradient-to-r from-amber-500 to-orange-500 text-white text-[10px] px-1.5 py-0.5 rounded font-bold uppercase tracking-wide">New</span>
          </button>
          
          <button onclick="showPage('buyerdemand')" id="nav-buyerdemand" class="sidebar-item w-full flex items-center space-x-3 px-3 py-2.5 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-100 relative">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"/></svg>
            <span>Buyer Demand</span>
            <span class="absolute right-3 bg-gradient-to-r from-blue-500 to-cyan-500 text-white text-[10px] px-1.5 py-0.5 rounded font-bold uppercase tracking-wide">New</span>
          </button>
          
          <button onclick="showPage('talent')" id="nav-talent" class="sidebar-item w-full flex items-center space-x-3 px-3 py-2.5 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-100 relative">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 13.255A23.931 23.931 0 0112 15c-3.183 0-6.22-.62-9-1.745M16 6V4a2 2 0 00-2-2h-4a2 2 0 00-2 2v2m4 6h.01M5 20h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"/></svg>
            <span>Talent Exchange</span>
            <span class="absolute right-3 bg-gradient-to-r from-violet-500 to-purple-500 text-white text-[10px] px-1.5 py-0.5 rounded font-bold uppercase tracking-wide">New</span>
          </button>
        </div>
        
        <!-- Other & Help Section -->
        <div class="pt-4">
          <p class="px-3 text-xs font-semibold text-gray-400 uppercase tracking-wider mb-2">Other</p>
          
          <button onclick="showPage('settings')" id="nav-settings" class="sidebar-item w-full flex items-center space-x-3 px-3 py-2.5 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-100">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"/><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/></svg>
            <span>Settings</span>
          </button>
          
          <button onclick="showPage('help')" id="nav-help" class="sidebar-item w-full flex items-center space-x-3 px-3 py-2.5 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-100">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>
            <span>Help & Support</span>
          </button>
        </div>
      </nav>
      
      <!-- User -->
      <div class="p-4 border-t border-gray-200 cursor-pointer hover:bg-gray-50" onclick="showPage('settings')">
        <div class="flex items-center space-x-3">
          <div class="w-9 h-9 bg-primary rounded-full flex items-center justify-center text-white font-medium">JD</div>
          <div class="flex-1 min-w-0">
            <p class="text-sm font-medium text-gray-900 truncate">John Davidson</p>
            <p class="text-xs text-gray-500 truncate">Agent â€¢ Sydney Office</p>
          </div>
          <svg class="w-4 h-4 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/></svg>
        </div>
      </div>
    </aside>

    <!-- Main Content Area -->
    <main class="flex-1 overflow-hidden flex flex-col">
      
      <!-- DASHBOARD PAGE -->
      <div id="page-dashboard" class="page flex-1 overflow-auto">
        <!-- Header -->
        <div class="bg-white border-b border-gray-200 px-4 py-4">
          <div class="flex items-center justify-between">
            <div>
              <h1 class="text-2xl font-bold text-gray-900">Good morning, John</h1>
              <p class="text-sm text-gray-500 mt-0.5">Here's what needs your attention today</p>
            </div>
            <div class="flex items-center space-x-3">
              <div class="text-right">
                <p class="text-xs text-gray-500">Today's Date</p>
                <p class="text-sm font-semibold text-gray-900" id="dashboard-date">Tuesday, Jan 14</p>
              </div>
            </div>
          </div>
        </div>
        
        <div class="p-4 space-y-4">
          
          <!-- TOP PRIORITY: Call This Person Now -->
          <div class="bg-gradient-to-r from-green-600 to-emerald-600 rounded-2xl p-5 text-white shadow-lg">
            <div class="flex items-center justify-between mb-4">
              <div class="flex items-center space-x-2">
                <div class="w-8 h-8 bg-white/20 rounded-lg flex items-center justify-center">
                  <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"/></svg>
                </div>
                <span class="text-sm font-medium text-white/80">ðŸŽ¯ Your #1 Priority Today</span>
              </div>
              <span class="px-2.5 py-1 bg-white/20 text-white text-xs font-bold rounded-full animate-pulse">HOT LEAD</span>
            </div>
            
            <div class="flex items-center justify-between">
              <div>
                <h2 class="text-xl font-bold mb-1">Sarah Mitchell â€¢ 42 Ocean View Dr</h2>
                <p class="text-green-100 text-sm mb-3">Requested valuation 2 days ago â€¢ Score: 92/100</p>
                <div class="flex items-center space-x-3 text-xs text-green-100">
                  <span class="flex items-center space-x-1"><svg class="w-3.5 h-3.5" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/></svg><span>Valuation requested</span></span>
                  <span class="flex items-center space-x-1"><svg class="w-3.5 h-3.5" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/></svg><span>Mortgage free</span></span>
                  <span class="flex items-center space-x-1"><svg class="w-3.5 h-3.5" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/></svg><span>12yr owner</span></span>
                </div>
              </div>
              <div class="text-right">
                <p class="text-green-100 text-xs mb-1">Est. Commission</p>
                <p class="text-2xl font-bold mb-3">$48,000</p>
                <button onclick="window.location.href='tel:0412345678'" class="px-5 py-2.5 bg-white text-green-600 rounded-xl text-sm font-bold hover:bg-green-50 shadow-lg flex items-center space-x-2">
                  <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"/></svg>
                  <span>Call Now</span>
                </button>
              </div>
            </div>
          </div>
          
          <!-- Quick Stats Row -->
          <div class="grid grid-cols-4 gap-3">
            <div onclick="showPage('leads')" class="bg-white rounded-xl border border-gray-200 p-4 hover:shadow-md hover:border-sky-300 transition-all cursor-pointer group">
              <div class="flex items-center space-x-3">
                <div class="w-10 h-10 bg-sky-100 rounded-lg flex items-center justify-center group-hover:bg-sky-200 transition-colors">
                  <svg class="w-5 h-5 text-sky-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 11V7a4 4 0 118 0m-4 8v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2z"/></svg>
                </div>
                <div>
                  <p class="text-2xl font-bold text-sky-600" id="stat-leads-unlocked">24</p>
                  <p class="text-xs text-gray-500">Leads Unlocked</p>
                </div>
              </div>
            </div>
            
            <div onclick="showPage('settings')" class="bg-white rounded-xl border border-gray-200 p-4 hover:shadow-md hover:border-green-300 transition-all cursor-pointer group">
              <div class="flex items-center space-x-3">
                <div class="w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center group-hover:bg-green-200 transition-colors">
                  <svg class="w-5 h-5 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"/><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"/></svg>
                </div>
                <div>
                  <p class="text-2xl font-bold text-green-600" id="stat-suburbs-subscribed">4</p>
                  <p class="text-xs text-gray-500">Suburbs Subscribed</p>
                </div>
              </div>
            </div>
            
            <div onclick="showPage('leaderboard')" class="bg-white rounded-xl border border-gray-200 p-4 hover:shadow-md hover:border-amber-300 transition-all cursor-pointer group">
              <div class="flex items-center space-x-3">
                <div class="w-10 h-10 bg-amber-100 rounded-lg flex items-center justify-center group-hover:bg-amber-200 transition-colors">
                  <svg class="w-5 h-5 text-amber-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z"/></svg>
                </div>
                <div>
                  <p class="text-2xl font-bold text-amber-600" id="stat-leaderboard-position">#12</p>
                  <p class="text-xs text-gray-500">Leaderboard Position</p>
                </div>
              </div>
            </div>
            
            <div onclick="showPage('branding')" class="bg-white rounded-xl border border-gray-200 p-4 hover:shadow-md hover:border-purple-300 transition-all cursor-pointer group">
              <div class="flex items-center space-x-3">
                <div class="w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center group-hover:bg-purple-200 transition-colors">
                  <svg class="w-5 h-5 text-purple-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5.882V19.24a1.76 1.76 0 01-3.417.592l-2.147-6.15M18 13a3 3 0 100-6M5.436 13.683A4.001 4.001 0 017 6h1.832c4.1 0 7.625-1.234 9.168-3v14c-1.543-1.766-5.067-3-9.168-3H7a3.988 3.988 0 01-1.564-.317z"/></svg>
                </div>
                <div>
                  <p class="text-2xl font-bold text-purple-600" id="stat-marketing-opportunities">156</p>
                  <p class="text-xs text-gray-500">Marketing Opportunities</p>
                </div>
              </div>
            </div>
          </div>
          
          <!-- Two Column Layout: Hot Leads + Expiring Listings -->
          <div class="grid grid-cols-2 gap-4">
          
            <!-- Left Column: Hot Leads -->
            <div class="bg-white rounded-xl border border-gray-200">
              <div class="px-4 py-3 border-b border-gray-100 flex items-center justify-between">
                <div class="flex items-center space-x-2">
                  <span class="text-lg">ðŸ”¥</span>
                  <h3 class="font-semibold text-gray-900">Hot Leads</h3>
                </div>
                <button onclick="showPage('leads')" class="text-xs text-primary font-medium hover:underline">See all</button>
              </div>
              <div class="divide-y divide-gray-50" id="dashboard-hot-leads">
                <!-- Hot Lead 1 -->
                <div class="px-4 py-3 hover:bg-gray-50 cursor-pointer" onclick="showLeadDetail('78 Park Avenue, Mosman', 88)">
                  <div class="flex items-center justify-between mb-1">
                    <span class="text-sm font-medium text-gray-900">78 Park Avenue, Mosman</span>
                    <span class="w-6 h-6 bg-green-100 text-green-700 rounded-full text-xs font-bold flex items-center justify-center">88</span>
                  </div>
                  <p class="text-xs text-gray-500">Valuation requested â€¢ Est. $1.8M</p>
                  <div class="flex items-center space-x-2 mt-2">
                    <span class="px-1.5 py-0.5 bg-green-100 text-green-700 text-xs rounded">Mortgage free</span>
                    <span class="px-1.5 py-0.5 bg-blue-100 text-blue-700 text-xs rounded">15yr owner</span>
                  </div>
                </div>
                <!-- Hot Lead 2 -->
                <div class="px-4 py-3 hover:bg-gray-50 cursor-pointer" onclick="showLeadDetail('23 Harbour View, Manly', 85)">
                  <div class="flex items-center justify-between mb-1">
                    <span class="text-sm font-medium text-gray-900">23 Harbour View, Manly</span>
                    <span class="w-6 h-6 bg-green-100 text-green-700 rounded-full text-xs font-bold flex items-center justify-center">85</span>
                  </div>
                  <p class="text-xs text-gray-500">Neighbour sold $2.1M last week</p>
                  <div class="flex items-center space-x-2 mt-2">
                    <span class="px-1.5 py-0.5 bg-amber-100 text-amber-700 text-xs rounded">Downsizing</span>
                    <span class="px-1.5 py-0.5 bg-purple-100 text-purple-700 text-xs rounded">Empty nester</span>
                  </div>
                </div>
                <!-- Hot Lead 3 -->
                <div class="px-4 py-3 hover:bg-gray-50 cursor-pointer" onclick="showLeadDetail('156 Beach Road, Coogee', 82)">
                  <div class="flex items-center justify-between mb-1">
                    <span class="text-sm font-medium text-gray-900">156 Beach Road, Coogee</span>
                    <span class="w-6 h-6 bg-yellow-100 text-yellow-700 rounded-full text-xs font-bold flex items-center justify-center">82</span>
                  </div>
                  <p class="text-xs text-gray-500">DA approved, renovation complete</p>
                  <div class="flex items-center space-x-2 mt-2">
                    <span class="px-1.5 py-0.5 bg-green-100 text-green-700 text-xs rounded">Just renovated</span>
                  </div>
                </div>
              </div>
            </div>
            
            <!-- Right Column: Expiring Listings -->
            <div class="bg-white rounded-xl border border-gray-200">
              <div class="px-4 py-3 border-b border-gray-100 flex items-center justify-between">
                <div class="flex items-center space-x-2">
                  <svg class="w-5 h-5 text-orange-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>
                  <h3 class="font-semibold text-gray-900">Expiring Listings</h3>
                </div>
                <button onclick="showPage('expired')" class="text-xs text-primary font-medium hover:underline">See all</button>
              </div>
              <div class="divide-y divide-gray-50" id="dashboard-expiring">
                <!-- Expiring 1 -->
                <div class="px-4 py-3 hover:bg-gray-50 cursor-pointer">
                  <div class="flex items-center justify-between mb-1">
                    <span class="text-sm font-medium text-gray-900">15 Arinya Road, Ashgrove</span>
                    <span class="px-2 py-0.5 bg-red-100 text-red-700 text-xs font-medium rounded-full">3 days</span>
                  </div>
                  <p class="text-xs text-gray-500">Listed with Ray White â€¢ 90 days on market</p>
                  <div class="flex items-center justify-between mt-2">
                    <span class="text-xs text-gray-400">$1.2M - $1.35M</span>
                    <button class="px-2 py-1 bg-primary text-white text-xs rounded-lg font-medium hover:bg-primary/90">Contact</button>
                  </div>
                </div>
                <!-- Expiring 2 -->
                <div class="px-4 py-3 hover:bg-gray-50 cursor-pointer">
                  <div class="flex items-center justify-between mb-1">
                    <span class="text-sm font-medium text-gray-900">8 Hillside Crescent, Mosman</span>
                    <span class="px-2 py-0.5 bg-orange-100 text-orange-700 text-xs font-medium rounded-full">7 days</span>
                  </div>
                  <p class="text-xs text-gray-500">Listed with McGrath â€¢ 120 days on market</p>
                  <div class="flex items-center justify-between mt-2">
                    <span class="text-xs text-gray-400">$2.8M - $3.1M</span>
                    <button class="px-2 py-1 bg-primary text-white text-xs rounded-lg font-medium hover:bg-primary/90">Contact</button>
                  </div>
                </div>
                <!-- Expiring 3 -->
                <div class="px-4 py-3 hover:bg-gray-50 cursor-pointer">
                  <div class="flex items-center justify-between mb-1">
                    <span class="text-sm font-medium text-gray-900">27 Victoria Street, Potts Point</span>
                    <span class="px-2 py-0.5 bg-amber-100 text-amber-700 text-xs font-medium rounded-full">14 days</span>
                  </div>
                  <p class="text-xs text-gray-500">Listed with LJ Hooker â€¢ Price reduced twice</p>
                  <div class="flex items-center justify-between mt-2">
                    <span class="text-xs text-gray-400">$950K - $1.05M</span>
                    <button class="px-2 py-1 bg-primary text-white text-xs rounded-lg font-medium hover:bg-primary/90">Contact</button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- LEADS PAGE -->
      <div id="page-leads" class="page flex-1 overflow-hidden hidden flex flex-col">
        <div class="bg-white border-b border-gray-200 px-4 py-4">
          <div class="flex items-center justify-between">
            <div>
              <h1 class="text-2xl font-bold text-gray-900">Seller Scores</h1>
              <p class="text-sm text-gray-500 mt-0.5">Your 4 subscribed suburbs</p>
            </div>
          </div>
        </div>
        
        <!-- Suburb Tabs -->
        <div class="bg-white border-b border-gray-200 px-4">
          <div class="flex items-center space-x-1" id="suburb-tabs-container">
            <button onclick="filterLeadsBySuburb('all')" id="suburb-tab-all" class="suburb-tab px-4 py-3 text-sm font-medium border-b-2 border-primary text-primary">
              All Suburbs
              <span class="ml-1.5 px-2 py-0.5 bg-primary/10 text-primary text-xs rounded-full" id="suburb-count-all">0</span>
            </button>
            <!-- Dynamic suburb tabs will be inserted here -->
            <div class="flex-1"></div>
            <button onclick="showPage('settings')" class="flex items-center space-x-1 px-3 py-1.5 text-xs text-gray-500 hover:text-primary hover:bg-gray-50 rounded-lg">
              <svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"/><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/></svg>
              <span>Manage Suburbs</span>
            </button>
          </div>
        </div>
        
        <!-- Filter Row (combined signals, scores, and search) -->
        <div class="bg-gray-50 border-b border-gray-200 px-4 py-3">
          <div class="flex items-center space-x-2 overflow-x-auto scrollbar-hide">
            <span class="text-xs text-gray-500 font-medium mr-1 flex-shrink-0">Filter:</span>
            <button onclick="filterLeadsBySignal('all')" class="signal-tab px-3 py-1.5 bg-primary text-white text-xs font-medium rounded-full flex-shrink-0">
              All
            </button>
            <!-- Score Filters -->
            <button onclick="filterLeadsByScore('high')" data-score="high" class="score-filter-btn px-3 py-1.5 bg-white border border-gray-200 text-gray-600 text-xs font-medium rounded-full hover:border-green-300 hover:bg-green-50 hover:text-green-700 flex-shrink-0">
              75%+
            </button>
            <button onclick="filterLeadsByScore('medium')" data-score="medium" class="score-filter-btn px-3 py-1.5 bg-white border border-gray-200 text-gray-600 text-xs font-medium rounded-full hover:border-amber-300 hover:bg-amber-50 hover:text-amber-700 flex-shrink-0">
              50-75%
            </button>
            <button onclick="filterLeadsByScore('low')" data-score="low" class="score-filter-btn px-3 py-1.5 bg-white border border-gray-200 text-gray-600 text-xs font-medium rounded-full hover:border-gray-400 hover:bg-gray-100 hover:text-gray-700 flex-shrink-0">
              10-50%
            </button>
            <div class="w-px h-5 bg-gray-300 mx-1 flex-shrink-0"></div>
            <!-- Signal Filters -->
            <button onclick="filterLeadsBySignal('Expiring listing')" class="signal-tab px-3 py-1.5 bg-white border border-gray-200 text-gray-600 text-xs font-medium rounded-full hover:border-amber-300 hover:bg-amber-50 hover:text-amber-700 flex-shrink-0">
              Expiring
            </button>
            <button onclick="filterLeadsBySignal('Listed for sale')" class="signal-tab px-3 py-1.5 bg-white border border-gray-200 text-gray-600 text-xs font-medium rounded-full hover:border-green-300 hover:bg-green-50 hover:text-green-700 flex-shrink-0">
              Listed
            </button>
            <button onclick="filterLeadsBySignal('Requested valuation')" class="signal-tab px-3 py-1.5 bg-white border border-gray-200 text-gray-600 text-xs font-medium rounded-full hover:border-pink-300 hover:bg-pink-50 hover:text-pink-700 flex-shrink-0">
              Valuation
            </button>
            <button onclick="filterLeadsBySignal('Neighbour selling')" class="signal-tab px-3 py-1.5 bg-white border border-gray-200 text-gray-600 text-xs font-medium rounded-full hover:border-purple-300 hover:bg-purple-50 hover:text-purple-700 flex-shrink-0">
              Neighbour
            </button>
            <button onclick="filterLeadsBySignal('FSBO')" class="signal-tab px-3 py-1.5 bg-white border border-gray-200 text-gray-600 text-xs font-medium rounded-full hover:border-red-300 hover:bg-red-50 hover:text-red-700 flex-shrink-0">
              FSBO
            </button>
            <div class="w-px h-5 bg-gray-300 mx-1 flex-shrink-0"></div>
            <!-- Hide Sold & Listed Toggle -->
            <button onclick="toggleHideSoldListed()" id="hide-sold-listed-btn" class="px-3 py-1.5 bg-white border border-gray-200 text-gray-600 text-xs font-medium rounded-full hover:bg-gray-50 flex-shrink-0">
              Hide Sold & Listed
            </button>
            <!-- Spacer -->
            <div class="flex-1"></div>
            <!-- Search -->
            <div class="relative flex-shrink-0">
              <input type="text" id="leads-search" oninput="searchLeadsTable(this.value)" placeholder="Search..." class="pl-8 pr-3 py-1.5 border border-gray-200 rounded-full text-xs focus:outline-none focus:border-primary w-40 bg-white">
              <svg class="w-3.5 h-3.5 text-gray-400 absolute left-2.5 top-1/2 -translate-y-1/2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/></svg>
            </div>
          </div>
        </div>
        
        <!-- Leads Table -->
        <div class="flex-1 overflow-auto">
          <div class="bg-white overflow-x-auto">
            <table id="leads-main-table" class="min-w-full" style="table-layout: fixed;">
              <thead class="bg-gray-50 sticky top-0 z-10"><tr>
                <th style="width: 240px; min-width: 140px;" class="resizable-th relative px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase select-none">
                  <div onclick="sortLeadsTable('property')" class="flex items-center space-x-1 cursor-pointer hover:text-gray-700"><span>Property</span><svg class="sort-icon w-4 h-4 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16V4m0 0L3 8m4-4l4 4m6 0v12m0 0l4-4m-4 4l-4-4"/></svg></div>
                  <div class="resize-handle"></div>
                </th>
                <th style="width: 120px; min-width: 90px;" class="resizable-th relative px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase select-none">
                  <div onclick="sortLeadsTable('suburb')" class="flex items-center space-x-1 cursor-pointer hover:text-gray-700"><span>Suburb</span><svg class="sort-icon w-4 h-4 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16V4m0 0L3 8m4-4l4 4m6 0v12m0 0l4-4m-4 4l-4-4"/></svg></div>
                  <div class="resize-handle"></div>
                </th>
                <th style="width: 130px; min-width: 100px;" class="resizable-th relative px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase select-none">
                  <div onclick="sortLeadsTable('score')" class="flex items-center space-x-1 cursor-pointer hover:text-gray-700"><span>AI Seller Score</span><svg class="sort-icon w-4 h-4 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 14l-7 7m0 0l-7-7m7 7V3"/></svg></div>
                  <div class="resize-handle"></div>
                </th>
                <th style="width: 280px; min-width: 160px;" class="resizable-th relative px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase select-none">
                  <span>Signals</span>
                  <div class="resize-handle"></div>
                </th>
                <th style="width: 110px; min-width: 90px;" class="resizable-th relative px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase select-none">
                  <div onclick="sortLeadsTable('value')" class="flex items-center space-x-1 cursor-pointer hover:text-gray-700"><span>Est. Value</span><svg class="sort-icon w-4 h-4 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16V4m0 0L3 8m4-4l4 4m6 0v12m0 0l4-4m-4 4l-4-4"/></svg></div>
                  <div class="resize-handle"></div>
                </th>
                <th style="width: 100px; min-width: 80px;" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase select-none">
                  <div onclick="sortLeadsTable('updated')" class="flex items-center space-x-1 cursor-pointer hover:text-gray-700"><span>Updated</span><svg class="sort-icon w-4 h-4 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16V4m0 0L3 8m4-4l4 4m6 0v12m0 0l4-4m-4 4l-4-4"/></svg></div>
                </th>
              </tr></thead>
              <tbody id="leads-table-body" class="divide-y divide-gray-100">
                <!-- Generated by JavaScript -->
              </tbody>
            </table>
          </div>
        </div>
        
        <!-- Pagination -->
        <div class="bg-white border-t border-gray-200 px-6 py-3 flex items-center justify-between">
          <p class="text-sm text-gray-500">Showing <span id="leads-showing">1-50</span> of <span id="leads-total">2,847</span> properties</p>
          <div class="flex items-center space-x-2">
            <button class="px-3 py-1.5 border border-gray-200 rounded-lg hover:bg-gray-50 text-sm">Previous</button>
            <button class="px-3 py-1.5 bg-primary text-white rounded-lg text-sm">1</button>
            <button class="px-3 py-1.5 border border-gray-200 rounded-lg hover:bg-gray-50 text-sm">2</button>
            <button class="px-3 py-1.5 border border-gray-200 rounded-lg hover:bg-gray-50 text-sm">3</button>
            <span class="text-gray-400">...</span>
            <button class="px-3 py-1.5 border border-gray-200 rounded-lg hover:bg-gray-50 text-sm">57</button>
            <button class="px-3 py-1.5 border border-gray-200 rounded-lg hover:bg-gray-50 text-sm">Next</button>
          </div>
        </div>
      </div>

      <!-- HOTTEST LEADS PAGE -->
      <div id="page-hottest" class="page flex-1 overflow-auto hidden">
        <div class="bg-white border-b border-gray-200 px-4 py-4">
          <div class="flex items-center justify-between">
            <div>
              <h1 class="text-2xl font-bold text-gray-900">Hottest Leads</h1>
              <p class="text-sm text-gray-500 mt-0.5">Your highest-scoring leads ready for action</p>
            </div>
            <button onclick="showPage('leads')" class="flex items-center space-x-2 px-4 py-2 bg-primary text-white rounded-lg text-sm font-medium hover:bg-red-700 transition-colors">
              <span>View All Leads</span>
              <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"/></svg>
            </button>
          </div>
        </div>
        
        <div class="p-4">
        <!-- Top Leads Grid - Loaded from API -->
        <div class="space-y-3" id="hottest-leads-list">
          <!-- Loading State -->
          <div id="hottest-loading" class="flex flex-col items-center justify-center py-12">
            <div class="animate-spin rounded-full h-8 w-8 border-b-2 border-primary mb-3"></div>
            <p class="text-gray-500">Loading hottest leads...</p>
          </div>
        </div>
        
        <!-- Bottom CTA -->
        <div class="mt-6 bg-gradient-to-r from-gray-50 to-gray-100 rounded-xl p-6 flex items-center justify-between">
          <div>
            <p class="font-semibold text-gray-900">Want to see more leads?</p>
            <p class="text-sm text-gray-500 mt-0.5">Browse all leads sorted by AI score, suburb, or value</p>
          </div>
          <button onclick="showPage('leads')" class="px-6 py-3 bg-gray-900 text-white rounded-xl font-medium hover:bg-gray-800 transition-colors flex items-center space-x-2">
            <span>View Full Lead Database</span>
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"/></svg>
          </button>
        </div>
        </div>
      </div>
      
      <!-- EXCLUSIVE LEADS PAGE -->
      <div id="page-exclusive" class="page flex-1 overflow-hidden hidden flex">
        <!-- Left Panel: Lead List -->
        <div class="w-[400px] border-r border-gray-200 flex flex-col bg-white">
          <!-- Header -->
          <div class="px-4 py-4 border-b border-gray-200">
            <div class="flex items-center justify-between mb-3">
              <div>
                <div class="flex items-center gap-2">
                  <h1 class="text-xl font-bold text-gray-900">Exclusive Leads</h1>
                  <span class="inline-flex items-center gap-1 px-2 py-0.5 bg-green-100 text-green-700 text-xs font-semibold rounded-full">
                    <span class="w-1.5 h-1.5 bg-green-500 rounded-full animate-pulse"></span>
                    LIVE
                  </span>
                </div>
                <p class="text-sm text-gray-500">Junior Package</p>
              </div>
              <button onclick="refreshGoogleSheetData()" class="p-2 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors" title="Refresh">
                <svg class="w-4 h-4 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"/></svg>
              </button>
            </div>
            
            <!-- Stats Row -->
            <div class="flex items-center space-x-4 text-sm">
              <div class="flex items-center space-x-1.5">
                <div class="w-2 h-2 bg-primary rounded-full"></div>
                <span class="text-gray-600"><span class="font-semibold text-gray-900" id="exclusive-new-count">0</span> New</span>
              </div>
              <div class="flex items-center space-x-1.5">
                <div class="w-2 h-2 bg-blue-500 rounded-full"></div>
                <span class="text-gray-600"><span class="font-semibold text-gray-900" id="exclusive-contacted-count">0</span> Contacted</span>
              </div>
              <div class="flex items-center space-x-1.5">
                <div class="w-2 h-2 bg-green-500 rounded-full"></div>
                <span class="text-gray-600"><span class="font-semibold text-gray-900" id="exclusive-appt-count">0</span> Appt</span>
              </div>
            </div>
            
            <!-- Sort Options -->
            <div class="flex items-center space-x-2 mt-3">
              <span class="text-xs text-gray-500">Sort by:</span>
              <button onclick="sortLeads('hottest')" id="sort-hottest" class="px-3 py-1 text-xs font-medium rounded-full bg-primary text-white">ðŸ”¥ Hottest</button>
              <button onclick="sortLeads('newest')" id="sort-newest" class="px-3 py-1 text-xs font-medium rounded-full bg-gray-100 text-gray-600 hover:bg-gray-200">ðŸ“… Newest</button>
            </div>
          </div>
          
          <!-- Lead List - Dynamically populated -->
          <div class="flex-1 overflow-auto" id="exclusive-leads-list">
            <!-- Loading State -->
            <div class="flex flex-col items-center justify-center py-12" id="exclusive-loading">
              <svg class="w-8 h-8 text-gray-300 animate-spin mb-3" fill="none" viewBox="0 0 24 24">
                <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
              </svg>
              <p class="text-gray-500 text-sm">Loading leads from Google Sheets...</p>
            </div>
          </div>
        </div>
        
        <!-- Right Panel: Lead Intelligence -->
        <div class="flex-1 overflow-auto bg-gray-50">
          <div class="p-6">
            <!-- Lead Header -->
            <div class="bg-white rounded-xl border border-gray-200 p-5 mb-4">
              <div class="flex items-start justify-between">
                <div>
                  <h2 class="text-2xl font-bold text-gray-900">Sarah Mitchell</h2>
                  <p class="text-gray-500 mt-1">42 Campbell Parade, Bondi Beach NSW 2026</p>
                  
                  <!-- Selling Timeframe - Important -->
                  <div class="mt-3 inline-flex items-center space-x-2 px-3 py-2 bg-amber-100 border border-amber-300 rounded-lg">
                    <svg class="w-4 h-4 text-amber-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>
                    <span class="text-xs text-amber-700 font-medium uppercase">Selling Timeframe:</span>
                    <span id="homeowner-timeframe" class="text-sm text-amber-900 font-bold">Loading...</span>
                  </div>
                  
                  <div class="flex items-center space-x-4 mt-3 text-sm">
                    <span class="text-gray-600">ðŸ“± 0412 345 678</span>
                    <span class="text-gray-600">âœ‰ï¸ sarah.mitchell@email.com</span>
                  </div>
                </div>
                <div class="text-right">
                  <div class="w-16 h-16 rounded-full bg-green-100 border-3 border-green-500 flex items-center justify-center mb-2">
                    <span class="text-xl font-black text-green-600">92</span>
                  </div>
                  <p class="text-xs text-gray-500">AI Seller Score</p>
                </div>
              </div>
              
              <!-- Mini Pipeline -->
              <div class="mt-4 pt-4 border-t border-gray-100">
                <p class="text-xs text-gray-500 uppercase tracking-wide mb-3">Pipeline Progress</p>
                <div class="flex items-center" id="mini-pipeline">
                  <!-- Stage 1: New Lead -->
                  <div class="flex-1 relative">
                    <div class="mini-pipeline-stage active flex flex-col items-center cursor-pointer relative z-10" data-stage="0">
                      <div class="w-10 h-10 rounded-full bg-primary text-white flex items-center justify-center text-sm font-bold shadow-lg ring-4 ring-primary/20">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"/></svg>
                      </div>
                      <span class="text-xs font-semibold text-primary mt-1">New</span>
                    </div>
                    <div class="absolute top-5 left-1/2 w-full h-0.5 bg-gray-200"></div>
                  </div>
                  
                  <!-- Stage 2: Contacted -->
                  <div class="flex-1 relative">
                    <div class="mini-pipeline-stage flex flex-col items-center cursor-pointer relative z-10" data-stage="1">
                      <div class="w-10 h-10 rounded-full bg-gray-200 text-gray-400 flex items-center justify-center text-sm font-bold hover:bg-blue-100 hover:text-blue-600 transition-colors">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"/></svg>
                      </div>
                      <span class="text-xs text-gray-400 mt-1">Contacted</span>
                    </div>
                    <div class="absolute top-5 left-1/2 w-full h-0.5 bg-gray-200"></div>
                  </div>
                  
                  <!-- Stage 3: Appointment -->
                  <div class="flex-1 relative">
                    <div class="mini-pipeline-stage flex flex-col items-center cursor-pointer relative z-10" data-stage="2">
                      <div class="w-10 h-10 rounded-full bg-gray-200 text-gray-400 flex items-center justify-center text-sm font-bold hover:bg-purple-100 hover:text-purple-600 transition-colors">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"/></svg>
                      </div>
                      <span class="text-xs text-gray-400 mt-1">Appt</span>
                    </div>
                    <div class="absolute top-5 left-1/2 w-full h-0.5 bg-gray-200"></div>
                  </div>
                  
                  <!-- Stage 4: Listed -->
                  <div class="flex-1 relative">
                    <div class="mini-pipeline-stage flex flex-col items-center cursor-pointer relative z-10" data-stage="3">
                      <div class="w-10 h-10 rounded-full bg-gray-200 text-gray-400 flex items-center justify-center text-sm font-bold hover:bg-green-100 hover:text-green-600 transition-colors">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"/></svg>
                      </div>
                      <span class="text-xs text-gray-400 mt-1">Listed</span>
                    </div>
                    <div class="absolute top-5 left-1/2 w-full h-0.5 bg-gray-200"></div>
                  </div>
                  
                  <!-- Stage 5: Sold -->
                  <div class="flex-1 relative">
                    <div class="mini-pipeline-stage flex flex-col items-center cursor-pointer relative z-10" data-stage="4">
                      <div class="w-10 h-10 rounded-full bg-gray-200 text-gray-400 flex items-center justify-center text-sm font-bold hover:bg-emerald-100 hover:text-emerald-600 transition-colors">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>
                      </div>
                      <span class="text-xs text-gray-400 mt-1">Sold! ðŸŽ‰</span>
                    </div>
                  </div>
                </div>
                <p class="text-xs text-gray-400 mt-3 text-center">Click a stage to move this lead forward</p>
              </div>
            </div>
            
            <!-- AI Intelligence Panel -->
            <div class="bg-white rounded-xl border border-gray-200 p-5 mb-4">
              <div class="flex items-center space-x-2 mb-4">
                <div class="w-8 h-8 bg-gradient-to-br from-primary to-red-600 rounded-lg flex items-center justify-center">
                  <svg class="w-4 h-4 text-white" fill="currentColor" viewBox="0 0 24 24"><path d="M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"/></svg>
                </div>
                <div>
                  <h3 class="font-semibold text-gray-900">AI Lead Intelligence</h3>
                  <p class="text-xs text-gray-500">You're walking into this conversation better prepared than any other agent</p>
                </div>
              </div>
              
              <!-- Property Estimate -->
              <div class="grid grid-cols-2 gap-4 mb-4">
                <div class="bg-gray-50 rounded-lg p-4">
                  <p class="text-xs text-gray-500 uppercase tracking-wide mb-1">Est. Property Value</p>
                  <p id="ai-property-value" class="text-xl font-bold text-gray-900">Loading...</p>
                  <p id="ai-property-value-note" class="text-xs text-gray-500 mt-1">Analyzing data...</p>
                </div>
                <div class="bg-gray-50 rounded-lg p-4">
                  <p class="text-xs text-gray-500 uppercase tracking-wide mb-1">Est. Commission</p>
                  <p id="ai-commission" class="text-xl font-bold text-primary">--</p>
                  <p class="text-xs text-gray-500 mt-1">At 2% rate</p>
                </div>
              </div>
              
              <!-- Detected Signals -->
              <div class="mb-4">
                <p class="text-xs text-gray-500 uppercase tracking-wide mb-2">Detected Signals</p>
                <div id="ai-signals-list" class="space-y-2">
                  <div class="flex items-center justify-center py-4">
                    <svg class="animate-spin h-5 w-5 text-primary mr-2" fill="none" viewBox="0 0 24 24">
                      <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                      <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                    </svg>
                    <span class="text-gray-500 text-sm">AI analyzing lead signals...</span>
                  </div>
                </div>
              </div>
              
              <!-- Confidence -->
              <div id="ai-confidence-container" class="flex items-center justify-between bg-gray-50 rounded-lg px-4 py-2">
                <span class="text-sm text-gray-600">AI Confidence Level</span>
                <span id="ai-confidence" class="font-semibold text-gray-500">Calculating...</span>
              </div>
            </div>
            
            <!-- Outreach Strategy -->
            <div class="bg-white rounded-xl border border-gray-200 p-5 mb-4">
              <h3 class="font-semibold text-gray-900 mb-3">Outreach Strategy</h3>
              
              <div id="outreach-container" class="space-y-2">
                <!-- Call -->
                <div class="border border-gray-200 rounded-lg">
                  <div class="flex items-center justify-between p-3 cursor-pointer hover:bg-gray-50" onclick="toggleOutreachItem(this)">
                    <label class="flex items-center space-x-3 cursor-pointer">
                      <input type="checkbox" class="w-4 h-4 text-primary rounded border-gray-300 focus:ring-primary" id="check-call" onclick="event.stopPropagation()">
                      <span class="text-sm font-medium text-gray-700">ðŸ“ž Call</span>
                    </label>
                    <svg class="w-4 h-4 text-gray-400 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/></svg>
                  </div>
                  <div class="hidden px-3 pb-3 pt-0">
                    <p class="text-xs text-gray-500 mb-1">Suggested script:</p>
                    <p class="text-sm text-gray-600 bg-gray-50 rounded p-2 italic" id="script-call">"Hi [Name], this is [Agent] from [Agency]. I saw you were looking at getting a property valuation - I'd love to help you understand what your home could be worth in today's market. Do you have a minute to chat?"</p>
                  </div>
                </div>
                
                <!-- SMS -->
                <div class="border border-gray-200 rounded-lg">
                  <div class="flex items-center justify-between p-3 cursor-pointer hover:bg-gray-50" onclick="toggleOutreachItem(this)">
                    <label class="flex items-center space-x-3 cursor-pointer">
                      <input type="checkbox" class="w-4 h-4 text-primary rounded border-gray-300 focus:ring-primary" id="check-sms" onclick="event.stopPropagation()">
                      <span class="text-sm font-medium text-gray-700">ðŸ’¬ Send SMS</span>
                    </label>
                    <svg class="w-4 h-4 text-gray-400 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/></svg>
                  </div>
                  <div class="hidden px-3 pb-3 pt-0">
                    <p class="text-xs text-gray-500 mb-1">Suggested message:</p>
                    <p class="text-sm text-gray-600 bg-gray-50 rounded p-2 italic" id="script-sms">"Hi [Name], I noticed you requested a property valuation. I'm a local agent and happy to provide a free, no-obligation appraisal. Would you like me to send some info? - [Agent]"</p>
                  </div>
                </div>
                
                <!-- Voicemail -->
                <div class="border border-gray-200 rounded-lg">
                  <div class="flex items-center justify-between p-3 cursor-pointer hover:bg-gray-50" onclick="toggleOutreachItem(this)">
                    <label class="flex items-center space-x-3 cursor-pointer">
                      <input type="checkbox" class="w-4 h-4 text-primary rounded border-gray-300 focus:ring-primary" id="check-vm" onclick="event.stopPropagation()">
                      <span class="text-sm font-medium text-gray-700">ðŸ“± Leave Voicemail</span>
                    </label>
                    <svg class="w-4 h-4 text-gray-400 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/></svg>
                  </div>
                  <div class="hidden px-3 pb-3 pt-0">
                    <p class="text-xs text-gray-500 mb-1">Suggested voicemail:</p>
                    <p class="text-sm text-gray-600 bg-gray-50 rounded p-2 italic" id="script-vm">"Hi [Name], it's [Agent] from [Agency]. I saw you were interested in knowing your property's value. I'd love to share some insights about your area. Give me a call back when you get a chance - [number]. Thanks!"</p>
                  </div>
                </div>
                
                <!-- Door Knock -->
                <div class="border border-gray-200 rounded-lg">
                  <div class="flex items-center justify-between p-3 cursor-pointer hover:bg-gray-50" onclick="toggleOutreachItem(this)">
                    <label class="flex items-center space-x-3 cursor-pointer">
                      <input type="checkbox" class="w-4 h-4 text-primary rounded border-gray-300 focus:ring-primary" id="check-door" onclick="event.stopPropagation()">
                      <span class="text-sm font-medium text-gray-700">ðŸšª Door Knock</span>
                    </label>
                    <svg class="w-4 h-4 text-gray-400 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/></svg>
                  </div>
                  <div class="hidden px-3 pb-3 pt-0">
                    <p class="text-xs text-gray-500 mb-1">Suggested opener:</p>
                    <p class="text-sm text-gray-600 bg-gray-50 rounded p-2 italic" id="script-door">"Hi there! I'm [Agent] - I work in the area and noticed you might be thinking about selling. I just wanted to pop by and introduce myself. No pressure at all, but if you ever want a chat about the market, I'm always happy to help."</p>
                  </div>
                </div>
              </div>
            </div>
            
            <!-- Quick Actions -->
            <div class="bg-white rounded-xl border border-gray-200 p-5 mb-4">
              <h3 class="font-semibold text-gray-900 mb-3">Appraisal Readiness</h3>
              <div class="grid grid-cols-2 gap-3">
                <button onclick="openInstantAppraisal()" class="flex items-center space-x-3 p-3 bg-primary/5 border border-primary/20 rounded-lg hover:bg-primary/10 transition-colors">
                  <div class="w-10 h-10 bg-primary/10 rounded-lg flex items-center justify-center">
                    <svg class="w-5 h-5 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/></svg>
                  </div>
                  <div class="text-left">
                    <p class="font-medium text-gray-900 text-sm">Generate Appraisal</p>
                    <p class="text-xs text-gray-500">Quick property snapshot</p>
                  </div>
                </button>
                <button class="flex items-center space-x-3 p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors">
                  <div class="w-10 h-10 bg-gray-100 rounded-lg flex items-center justify-center">
                    <svg class="w-5 h-5 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"/></svg>
                  </div>
                  <div class="text-left">
                    <p class="font-medium text-gray-900 text-sm">View Comparables</p>
                    <p class="text-xs text-gray-500">Recent street sales</p>
                  </div>
                </button>
                <button class="flex items-center space-x-3 p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors">
                  <div class="w-10 h-10 bg-gray-100 rounded-lg flex items-center justify-center">
                    <svg class="w-5 h-5 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"/></svg>
                  </div>
                  <div class="text-left">
                    <p class="font-medium text-gray-900 text-sm">Send Follow-Up</p>
                    <p class="text-xs text-gray-500">Personalised email</p>
                  </div>
                </button>
                <button class="flex items-center space-x-3 p-3 bg-green-50 border border-green-200 rounded-lg hover:bg-green-100 transition-colors">
                  <div class="w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center">
                    <svg class="w-5 h-5 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"/></svg>
                  </div>
                  <div class="text-left">
                    <p class="font-medium text-green-700 text-sm">Book Appointment</p>
                    <p class="text-xs text-green-600">Mark as scheduled</p>
                  </div>
                </button>
              </div>
            </div>
            
            <!-- Notes Section -->
            <div class="bg-white rounded-xl border border-gray-200 p-5">
              <h3 class="font-semibold text-gray-900 mb-3">Notes & Activity</h3>
              <textarea class="w-full p-3 border border-gray-200 rounded-lg text-sm resize-none focus:outline-none focus:border-primary" rows="3" placeholder="Add notes about this lead..."></textarea>
              <div class="flex items-center justify-between mt-3">
                <p class="text-xs text-gray-400">Notes auto-save</p>
                <button class="px-4 py-2 bg-primary text-white rounded-lg text-sm font-medium hover:bg-red-700">Save Note</button>
              </div>
            </div>
          </div>
        </div>
      </div>
      <!-- PROPERTIES PAGE -->
      <div id="page-properties" class="page flex-1 overflow-hidden hidden flex">
        <!-- Property List -->
        <div class="w-96 border-r border-gray-200 flex flex-col bg-white">
          <div class="p-4 border-b border-gray-200">
            <h2 class="font-semibold text-gray-900">Properties</h2>
            <p class="text-sm text-gray-500">847 properties tracked</p>
          </div>
          <div class="flex-1 overflow-auto p-4 space-y-3">
            <div class="property-card bg-white rounded-xl border-2 border-primary p-4 cursor-pointer" onclick="selectProperty(0)">
              <div class="flex items-center justify-between mb-2"><span class="px-2 py-0.5 bg-green-100 text-green-700 text-xs font-medium rounded-full">80% Score</span></div>
              <h3 class="font-medium text-gray-900">42 Ocean View Drive</h3>
              <p class="text-sm text-gray-500">Bondi NSW 2026</p>
              <div class="flex items-center space-x-3 text-sm text-gray-500 mt-2"><span>ðŸ› 4</span><span>ðŸš¿ 3</span></div>
            </div>
            <div class="property-card bg-white rounded-xl border border-gray-200 p-4 cursor-pointer hover:border-gray-300" onclick="selectProperty(1)">
              <div class="flex items-center justify-between mb-2"><span class="px-2 py-0.5 bg-yellow-100 text-yellow-700 text-xs font-medium rounded-full">71% Score</span></div>
              <h3 class="font-medium text-gray-900">15 Arinya Road</h3>
              <p class="text-sm text-gray-500">Ashgrove QLD 4060</p>
              <div class="flex items-center space-x-3 text-sm text-gray-500 mt-2"><span>ðŸ› 5</span><span>ðŸš¿ 3</span></div>
            </div>
            <div class="property-card bg-white rounded-xl border border-gray-200 p-4 cursor-pointer hover:border-gray-300" onclick="selectProperty(2)">
              <div class="flex items-center justify-between mb-2"><span class="px-2 py-0.5 bg-orange-100 text-orange-700 text-xs font-medium rounded-full">60% Score</span></div>
              <h3 class="font-medium text-gray-900">8 Hillside Crescent</h3>
              <p class="text-sm text-gray-500">Mosman NSW 2088</p>
              <div class="flex items-center space-x-3 text-sm text-gray-500 mt-2"><span>ðŸ› 3</span><span>ðŸš¿ 2</span></div>
            </div>
          </div>
        </div>
        
        <!-- Property Detail View -->
        <div class="flex-1 overflow-auto bg-gray-50">
          <div class="p-6">
            <!-- Header with Instant Appraisal -->
            <div class="flex items-center justify-between mb-6">
              <h1 class="text-2xl font-bold text-gray-900">42 Ocean View Drive, Bondi</h1>
              
              <!-- Instant Appraisal CTA -->
              <div class="bg-gradient-to-br from-primary to-red-700 rounded-xl p-4 text-white w-80">
                <div class="flex items-center space-x-3 mb-2">
                  <div class="w-10 h-10 bg-white/20 rounded-lg flex items-center justify-center">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/></svg>
                  </div>
                  <div>
                    <h3 class="font-bold text-sm">Instant Appraisal</h3>
                    <p class="text-white/80 text-xs">Impress homeowners instantly</p>
                  </div>
                </div>
                <p class="text-white/90 text-xs mb-3">Generate a beautiful, professional property appraisal report in seconds. Perfect for door knocking or sending via email.</p>
                <button onclick="openInstantAppraisal({property: '42 Ocean View Drive', suburb: 'Bondi', score: 60, value: 3850000})" class="w-full py-2 bg-white text-primary font-bold text-sm rounded-lg hover:bg-gray-100 transition-colors flex items-center justify-center space-x-2">
                  <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"/></svg>
                  <span>Generate Appraisal Report</span>
                </button>
              </div>
            </div>
            
            <!-- Seller Score Gauge -->
            <div class="bg-white rounded-2xl border border-gray-200 p-6 mb-6">
              <h2 class="text-lg font-semibold text-gray-900 mb-4">Seller Score</h2>
              <div class="flex items-center justify-center">
                <div class="relative">
                  <!-- Circular gauge -->
                  <svg class="w-48 h-48 transform -rotate-90" viewBox="0 0 100 100">
                    <!-- Background circle -->
                    <circle cx="50" cy="50" r="40" fill="none" stroke="#e5e7eb" stroke-width="10"/>
                    <!-- Score arc - 60% filled -->
                    <circle cx="50" cy="50" r="40" fill="none" stroke="url(#scoreGradient)" stroke-width="10" stroke-linecap="round" stroke-dasharray="200.96" stroke-dashoffset="80.38"/>
                    <defs>
                      <linearGradient id="scoreGradient" x1="0%" y1="0%" x2="100%" y2="0%">
                        <stop offset="0%" style="stop-color:#22c55e"/>
                        <stop offset="50%" style="stop-color:#eab308"/>
                        <stop offset="100%" style="stop-color:#c8102e"/>
                      </linearGradient>
                    </defs>
                  </svg>
                  <div class="absolute inset-0 flex flex-col items-center justify-center">
                    <span class="text-4xl font-bold text-gray-900">60%</span>
                    <span class="text-sm text-gray-500">Likely to Sell</span>
                  </div>
                </div>
              </div>
              <div class="flex justify-center space-x-8 mt-4 text-sm">
                <div class="flex items-center space-x-2"><div class="w-3 h-3 bg-green-500 rounded-full"></div><span class="text-gray-600">Low</span></div>
                <div class="flex items-center space-x-2"><div class="w-3 h-3 bg-yellow-500 rounded-full"></div><span class="text-gray-600">Medium</span></div>
                <div class="flex items-center space-x-2"><div class="w-3 h-3 bg-red-500 rounded-full"></div><span class="text-gray-600">High</span></div>
              </div>
            </div>
            
            <!-- Selling Signals -->
            <div class="bg-white rounded-2xl border border-gray-200 p-6 mb-6">
              <h2 class="text-lg font-semibold text-gray-900 mb-4">Selling Signals</h2>
              <div class="space-y-3">
                <div class="flex items-center justify-between p-3 bg-green-50 rounded-lg">
                  <div class="flex items-center space-x-3">
                    <div class="w-8 h-8 bg-green-100 rounded-full flex items-center justify-center"><svg class="w-4 h-4 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/></svg></div>
                    <span class="text-gray-900">Neighbour selling property</span>
                  </div>
                  <span class="text-sm text-gray-500">1 year ago</span>
                </div>
                <div class="flex items-center justify-between p-3 bg-green-50 rounded-lg">
                  <div class="flex items-center space-x-3">
                    <div class="w-8 h-8 bg-green-100 rounded-full flex items-center justify-center"><svg class="w-4 h-4 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/></svg></div>
                    <span class="text-gray-900">Requested valuation</span>
                  </div>
                  <span class="text-sm text-gray-500">1 year ago</span>
                </div>
                <div class="flex items-center justify-between p-3 bg-blue-50 rounded-lg">
                  <div class="flex items-center space-x-3">
                    <div class="w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center"><svg class="w-4 h-4 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/></svg></div>
                    <span class="text-gray-900">Last sold</span>
                  </div>
                  <span class="text-sm text-gray-500">4 years ago</span>
                </div>
              </div>
            </div>
            
            <!-- Win The Listing Tools -->
            <div class="bg-white rounded-2xl border border-gray-200 p-6">
              <h2 class="text-lg font-semibold text-gray-900 mb-4">Win The Listing</h2>
              <p class="text-sm text-gray-500 mb-4">AI-powered tools to help you convert this lead</p>
              <div class="grid grid-cols-2 gap-4">
                <button class="flex items-center space-x-3 p-4 bg-gray-50 rounded-xl hover:bg-gray-100 transition-colors text-left">
                  <div class="w-12 h-12 bg-primary/10 rounded-xl flex items-center justify-center">
                    <svg class="w-6 h-6 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/></svg>
                  </div>
                  <div>
                    <p class="font-medium text-gray-900">AI Proposal</p>
                    <p class="text-xs text-gray-500">Generate listing presentation</p>
                  </div>
                </button>
                <button class="flex items-center space-x-3 p-4 bg-gray-50 rounded-xl hover:bg-gray-100 transition-colors text-left">
                  <div class="w-12 h-12 bg-blue-100 rounded-xl flex items-center justify-center">
                    <svg class="w-6 h-6 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"/></svg>
                  </div>
                  <div>
                    <p class="font-medium text-gray-900">Script Call</p>
                    <p class="text-xs text-gray-500">AI-generated call script</p>
                  </div>
                </button>
                <button class="flex items-center space-x-3 p-4 bg-gray-50 rounded-xl hover:bg-gray-100 transition-colors text-left">
                  <div class="w-12 h-12 bg-green-100 rounded-xl flex items-center justify-center">
                    <svg class="w-6 h-6 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"/></svg>
                  </div>
                  <div>
                    <p class="font-medium text-gray-900">SMS Templates</p>
                    <p class="text-xs text-gray-500">Quick message templates</p>
                  </div>
                </button>
                <button class="flex items-center space-x-3 p-4 bg-gray-50 rounded-xl hover:bg-gray-100 transition-colors text-left">
                  <div class="w-12 h-12 bg-purple-100 rounded-xl flex items-center justify-center">
                    <svg class="w-6 h-6 text-purple-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"/></svg>
                  </div>
                  <div>
                    <p class="font-medium text-gray-900">Email Campaign</p>
                    <p class="text-xs text-gray-500">Personalized email drips</p>
                  </div>
                </button>
                <button class="flex items-center space-x-3 p-4 bg-gray-50 rounded-xl hover:bg-gray-100 transition-colors text-left">
                  <div class="w-12 h-12 bg-amber-100 rounded-xl flex items-center justify-center">
                    <svg class="w-6 h-6 text-amber-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"/></svg>
                  </div>
                  <div>
                    <p class="font-medium text-gray-900">Content Creation</p>
                    <p class="text-xs text-gray-500">Create social assets</p>
                  </div>
                </button>
                <button class="flex items-center space-x-3 p-4 bg-gray-50 rounded-xl hover:bg-gray-100 transition-colors text-left">
                  <div class="w-12 h-12 bg-red-100 rounded-xl flex items-center justify-center">
                    <svg class="w-6 h-6 text-red-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"/></svg>
                  </div>
                  <div>
                    <p class="font-medium text-gray-900">Market Report</p>
                    <p class="text-xs text-gray-500">Generate suburb insights</p>
                  </div>
                </button>
              </div>
            </div>
            
            <!-- Competitor Watch -->
            <div class="bg-white rounded-2xl border border-gray-200 p-6">
              <h2 class="text-lg font-semibold text-gray-900 mb-4 flex items-center">
                <svg class="w-5 h-5 mr-2 text-purple-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0z"/></svg>
                Competitor Watch
              </h2>
              <div class="space-y-3">
                <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
                  <span class="text-gray-600">Agents subscribed</span>
                  <span class="font-semibold text-gray-900">8 agents</span>
                </div>
                <div class="flex items-center justify-between p-3 bg-yellow-50 rounded-lg">
                  <span class="text-gray-600">Last agent contact</span>
                  <span class="font-semibold text-yellow-700">3 days ago</span>
                </div>
                <div class="flex items-center justify-between p-3 bg-green-50 rounded-lg">
                  <span class="text-gray-600">Your advantage</span>
                  <span class="font-semibold text-green-700">First to call today</span>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <!-- PIPELINE PAGE -->
      <div id="page-pipeline" class="page flex-1 overflow-hidden hidden flex flex-col">
        <div class="bg-white border-b border-gray-200 px-4 py-4">
          <div class="flex items-center justify-between">
            <div>
              <h1 class="text-2xl font-bold text-gray-900">Pipeline</h1>
              <p class="text-sm text-gray-500 mt-0.5"><span id="pipeline-count">12</span> opportunities â€¢ <span id="pipeline-value">$4.2M</span> total value</p>
            </div>
            <div class="flex items-center space-x-3">
              <p class="text-xs text-gray-400">ðŸ’¡ Drag cards between stages â€¢ Click stage name to rename</p>
              <button onclick="addPipelineStage()" class="flex items-center space-x-2 px-4 py-2 bg-primary text-white rounded-lg hover:bg-red-700 text-sm font-medium">
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"/></svg>
                <span>Add Stage</span>
              </button>
            </div>
          </div>
        </div>
        <div class="flex-1 overflow-x-auto p-4">
          <div id="pipeline-board" class="flex space-x-4 h-full min-w-max">
            <!-- New Stage -->
            <div class="pipeline-stage w-56 bg-gray-100 rounded-lg p-3 flex flex-col" data-stage="new" data-color="gray">
              <div class="flex items-center justify-between mb-3">
                <h3 class="stage-name font-semibold text-gray-700 cursor-pointer hover:bg-gray-200 px-2 py-1 -mx-2 -my-1 rounded" onclick="editStageName(this)" title="Click to rename">New</h3>
                <div class="flex items-center space-x-1">
                  <span class="stage-count text-xs bg-gray-200 px-2 py-0.5 rounded-full">3</span>
                  <button onclick="deletePipelineStage(this)" class="p-1 hover:bg-gray-200 rounded opacity-0 group-hover:opacity-100 transition-opacity" title="Delete stage">
                    <svg class="w-3.5 h-3.5 text-gray-400 hover:text-red-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/></svg>
                  </button>
                </div>
              </div>
              <div class="pipeline-dropzone space-y-2 flex-1 overflow-auto min-h-[100px] rounded-lg transition-colors" data-stage="new">
                <div class="pipeline-card bg-white rounded-lg p-3 border border-gray-200 cursor-grab active:cursor-grabbing shadow-sm hover:shadow-md transition-shadow" draggable="true" data-id="1"><p class="font-medium text-sm">42 Ocean View Dr</p><p class="text-xs text-gray-500">Bondi</p><p class="text-xs text-green-600 mt-2 font-medium">$2.4M</p></div>
                <div class="pipeline-card bg-white rounded-lg p-3 border border-gray-200 cursor-grab active:cursor-grabbing shadow-sm hover:shadow-md transition-shadow" draggable="true" data-id="2"><p class="font-medium text-sm">89 King St</p><p class="text-xs text-gray-500">Sydney</p><p class="text-xs text-green-600 mt-2 font-medium">$850K</p></div>
                <div class="pipeline-card bg-white rounded-lg p-3 border border-gray-200 cursor-grab active:cursor-grabbing shadow-sm hover:shadow-md transition-shadow" draggable="true" data-id="3"><p class="font-medium text-sm">12 Palm Ave</p><p class="text-xs text-gray-500">Manly</p><p class="text-xs text-green-600 mt-2 font-medium">$1.8M</p></div>
              </div>
            </div>
            <!-- Contacted Stage -->
            <div class="pipeline-stage w-56 bg-blue-50 rounded-lg p-3 flex flex-col group" data-stage="contacted" data-color="blue">
              <div class="flex items-center justify-between mb-3">
                <h3 class="stage-name font-semibold text-blue-700 cursor-pointer hover:bg-blue-100 px-2 py-1 -mx-2 -my-1 rounded" onclick="editStageName(this)" title="Click to rename">Contacted</h3>
                <div class="flex items-center space-x-1">
                  <span class="stage-count text-xs bg-blue-100 px-2 py-0.5 rounded-full text-blue-700">2</span>
                  <button onclick="deletePipelineStage(this)" class="p-1 hover:bg-blue-100 rounded opacity-0 group-hover:opacity-100 transition-opacity" title="Delete stage">
                    <svg class="w-3.5 h-3.5 text-gray-400 hover:text-red-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/></svg>
                  </button>
                </div>
              </div>
              <div class="pipeline-dropzone space-y-2 flex-1 overflow-auto min-h-[100px] rounded-lg transition-colors" data-stage="contacted">
                <div class="pipeline-card bg-white rounded-lg p-3 border border-blue-200 cursor-grab active:cursor-grabbing shadow-sm hover:shadow-md transition-shadow" draggable="true" data-id="4"><p class="font-medium text-sm">156 Harbour St</p><p class="text-xs text-gray-500">Sydney</p><p class="text-xs text-green-600 mt-2 font-medium">$980K</p></div>
                <div class="pipeline-card bg-white rounded-lg p-3 border border-blue-200 cursor-grab active:cursor-grabbing shadow-sm hover:shadow-md transition-shadow" draggable="true" data-id="5"><p class="font-medium text-sm">45 Beach Rd</p><p class="text-xs text-gray-500">Coogee</p><p class="text-xs text-green-600 mt-2 font-medium">$1.2M</p></div>
              </div>
            </div>
            <!-- Appraisal Set Stage -->
            <div class="pipeline-stage w-56 bg-purple-50 rounded-lg p-3 flex flex-col group" data-stage="appraisal" data-color="purple">
              <div class="flex items-center justify-between mb-3">
                <h3 class="stage-name font-semibold text-purple-700 cursor-pointer hover:bg-purple-100 px-2 py-1 -mx-2 -my-1 rounded" onclick="editStageName(this)" title="Click to rename">Appraisal Set</h3>
                <div class="flex items-center space-x-1">
                  <span class="stage-count text-xs bg-purple-100 px-2 py-0.5 rounded-full text-purple-700">4</span>
                  <button onclick="deletePipelineStage(this)" class="p-1 hover:bg-purple-100 rounded opacity-0 group-hover:opacity-100 transition-opacity" title="Delete stage">
                    <svg class="w-3.5 h-3.5 text-gray-400 hover:text-red-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/></svg>
                  </button>
                </div>
              </div>
              <div class="pipeline-dropzone space-y-2 flex-1 overflow-auto min-h-[100px] rounded-lg transition-colors" data-stage="appraisal">
                <div class="pipeline-card bg-white rounded-lg p-3 border border-purple-200 cursor-grab active:cursor-grabbing shadow-sm hover:shadow-md transition-shadow" draggable="true" data-id="6"><p class="font-medium text-sm">78 Park Ave</p><p class="text-xs text-gray-500">Parramatta</p><p class="text-xs text-green-600 mt-2 font-medium">$1.5M</p></div>
                <div class="pipeline-card bg-white rounded-lg p-3 border border-purple-200 cursor-grab active:cursor-grabbing shadow-sm hover:shadow-md transition-shadow" draggable="true" data-id="7"><p class="font-medium text-sm">234 Rose St</p><p class="text-xs text-gray-500">Paddington</p><p class="text-xs text-green-600 mt-2 font-medium">$2.2M</p></div>
                <div class="pipeline-card bg-white rounded-lg p-3 border border-purple-200 cursor-grab active:cursor-grabbing shadow-sm hover:shadow-md transition-shadow" draggable="true" data-id="8"><p class="font-medium text-sm">67 Station St</p><p class="text-xs text-gray-500">Newtown</p><p class="text-xs text-green-600 mt-2 font-medium">$890K</p></div>
                <div class="pipeline-card bg-white rounded-lg p-3 border border-purple-200 cursor-grab active:cursor-grabbing shadow-sm hover:shadow-md transition-shadow" draggable="true" data-id="9"><p class="font-medium text-sm">19 Valley View</p><p class="text-xs text-gray-500">Mosman</p><p class="text-xs text-green-600 mt-2 font-medium">$3.1M</p></div>
              </div>
            </div>
            <!-- Listed Stage -->
            <div class="pipeline-stage w-56 bg-green-50 rounded-lg p-3 flex flex-col group" data-stage="listed" data-color="green">
              <div class="flex items-center justify-between mb-3">
                <h3 class="stage-name font-semibold text-green-700 cursor-pointer hover:bg-green-100 px-2 py-1 -mx-2 -my-1 rounded" onclick="editStageName(this)" title="Click to rename">Listed</h3>
                <div class="flex items-center space-x-1">
                  <span class="stage-count text-xs bg-green-100 px-2 py-0.5 rounded-full text-green-700">2</span>
                  <button onclick="deletePipelineStage(this)" class="p-1 hover:bg-green-100 rounded opacity-0 group-hover:opacity-100 transition-opacity" title="Delete stage">
                    <svg class="w-3.5 h-3.5 text-gray-400 hover:text-red-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/></svg>
                  </button>
                </div>
              </div>
              <div class="pipeline-dropzone space-y-2 flex-1 overflow-auto min-h-[100px] rounded-lg transition-colors" data-stage="listed">
                <div class="pipeline-card bg-white rounded-lg p-3 border border-green-200 cursor-grab active:cursor-grabbing shadow-sm hover:shadow-md transition-shadow" draggable="true" data-id="10"><p class="font-medium text-sm">23 Beach Rd</p><p class="text-xs text-gray-500">Bondi</p><p class="text-xs text-green-600 mt-2 font-medium">$2.1M</p></div>
                <div class="pipeline-card bg-white rounded-lg p-3 border border-green-200 cursor-grab active:cursor-grabbing shadow-sm hover:shadow-md transition-shadow" draggable="true" data-id="11"><p class="font-medium text-sm">88 Cliff Walk</p><p class="text-xs text-gray-500">Vaucluse</p><p class="text-xs text-green-600 mt-2 font-medium">$4.5M</p></div>
              </div>
            </div>
            <!-- Sold Stage -->
            <div class="pipeline-stage w-56 bg-amber-50 rounded-lg p-3 flex flex-col group" data-stage="sold" data-color="amber">
              <div class="flex items-center justify-between mb-3">
                <h3 class="stage-name font-semibold text-amber-700 cursor-pointer hover:bg-amber-100 px-2 py-1 -mx-2 -my-1 rounded" onclick="editStageName(this)" title="Click to rename">Sold ðŸŽ‰</h3>
                <div class="flex items-center space-x-1">
                  <span class="stage-count text-xs bg-amber-100 px-2 py-0.5 rounded-full text-amber-700">1</span>
                  <button onclick="deletePipelineStage(this)" class="p-1 hover:bg-amber-100 rounded opacity-0 group-hover:opacity-100 transition-opacity" title="Delete stage">
                    <svg class="w-3.5 h-3.5 text-gray-400 hover:text-red-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/></svg>
                  </button>
                </div>
              </div>
              <div class="pipeline-dropzone space-y-2 flex-1 overflow-auto min-h-[100px] rounded-lg transition-colors" data-stage="sold">
                <div class="pipeline-card bg-white rounded-lg p-3 border border-amber-200 cursor-grab active:cursor-grabbing shadow-sm hover:shadow-md transition-shadow" draggable="true" data-id="12"><p class="font-medium text-sm">56 Marine Pde</p><p class="text-xs text-gray-500">Manly</p><p class="text-xs text-green-600 mt-2 font-medium">$2.8M</p><p class="text-xs text-amber-600 mt-1">âœ“ Sold for $2.95M</p></div>
              </div>
            </div>
          </div>
        </div>
      </div>
      
      <!-- ANALYTICS PAGE -->
      <div id="page-analytics" class="page flex-1 overflow-auto hidden">
        <div class="bg-white border-b border-gray-200 px-4 py-4">
          <div class="flex items-center justify-between">
            <div>
              <h1 class="text-2xl font-bold text-gray-900">Analytics</h1>
              <p class="text-sm text-gray-500 mt-0.5">Track your prospecting and sales performance</p>
            </div>
            <select class="px-4 py-2 border border-gray-200 rounded-lg text-sm focus:outline-none focus:border-primary bg-white">
              <option>Last 30 Days</option>
              <option>Last 7 Days</option>
              <option>Last 90 Days</option>
              <option>This Year</option>
            </select>
          </div>
        </div>
        
        <div class="p-4 bg-gray-50">
        <!-- KPI Cards -->
        <div class="grid grid-cols-4 gap-4 mb-6">
          <div class="bg-white rounded-xl border border-gray-200 p-5">
            <div class="flex items-center justify-between mb-3">
              <div class="w-10 h-10 bg-primary/10 rounded-lg flex items-center justify-center">
                <svg class="w-5 h-5 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0z"/></svg>
              </div>
              <span class="text-xs text-green-600 font-medium bg-green-50 px-2 py-0.5 rounded-full">+12%</span>
            </div>
            <p class="text-3xl font-bold text-gray-900">247</p>
            <p class="text-sm text-gray-500 mt-1">Leads Contacted</p>
          </div>
          <div class="bg-white rounded-xl border border-gray-200 p-5">
            <div class="flex items-center justify-between mb-3">
              <div class="w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center">
                <svg class="w-5 h-5 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"/></svg>
              </div>
              <span class="text-xs text-green-600 font-medium bg-green-50 px-2 py-0.5 rounded-full">+8%</span>
            </div>
            <p class="text-3xl font-bold text-gray-900">34</p>
            <p class="text-sm text-gray-500 mt-1">Appraisals Booked</p>
          </div>
          <div class="bg-white rounded-xl border border-gray-200 p-5">
            <div class="flex items-center justify-between mb-3">
              <div class="w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center">
                <svg class="w-5 h-5 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>
              </div>
              <span class="text-xs text-green-600 font-medium bg-green-50 px-2 py-0.5 rounded-full">+25%</span>
            </div>
            <p class="text-3xl font-bold text-gray-900">12</p>
            <p class="text-sm text-gray-500 mt-1">Listings Won</p>
          </div>
          <div class="bg-white rounded-xl border border-gray-200 p-5">
            <div class="flex items-center justify-between mb-3">
              <div class="w-10 h-10 bg-amber-100 rounded-lg flex items-center justify-center">
                <svg class="w-5 h-5 text-amber-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>
              </div>
              <span class="text-xs text-green-600 font-medium bg-green-50 px-2 py-0.5 rounded-full">+18%</span>
            </div>
            <p class="text-3xl font-bold text-gray-900">$847K</p>
            <p class="text-sm text-gray-500 mt-1">Commission Earned</p>
          </div>
        </div>
        
        <!-- Charts Row -->
        <div class="grid grid-cols-2 gap-6 mb-6">
          <!-- Activity Chart -->
          <div class="bg-white rounded-xl border border-gray-200 p-6">
            <h3 class="font-semibold text-gray-900 mb-4">Activity Trend</h3>
            <div class="h-64 flex items-end space-x-2">
              <div class="flex-1 flex flex-col items-center">
                <div class="w-full bg-primary/20 rounded-t" style="height: 45%"></div>
                <span class="text-xs text-gray-500 mt-2">Mon</span>
              </div>
              <div class="flex-1 flex flex-col items-center">
                <div class="w-full bg-primary/30 rounded-t" style="height: 62%"></div>
                <span class="text-xs text-gray-500 mt-2">Tue</span>
              </div>
              <div class="flex-1 flex flex-col items-center">
                <div class="w-full bg-primary/40 rounded-t" style="height: 78%"></div>
                <span class="text-xs text-gray-500 mt-2">Wed</span>
              </div>
              <div class="flex-1 flex flex-col items-center">
                <div class="w-full bg-primary/50 rounded-t" style="height: 55%"></div>
                <span class="text-xs text-gray-500 mt-2">Thu</span>
              </div>
              <div class="flex-1 flex flex-col items-center">
                <div class="w-full bg-primary/60 rounded-t" style="height: 90%"></div>
                <span class="text-xs text-gray-500 mt-2">Fri</span>
              </div>
              <div class="flex-1 flex flex-col items-center">
                <div class="w-full bg-primary/30 rounded-t" style="height: 35%"></div>
                <span class="text-xs text-gray-500 mt-2">Sat</span>
              </div>
              <div class="flex-1 flex flex-col items-center">
                <div class="w-full bg-primary/20 rounded-t" style="height: 20%"></div>
                <span class="text-xs text-gray-500 mt-2">Sun</span>
              </div>
            </div>
            <div class="flex items-center justify-center space-x-6 mt-4 text-sm">
              <div class="flex items-center space-x-2"><div class="w-3 h-3 bg-primary/40 rounded"></div><span class="text-gray-600">Calls Made</span></div>
              <div class="flex items-center space-x-2"><div class="w-3 h-3 bg-primary rounded"></div><span class="text-gray-600">Appointments</span></div>
            </div>
          </div>
          
          <!-- Conversion Funnel -->
          <div class="bg-white rounded-xl border border-gray-200 p-6">
            <h3 class="font-semibold text-gray-900 mb-4">Conversion Funnel</h3>
            <div class="space-y-4">
              <div>
                <div class="flex items-center justify-between mb-1">
                  <span class="text-sm text-gray-600">Leads Viewed</span>
                  <span class="text-sm font-medium text-gray-900">2,847</span>
                </div>
                <div class="w-full bg-gray-100 rounded-full h-4"><div class="bg-gray-400 h-4 rounded-full" style="width: 100%"></div></div>
              </div>
              <div>
                <div class="flex items-center justify-between mb-1">
                  <span class="text-sm text-gray-600">Contacted</span>
                  <span class="text-sm font-medium text-gray-900">247 (8.7%)</span>
                </div>
                <div class="w-full bg-gray-100 rounded-full h-4"><div class="bg-blue-500 h-4 rounded-full" style="width: 65%"></div></div>
              </div>
              <div>
                <div class="flex items-center justify-between mb-1">
                  <span class="text-sm text-gray-600">Appraisals Booked</span>
                  <span class="text-sm font-medium text-gray-900">34 (13.8%)</span>
                </div>
                <div class="w-full bg-gray-100 rounded-full h-4"><div class="bg-purple-500 h-4 rounded-full" style="width: 40%"></div></div>
              </div>
              <div>
                <div class="flex items-center justify-between mb-1">
                  <span class="text-sm text-gray-600">Listings Won</span>
                  <span class="text-sm font-medium text-gray-900">12 (35.3%)</span>
                </div>
                <div class="w-full bg-gray-100 rounded-full h-4"><div class="bg-green-500 h-4 rounded-full" style="width: 25%"></div></div>
              </div>
              <div>
                <div class="flex items-center justify-between mb-1">
                  <span class="text-sm text-gray-600">Sold</span>
                  <span class="text-sm font-medium text-gray-900">8 (66.7%)</span>
                </div>
                <div class="w-full bg-gray-100 rounded-full h-4"><div class="bg-amber-500 h-4 rounded-full" style="width: 15%"></div></div>
              </div>
            </div>
          </div>
        </div>
        
        <!-- Bottom Row -->
        <div class="grid grid-cols-3 gap-6">
          <!-- Top Performing Suburbs -->
          <div class="bg-white rounded-xl border border-gray-200 p-6">
            <h3 class="font-semibold text-gray-900 mb-4">Top Suburbs</h3>
            <div class="space-y-3">
              <div class="flex items-center justify-between">
                <div class="flex items-center space-x-3">
                  <span class="text-lg">ðŸ¥‡</span>
                  <span class="text-sm text-gray-900">Bondi</span>
                </div>
                <span class="text-sm font-medium text-green-600">$1.2M GCI</span>
              </div>
              <div class="flex items-center justify-between">
                <div class="flex items-center space-x-3">
                  <span class="text-lg">ðŸ¥ˆ</span>
                  <span class="text-sm text-gray-900">Mosman</span>
                </div>
                <span class="text-sm font-medium text-green-600">$890K GCI</span>
              </div>
              <div class="flex items-center justify-between">
                <div class="flex items-center space-x-3">
                  <span class="text-lg">ðŸ¥‰</span>
                  <span class="text-sm text-gray-900">Manly</span>
                </div>
                <span class="text-sm font-medium text-green-600">$650K GCI</span>
              </div>
              <div class="flex items-center justify-between">
                <div class="flex items-center space-x-3">
                  <span class="w-6 text-center text-sm text-gray-400">4</span>
                  <span class="text-sm text-gray-900">Double Bay</span>
                </div>
                <span class="text-sm font-medium text-green-600">$520K GCI</span>
              </div>
              <div class="flex items-center justify-between">
                <div class="flex items-center space-x-3">
                  <span class="w-6 text-center text-sm text-gray-400">5</span>
                  <span class="text-sm text-gray-900">Paddington</span>
                </div>
                <span class="text-sm font-medium text-green-600">$410K GCI</span>
              </div>
            </div>
          </div>
          
          <!-- Response Rate -->
          <div class="bg-white rounded-xl border border-gray-200 p-6">
            <h3 class="font-semibold text-gray-900 mb-4">Response Rate by Channel</h3>
            <div class="space-y-4">
              <div>
                <div class="flex items-center justify-between mb-1">
                  <span class="text-sm text-gray-600">ðŸ“ž Phone Calls</span>
                  <span class="text-sm font-medium text-gray-900">42%</span>
                </div>
                <div class="w-full bg-gray-100 rounded-full h-2"><div class="bg-green-500 h-2 rounded-full" style="width: 42%"></div></div>
              </div>
              <div>
                <div class="flex items-center justify-between mb-1">
                  <span class="text-sm text-gray-600">ðŸ’¬ SMS</span>
                  <span class="text-sm font-medium text-gray-900">28%</span>
                </div>
                <div class="w-full bg-gray-100 rounded-full h-2"><div class="bg-blue-500 h-2 rounded-full" style="width: 28%"></div></div>
              </div>
              <div>
                <div class="flex items-center justify-between mb-1">
                  <span class="text-sm text-gray-600">ðŸ“§ Email</span>
                  <span class="text-sm font-medium text-gray-900">15%</span>
                </div>
                <div class="w-full bg-gray-100 rounded-full h-2"><div class="bg-purple-500 h-2 rounded-full" style="width: 15%"></div></div>
              </div>
              <div>
                <div class="flex items-center justify-between mb-1">
                  <span class="text-sm text-gray-600">ðŸšª Door Knock</span>
                  <span class="text-sm font-medium text-gray-900">65%</span>
                </div>
                <div class="w-full bg-gray-100 rounded-full h-2"><div class="bg-amber-500 h-2 rounded-full" style="width: 65%"></div></div>
              </div>
            </div>
          </div>
          
          <!-- Best Time to Call -->
          <div class="bg-white rounded-xl border border-gray-200 p-6">
            <h3 class="font-semibold text-gray-900 mb-4">Best Time to Call</h3>
            <div class="grid grid-cols-4 gap-2">
              <div class="text-center p-2 bg-gray-50 rounded-lg"><p class="text-xs text-gray-500">6am</p><p class="text-sm text-gray-300">â€¢</p></div>
              <div class="text-center p-2 bg-gray-50 rounded-lg"><p class="text-xs text-gray-500">9am</p><p class="text-sm text-amber-500">â€¢â€¢</p></div>
              <div class="text-center p-2 bg-green-50 rounded-lg border border-green-200"><p class="text-xs text-gray-500">12pm</p><p class="text-sm text-green-500">â€¢â€¢â€¢</p></div>
              <div class="text-center p-2 bg-gray-50 rounded-lg"><p class="text-xs text-gray-500">3pm</p><p class="text-sm text-amber-500">â€¢â€¢</p></div>
              <div class="text-center p-2 bg-green-50 rounded-lg border border-green-200"><p class="text-xs text-gray-500">5pm</p><p class="text-sm text-green-500">â€¢â€¢â€¢â€¢</p></div>
              <div class="text-center p-2 bg-green-100 rounded-lg border-2 border-green-400"><p class="text-xs text-green-700 font-medium">6pm</p><p class="text-sm text-green-600">â€¢â€¢â€¢â€¢â€¢</p></div>
              <div class="text-center p-2 bg-green-50 rounded-lg border border-green-200"><p class="text-xs text-gray-500">7pm</p><p class="text-sm text-green-500">â€¢â€¢â€¢â€¢</p></div>
              <div class="text-center p-2 bg-gray-50 rounded-lg"><p class="text-xs text-gray-500">8pm</p><p class="text-sm text-amber-500">â€¢â€¢</p></div>
            </div>
            <p class="text-xs text-gray-500 mt-4 text-center">ðŸŽ¯ Peak response: 6pm weekdays</p>
          </div>
        </div>
        </div>
      </div>
      
      <!-- CONTENT CREATION PAGE -->
      <div id="page-marketing" class="page flex-1 overflow-auto hidden">
        <div class="bg-white border-b border-gray-200 px-4 py-4">
          <div>
            <h1 class="text-2xl font-bold text-gray-900">Content Creation</h1>
            <p class="text-sm text-gray-500 mt-0.5">Create beautiful marketing assets â€¢ <span id="template-count">30</span> templates</p>
          </div>
        </div>
        <div class="p-4 bg-gray-50">
        
        <!-- Template Categories -->
        <div class="flex space-x-2 mb-6 flex-wrap gap-y-2">
          <button onclick="filterTemplates('all')" id="filter-all" class="template-filter px-4 py-2 bg-primary text-white rounded-lg text-sm font-medium">All Templates</button>
          <button onclick="filterTemplates('just-listed')" id="filter-just-listed" class="template-filter px-4 py-2 bg-white border border-gray-200 text-gray-700 rounded-lg text-sm font-medium hover:bg-gray-50">Just Listed</button>
          <button onclick="filterTemplates('sold')" id="filter-sold" class="template-filter px-4 py-2 bg-white border border-gray-200 text-gray-700 rounded-lg text-sm font-medium hover:bg-gray-50">Sold</button>
          <button onclick="filterTemplates('for-lease')" id="filter-for-lease" class="template-filter px-4 py-2 bg-white border border-gray-200 text-gray-700 rounded-lg text-sm font-medium hover:bg-gray-50">For Lease</button>
          <button onclick="filterTemplates('leased')" id="filter-leased" class="template-filter px-4 py-2 bg-white border border-gray-200 text-gray-700 rounded-lg text-sm font-medium hover:bg-gray-50">Leased</button>
          <button onclick="filterTemplates('open-home')" id="filter-open-home" class="template-filter px-4 py-2 bg-white border border-gray-200 text-gray-700 rounded-lg text-sm font-medium hover:bg-gray-50">Open Home</button>
          <button onclick="filterTemplates('price-reduced')" id="filter-price-reduced" class="template-filter px-4 py-2 bg-white border border-gray-200 text-gray-700 rounded-lg text-sm font-medium hover:bg-gray-50">Price Reduced</button>
          <button onclick="filterTemplates('agent')" id="filter-agent" class="template-filter px-4 py-2 bg-white border border-gray-200 text-gray-700 rounded-lg text-sm font-medium hover:bg-gray-50">Agent Profile</button>
        </div>
        
        <!-- Template Grid -->
        <div id="template-grid" class="grid grid-cols-4 gap-6">
          <!-- Templates are generated by JavaScript -->
        </div>
        </div>
      </div>
      
      <!-- LEAD DETAIL PAGE -->
      <div id="page-lead-detail" class="page flex-1 overflow-auto hidden bg-gray-50">
        <!-- Header with back button -->
        <div class="bg-white border-b border-gray-200 px-4 py-4 sticky top-0 z-10">
          <div class="flex items-center space-x-4">
            <button onclick="showPage('leads')" class="p-2 hover:bg-gray-100 rounded-lg">
              <svg class="w-5 h-5 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/></svg>
            </button>
            <div class="flex-1">
              <h1 id="lead-detail-address" class="text-xl font-bold text-gray-900">42 Ocean View Drive, Bondi</h1>
              <p class="text-sm text-gray-500">Lead Profile</p>
            </div>
            <div class="flex items-center space-x-2">
              <button class="px-4 py-2 bg-green-600 text-white rounded-lg text-sm font-medium hover:bg-green-700 flex items-center space-x-2">
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"/></svg>
                <span>Call</span>
              </button>
              <button class="px-4 py-2 bg-blue-600 text-white rounded-lg text-sm font-medium hover:bg-blue-700 flex items-center space-x-2">
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"/></svg>
                <span>SMS</span>
              </button>
              <button class="px-4 py-2 bg-primary text-white rounded-lg text-sm font-medium hover:bg-red-700 flex items-center space-x-2">
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"/></svg>
                <span>Email</span>
              </button>
            </div>
          </div>
        </div>
        
        <div class="p-4">
          <div class="grid grid-cols-3 gap-6">
            <!-- Left Column - Property & Owner Info -->
            <div class="col-span-2 space-y-6">
              <!-- Property Overview Card -->
              <div class="bg-white rounded-xl border border-gray-200 overflow-hidden">
                <div class="aspect-video bg-gray-200 relative">
                  <img src="https://images.unsplash.com/photo-1564013799919-ab600027ffc6?w=800&h=400&fit=crop" class="w-full h-full object-cover">
                  <div class="absolute top-4 right-4 bg-green-500 text-white px-3 py-1.5 rounded-lg font-bold text-lg">96% Score</div>
                </div>
                <div class="p-6">
                  <div class="flex items-start justify-between">
                    <div>
                      <h2 class="text-2xl font-bold text-gray-900">42 Ocean View Drive</h2>
                      <p class="text-gray-500 mt-1">Bondi, NSW 2026</p>
                    </div>
                    <div class="text-right">
                      <p class="text-sm text-gray-500">Estimated Value</p>
                      <p class="text-2xl font-bold text-primary">$2.4M - $2.8M</p>
                    </div>
                  </div>
                  <div class="grid grid-cols-4 gap-4 mt-6 pt-6 border-t border-gray-100">
                    <div class="text-center"><p class="text-2xl font-bold text-gray-900">4</p><p class="text-sm text-gray-500">Bedrooms</p></div>
                    <div class="text-center"><p class="text-2xl font-bold text-gray-900">3</p><p class="text-sm text-gray-500">Bathrooms</p></div>
                    <div class="text-center"><p class="text-2xl font-bold text-gray-900">2</p><p class="text-sm text-gray-500">Car Spaces</p></div>
                    <div class="text-center"><p class="text-2xl font-bold text-gray-900">650mÂ²</p><p class="text-sm text-gray-500">Land Size</p></div>
                  </div>
                </div>
              </div>
              
              <!-- Owner Information -->
              <div class="bg-white rounded-xl border border-gray-200 p-6">
                <h3 class="text-lg font-bold text-gray-900 mb-4 flex items-center">
                  <svg class="w-5 h-5 mr-2 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"/></svg>
                  Property Insights
                </h3>
                <div class="grid grid-cols-2 gap-6">
                  <div>
                    <p class="text-sm text-gray-500">Owner Type</p>
                    <p class="font-medium text-gray-900 mt-1">Owner Occupier</p>
                  </div>
                  <div>
                    <p class="text-sm text-gray-500">Ownership Duration</p>
                    <p class="font-medium text-gray-900 mt-1">12 years (since 2014)</p>
                  </div>
                  <div>
                    <p class="text-sm text-gray-500">Mailing Address</p>
                    <p class="font-medium text-gray-900 mt-1">Same as property</p>
                  </div>
                  <div>
                    <p class="text-sm text-gray-500">Last Sale</p>
                    <p class="font-medium text-gray-900 mt-1">$1.2M (2014)</p>
                  </div>
                  <div>
                    <p class="text-sm text-gray-500">Land Zoning</p>
                    <p class="font-medium text-gray-900 mt-1">R2 Low Density Residential</p>
                  </div>
                  <div>
                    <p class="text-sm text-gray-500">Council</p>
                    <p class="font-medium text-gray-900 mt-1">Waverley Council</p>
                  </div>
                </div>
              </div>
              
              <!-- Selling Signals -->
              <div class="bg-white rounded-xl border border-gray-200 p-6">
                <h3 class="text-lg font-bold text-gray-900 mb-4 flex items-center">
                  <svg class="w-5 h-5 mr-2 text-amber-500" fill="currentColor" viewBox="0 0 24 24"><path d="M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"/></svg>
                  Selling Signals Detected
                </h3>
                <div class="space-y-3">
                  <div class="flex items-center justify-between p-3 bg-green-50 rounded-lg border border-green-100">
                    <div class="flex items-center space-x-3">
                      <div class="w-10 h-10 bg-green-100 rounded-full flex items-center justify-center"><svg class="w-5 h-5 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/></svg></div>
                      <div><p class="font-medium text-gray-900">Mortgage Fully Paid</p><p class="text-xs text-gray-500">No encumbrances on title</p></div>
                    </div>
                    <span class="px-2 py-1 bg-green-100 text-green-700 text-xs font-medium rounded">+25 pts</span>
                  </div>
                  <div class="flex items-center justify-between p-3 bg-blue-50 rounded-lg border border-blue-100">
                    <div class="flex items-center space-x-3">
                      <div class="w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center"><svg class="w-5 h-5 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/></svg></div>
                      <div><p class="font-medium text-gray-900">Long-term Owner</p><p class="text-xs text-gray-500">12+ years ownership - likely ready to downsize</p></div>
                    </div>
                    <span class="px-2 py-1 bg-blue-100 text-blue-700 text-xs font-medium rounded">+20 pts</span>
                  </div>
                  <div class="flex items-center justify-between p-3 bg-amber-50 rounded-lg border border-amber-100">
                    <div class="flex items-center space-x-3">
                      <div class="w-10 h-10 bg-amber-100 rounded-full flex items-center justify-center"><svg class="w-5 h-5 text-amber-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"/></svg></div>
                      <div><p class="font-medium text-gray-900">Neighbour Just Sold</p><p class="text-xs text-gray-500">44 Ocean View Dr sold for $2.65M (3 weeks ago)</p></div>
                    </div>
                    <span class="px-2 py-1 bg-amber-100 text-amber-700 text-xs font-medium rounded">+15 pts</span>
                  </div>
                  <div class="flex items-center justify-between p-3 bg-purple-50 rounded-lg border border-purple-100">
                    <div class="flex items-center space-x-3">
                      <div class="w-10 h-10 bg-purple-100 rounded-full flex items-center justify-center"><svg class="w-5 h-5 text-purple-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"/></svg></div>
                      <div><p class="font-medium text-gray-900">Online Valuation Request</p><p class="text-xs text-gray-500">Checked property value on realestate.com.au</p></div>
                    </div>
                    <span class="px-2 py-1 bg-purple-100 text-purple-700 text-xs font-medium rounded">+18 pts</span>
                  </div>
                  <div class="flex items-center justify-between p-3 bg-red-50 rounded-lg border border-red-100">
                    <div class="flex items-center space-x-3">
                      <div class="w-10 h-10 bg-red-100 rounded-full flex items-center justify-center"><svg class="w-5 h-5 text-red-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"/></svg></div>
                      <div><p class="font-medium text-gray-900">Kids Moved Out</p><p class="text-xs text-gray-500">Empty nesters - potential downsizer</p></div>
                    </div>
                    <span class="px-2 py-1 bg-red-100 text-red-700 text-xs font-medium rounded">+18 pts</span>
                  </div>
                </div>
              </div>
              
              <!-- Activity Timeline -->
              <div class="bg-white rounded-xl border border-gray-200 p-6">
                <h3 class="text-lg font-bold text-gray-900 mb-4 flex items-center">
                  <svg class="w-5 h-5 mr-2 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>
                  Activity Timeline
                </h3>
                <div class="space-y-4">
                  <div class="flex space-x-3">
                    <div class="w-2 h-2 mt-2 bg-primary rounded-full"></div>
                    <div><p class="text-sm font-medium text-gray-900">Lead assigned to you</p><p class="text-xs text-gray-500">Today at 9:15am</p></div>
                  </div>
                  <div class="flex space-x-3">
                    <div class="w-2 h-2 mt-2 bg-blue-500 rounded-full"></div>
                    <div><p class="text-sm font-medium text-gray-900">Valuation request detected</p><p class="text-xs text-gray-500">Yesterday at 2:30pm</p></div>
                  </div>
                  <div class="flex space-x-3">
                    <div class="w-2 h-2 mt-2 bg-green-500 rounded-full"></div>
                    <div><p class="text-sm font-medium text-gray-900">Neighbour sale recorded</p><p class="text-xs text-gray-500">3 weeks ago</p></div>
                  </div>
                  <div class="flex space-x-3">
                    <div class="w-2 h-2 mt-2 bg-gray-300 rounded-full"></div>
                    <div><p class="text-sm font-medium text-gray-900">Property data updated</p><p class="text-xs text-gray-500">2 months ago</p></div>
                  </div>
                </div>
              </div>
            </div>
            
            <!-- Right Column - AI Prospecting Tools -->
            <div class="space-y-6">
              <!-- AI Score Breakdown -->
              <div class="bg-white rounded-xl border border-gray-200 p-6">
                <div class="flex items-center justify-between mb-4">
                  <h3 class="font-bold text-gray-900 flex items-center">
                    <svg class="w-5 h-5 mr-2 text-primary" fill="currentColor" viewBox="0 0 24 24"><path d="M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"/></svg>
                    AI Seller Score
                  </h3>
                </div>
                <div class="flex items-center justify-center my-6">
                  <div class="relative w-32 h-32">
                    <svg class="w-32 h-32 transform -rotate-90">
                      <circle cx="64" cy="64" r="56" stroke="#e5e7eb" stroke-width="8" fill="none"/>
                      <circle cx="64" cy="64" r="56" stroke="#22c55e" stroke-width="8" fill="none" stroke-dasharray="351.86" stroke-dashoffset="14" stroke-linecap="round"/>
                    </svg>
                    <div class="absolute inset-0 flex items-center justify-center">
                      <span class="text-4xl font-black text-green-500">96</span>
                    </div>
                  </div>
                </div>
                <p class="text-center text-green-500 font-semibold mb-4">Excellent - High Intent Seller</p>
                <div class="space-y-2.5 text-sm">
                  <div class="flex justify-between"><span class="text-gray-500">Financial Readiness</span><span class="font-semibold text-gray-900">25/25</span></div>
                  <div class="flex justify-between"><span class="text-gray-500">Life Events</span><span class="font-semibold text-gray-900">18/20</span></div>
                  <div class="flex justify-between"><span class="text-gray-500">Market Activity</span><span class="font-semibold text-gray-900">18/20</span></div>
                  <div class="flex justify-between"><span class="text-gray-500">Property Signals</span><span class="font-semibold text-gray-900">20/20</span></div>
                  <div class="flex justify-between"><span class="text-gray-500">Engagement</span><span class="font-semibold text-gray-900">15/15</span></div>
                </div>
              </div>
              
              <!-- Pipeline Progress -->
              <div class="bg-white rounded-xl border border-gray-200 p-5">
                <div class="flex items-center justify-between mb-4">
                  <h3 class="font-bold text-gray-900 flex items-center">
                    <svg class="w-5 h-5 mr-2 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 17V7m0 10a2 2 0 01-2 2H5a2 2 0 01-2-2V7a2 2 0 012-2h2a2 2 0 012 2m0 10a2 2 0 002 2h2a2 2 0 002-2M9 7a2 2 0 012-2h2a2 2 0 012 2m0 10V7m0 10a2 2 0 002 2h2a2 2 0 002-2V7a2 2 0 00-2-2h-2a2 2 0 00-2 2"/></svg>
                    Pipeline Progress
                  </h3>
                  <button onclick="showPage('pipeline')" class="text-xs text-primary hover:underline font-medium">View Pipeline</button>
                </div>
                <div class="flex items-center" id="lead-detail-pipeline">
                  <!-- Stage 1: New Lead -->
                  <div class="flex-1 relative">
                    <div class="lead-pipeline-stage active flex flex-col items-center cursor-pointer relative z-10" onclick="updateLeadPipelineStage(0)" data-stage="0">
                      <div class="w-10 h-10 rounded-full bg-primary text-white flex items-center justify-center text-sm font-bold shadow-lg ring-4 ring-primary/20">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"/></svg>
                      </div>
                      <span class="text-xs font-semibold text-primary mt-1">New</span>
                    </div>
                    <div class="absolute top-5 left-1/2 w-full h-0.5 bg-gray-200"></div>
                  </div>
                  
                  <!-- Stage 2: Contacted -->
                  <div class="flex-1 relative">
                    <div class="lead-pipeline-stage flex flex-col items-center cursor-pointer relative z-10" onclick="updateLeadPipelineStage(1)" data-stage="1">
                      <div class="w-10 h-10 rounded-full bg-gray-200 text-gray-400 flex items-center justify-center text-sm font-bold hover:bg-blue-100 hover:text-blue-600 transition-colors">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"/></svg>
                      </div>
                      <span class="text-xs text-gray-400 mt-1">Contacted</span>
                    </div>
                    <div class="absolute top-5 left-1/2 w-full h-0.5 bg-gray-200"></div>
                  </div>
                  
                  <!-- Stage 3: Appointment -->
                  <div class="flex-1 relative">
                    <div class="lead-pipeline-stage flex flex-col items-center cursor-pointer relative z-10" onclick="updateLeadPipelineStage(2)" data-stage="2">
                      <div class="w-10 h-10 rounded-full bg-gray-200 text-gray-400 flex items-center justify-center text-sm font-bold hover:bg-purple-100 hover:text-purple-600 transition-colors">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"/></svg>
                      </div>
                      <span class="text-xs text-gray-400 mt-1">Appt</span>
                    </div>
                    <div class="absolute top-5 left-1/2 w-full h-0.5 bg-gray-200"></div>
                  </div>
                  
                  <!-- Stage 4: Listed -->
                  <div class="flex-1 relative">
                    <div class="lead-pipeline-stage flex flex-col items-center cursor-pointer relative z-10" onclick="updateLeadPipelineStage(3)" data-stage="3">
                      <div class="w-10 h-10 rounded-full bg-gray-200 text-gray-400 flex items-center justify-center text-sm font-bold hover:bg-green-100 hover:text-green-600 transition-colors">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"/></svg>
                      </div>
                      <span class="text-xs text-gray-400 mt-1">Listed</span>
                    </div>
                    <div class="absolute top-5 left-1/2 w-full h-0.5 bg-gray-200"></div>
                  </div>
                  
                  <!-- Stage 5: Sold -->
                  <div class="flex-1 relative">
                    <div class="lead-pipeline-stage flex flex-col items-center cursor-pointer relative z-10" onclick="updateLeadPipelineStage(4)" data-stage="4">
                      <div class="w-10 h-10 rounded-full bg-gray-200 text-gray-400 flex items-center justify-center text-sm font-bold hover:bg-emerald-100 hover:text-emerald-600 transition-colors">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>
                      </div>
                      <span class="text-xs text-gray-400 mt-1">Sold!</span>
                    </div>
                  </div>
                </div>
                <p class="text-xs text-gray-400 mt-3 text-center">Click a stage to update this lead's progress</p>
              </div>
              
              <!-- Instant Appraisal CTA -->
              <div class="bg-white rounded-xl border border-gray-200 p-4">
                <div class="flex items-center space-x-3 mb-2">
                  <div class="w-10 h-10 bg-primary/10 rounded-lg flex items-center justify-center">
                    <svg class="w-5 h-5 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/></svg>
                  </div>
                  <div>
                    <h3 class="font-bold text-sm text-gray-900">Instant Appraisal</h3>
                    <p class="text-gray-500 text-xs">Impress homeowners instantly</p>
                  </div>
                </div>
                <p class="text-gray-600 text-xs mb-3">Generate a beautiful, professional property appraisal report in seconds. Perfect for door knocking or sending via email.</p>
                <button onclick="openInstantAppraisal()" class="w-full py-2.5 bg-primary text-white font-bold text-sm rounded-lg hover:bg-red-700 transition-colors flex items-center justify-center space-x-2 shadow-sm">
                  <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"/></svg>
                  <span>Generate Appraisal Report</span>
                </button>
              </div>
              
              <!-- Prepare Proposal Section -->
              <div class="bg-white rounded-xl border border-gray-200 overflow-hidden">
                <h3 class="px-5 py-3 font-bold text-gray-900 border-b border-gray-100">Prepare Proposal</h3>
                <div class="divide-y divide-gray-100">
                  <button class="ai-accordion w-full px-5 py-4 flex items-center justify-between hover:bg-gray-50 transition-colors">
                    <span class="flex items-center space-x-3"><span>ðŸŽ¯</span><span class="text-gray-700">View Seller Insights for Property</span></span>
                    <svg class="w-5 h-5 text-gray-400 accordion-chevron transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/></svg>
                  </button>
                  <button class="ai-accordion w-full px-5 py-4 flex items-center justify-between hover:bg-gray-50 transition-colors">
                    <span class="flex items-center space-x-3"><span>ðŸ </span><span class="text-gray-700">Explain the Selling Score</span></span>
                    <svg class="w-5 h-5 text-gray-400 accordion-chevron transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/></svg>
                  </button>
                  <button class="ai-accordion w-full px-5 py-4 flex items-center justify-between hover:bg-gray-50 transition-colors">
                    <span class="flex items-center space-x-3"><span>ðŸ’°</span><span class="text-gray-700">Commission Calculator</span></span>
                    <svg class="w-5 h-5 text-gray-400 accordion-chevron transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/></svg>
                  </button>
                </div>
              </div>
              
              <!-- Book The Appointment Section -->
              <div class="bg-white rounded-xl border border-gray-200 overflow-hidden">
                <h3 class="px-5 py-3 font-bold text-gray-900 border-b border-gray-100">Book The Appointment</h3>
                <div class="divide-y divide-gray-100">
                  <button class="ai-accordion w-full px-5 py-4 flex items-center justify-between hover:bg-gray-50 transition-colors">
                    <span class="flex items-center space-x-3"><span>ðŸ¡</span><span class="text-gray-700">Property Highlights</span></span>
                    <svg class="w-5 h-5 text-gray-400 accordion-chevron transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/></svg>
                  </button>
                  <button class="ai-accordion w-full px-5 py-4 flex items-center justify-between hover:bg-gray-50 transition-colors">
                    <span class="flex items-center space-x-3"><span>â°</span><span class="text-gray-700">Get Homeowner Interested ASAP</span></span>
                    <svg class="w-5 h-5 text-gray-400 accordion-chevron transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/></svg>
                  </button>
                  <button class="ai-accordion w-full px-5 py-4 flex items-center justify-between hover:bg-gray-50 transition-colors">
                    <span class="flex items-center space-x-3"><span>ðŸ’¬</span><span class="text-gray-700">SMS & Email Appraisal Script</span></span>
                    <svg class="w-5 h-5 text-gray-400 accordion-chevron transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/></svg>
                  </button>
                  <button class="ai-accordion w-full px-5 py-4 flex items-center justify-between hover:bg-gray-50 transition-colors">
                    <span class="flex items-center space-x-3"><span>ðŸš€</span><span class="text-gray-700">AI Price Predictions</span></span>
                    <svg class="w-5 h-5 text-gray-400 accordion-chevron transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/></svg>
                  </button>
                  <button class="ai-accordion w-full px-5 py-4 flex items-center justify-between hover:bg-gray-50 transition-colors">
                    <span class="flex items-center space-x-3"><span>ðŸ¤©</span><span class="text-gray-700">Unique Prospecting Methods</span></span>
                    <svg class="w-5 h-5 text-gray-400 accordion-chevron transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/></svg>
                  </button>
                </div>
              </div>
              
              <!-- Sell The Property Section -->
              <div class="bg-white rounded-xl border border-gray-200 overflow-hidden">
                <h3 class="px-5 py-3 font-bold text-gray-900 border-b border-gray-100">Sell The Property</h3>
                <div class="divide-y divide-gray-100">
                  <button class="ai-accordion w-full px-5 py-4 flex items-center justify-between hover:bg-gray-50 transition-colors">
                    <span class="flex items-center space-x-3"><span>ðŸ’Ž</span><span class="text-gray-700">How to Win the Listing</span></span>
                    <svg class="w-5 h-5 text-gray-400 accordion-chevron transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/></svg>
                  </button>
                  <button class="ai-accordion w-full px-5 py-4 flex items-center justify-between hover:bg-gray-50 transition-colors">
                    <span class="flex items-center space-x-3"><span>ðŸ¤</span><span class="text-gray-700">Objection Handling</span></span>
                    <svg class="w-5 h-5 text-gray-400 accordion-chevron transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/></svg>
                  </button>
                  <button class="ai-accordion w-full px-5 py-4 flex items-center justify-between hover:bg-gray-50 transition-colors">
                    <span class="flex items-center space-x-3"><span>ðŸ˜ï¸</span><span class="text-gray-700">Similar Property Comparison</span></span>
                    <svg class="w-5 h-5 text-gray-400 accordion-chevron transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/></svg>
                  </button>
                  <button class="ai-accordion w-full px-5 py-4 flex items-center justify-between hover:bg-gray-50 transition-colors">
                    <span class="flex items-center space-x-3"><span>ðŸ’²</span><span class="text-gray-700">Pricing Strategy</span></span>
                    <svg class="w-5 h-5 text-gray-400 accordion-chevron transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/></svg>
                  </button>
                  <button class="ai-accordion w-full px-5 py-4 flex items-center justify-between hover:bg-gray-50 transition-colors">
                    <span class="flex items-center space-x-3"><span>ðŸ“±</span><span class="text-gray-700">Facebook Ad Generator</span></span>
                    <svg class="w-5 h-5 text-gray-400 accordion-chevron transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/></svg>
                  </button>
                  <button class="ai-accordion w-full px-5 py-4 flex items-center justify-between hover:bg-gray-50 transition-colors">
                    <span class="flex items-center space-x-3"><span>ðŸ›‹ï¸</span><span class="text-gray-700">Virtual Staging Suggestions</span></span>
                    <svg class="w-5 h-5 text-gray-400 accordion-chevron transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/></svg>
                  </button>
                  <button class="ai-accordion w-full px-5 py-4 flex items-center justify-between hover:bg-gray-50 transition-colors">
                    <span class="flex items-center space-x-3"><span>ðŸ“‹</span><span class="text-gray-700">Create Marketing Material</span></span>
                    <svg class="w-5 h-5 text-gray-400 accordion-chevron transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/></svg>
                  </button>
                  <button class="ai-accordion w-full px-5 py-4 flex items-center justify-between hover:bg-gray-50 transition-colors">
                    <span class="flex items-center space-x-3"><span>ðŸ‘«</span><span class="text-gray-700">Seller Matchmaker</span></span>
                    <svg class="w-5 h-5 text-gray-400 accordion-chevron transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/></svg>
                  </button>
                </div>
              </div>
              
              <!-- Competitor Analysis -->
              <div class="bg-white rounded-xl border border-gray-200 p-6">
                <h3 class="font-bold text-gray-900 mb-4 flex items-center">
                  <svg class="w-5 h-5 mr-2 text-purple-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0z"/></svg>
                  Competitor Watch
                </h3>
                <div class="space-y-3 text-sm">
                  <div class="flex items-center justify-between p-2 bg-gray-50 rounded">
                    <span class="text-gray-600">Agents subscribed</span>
                    <span class="font-medium text-gray-900">11 agents</span>
                  </div>
                  <div class="flex items-center justify-between p-2 bg-yellow-50 rounded">
                    <span class="text-gray-600">Last agent contact</span>
                    <span class="font-medium text-yellow-700">2 days ago</span>
                  </div>
                  <div class="flex items-center justify-between p-2 bg-green-50 rounded">
                    <span class="text-gray-600">Your advantage</span>
                    <span class="font-medium text-green-700">First to call today</span>
                  </div>
                </div>
              </div>
              
              <!-- Quick Actions -->
              <div class="bg-white rounded-xl border border-gray-200 p-6">
                <h3 class="font-bold text-gray-900 mb-4">Quick Actions</h3>
                <div class="grid grid-cols-2 gap-3">
                  <button class="p-3 bg-gray-50 rounded-lg text-center hover:bg-gray-100">
                    <svg class="w-6 h-6 mx-auto text-gray-600 mb-1" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"/></svg>
                    <span class="text-xs text-gray-700">Book Appraisal</span>
                  </button>
                  <button class="p-3 bg-gray-50 rounded-lg text-center hover:bg-gray-100">
                    <svg class="w-6 h-6 mx-auto text-gray-600 mb-1" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/></svg>
                    <span class="text-xs text-gray-700">Send Brochure</span>
                  </button>
                  <button class="p-3 bg-gray-50 rounded-lg text-center hover:bg-gray-100">
                    <svg class="w-6 h-6 mx-auto text-gray-600 mb-1" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"/></svg>
                    <span class="text-xs text-gray-700">Add Note</span>
                  </button>
                  <button class="p-3 bg-gray-50 rounded-lg text-center hover:bg-gray-100">
                    <svg class="w-6 h-6 mx-auto text-gray-600 mb-1" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"/></svg>
                    <span class="text-xs text-gray-700">Add to Pipeline</span>
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      
      <!-- INSTANT APPRAISAL MODAL -->
      <div id="instant-appraisal-modal" class="fixed inset-0 bg-black/60 backdrop-blur-sm z-50 hidden flex items-center justify-center p-4">
        <div class="bg-white rounded-2xl shadow-2xl w-full max-w-5xl max-h-[95vh] overflow-hidden flex flex-col">
          <!-- Modal Header -->
          <div class="flex items-center justify-between px-6 py-4 border-b border-gray-200 bg-gradient-to-r from-gray-50 to-white">
            <div class="flex items-center space-x-3">
              <div class="w-10 h-10 bg-primary/10 rounded-xl flex items-center justify-center">
                <svg class="w-5 h-5 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/></svg>
              </div>
              <div>
                <h2 class="text-lg font-bold text-gray-900">Instant Property Appraisal</h2>
                <p class="text-sm text-gray-500">Professional report ready to share</p>
              </div>
            </div>
            <div class="flex items-center space-x-2">
              <button onclick="emailAppraisal()" class="px-4 py-2 bg-blue-600 text-white rounded-lg text-sm font-medium hover:bg-blue-700 flex items-center space-x-2">
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"/></svg>
                <span>Email to Owner</span>
              </button>
              <button onclick="downloadAppraisal()" class="px-4 py-2 bg-primary text-white rounded-lg text-sm font-medium hover:bg-red-700 flex items-center space-x-2">
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/></svg>
                <span>Download PDF</span>
              </button>
              <button onclick="closeInstantAppraisal()" class="p-2 hover:bg-gray-100 rounded-lg">
                <svg class="w-5 h-5 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/></svg>
              </button>
            </div>
          </div>
          
          <!-- Appraisal Document Preview -->
          <div class="flex-1 overflow-auto bg-gray-100 p-6">
            <div id="appraisal-document" class="bg-white max-w-3xl mx-auto shadow-xl rounded-lg overflow-hidden" style="font-family: 'Georgia', serif;">
              
              <!-- Cover Header with Gradient -->
              <div class="relative h-72 bg-gradient-to-br from-gray-900 via-gray-800 to-primary overflow-hidden">
                <div class="absolute inset-0 bg-black/30"></div>
                <img src="https://images.unsplash.com/photo-1564013799919-ab600027ffc6?w=800&h=400&fit=crop" class="absolute inset-0 w-full h-full object-cover opacity-40">
                <div class="absolute inset-0 bg-gradient-to-t from-gray-900/90 via-transparent to-transparent"></div>
                <div class="relative z-10 h-full flex flex-col justify-between p-8">
                  <div class="flex items-center justify-between">
                    <div class="flex items-center space-x-3">
                      <div class="w-12 h-12 bg-white rounded-xl flex items-center justify-center shadow-lg">
                        <span class="text-primary font-bold text-lg">GL</span>
                      </div>
                      <div class="text-white">
                        <p class="font-bold">Get Listings</p>
                        <p class="text-xs text-white/70">Powered by AI</p>
                      </div>
                    </div>
                    <div class="text-right text-white">
                      <p class="text-sm text-white/70">Property Appraisal</p>
                      <p class="font-bold" id="appraisal-date">January 2026</p>
                    </div>
                  </div>
                  <div>
                    <p class="text-white/80 text-sm uppercase tracking-wider mb-2">Complimentary Property Valuation</p>
                    <h1 class="text-4xl font-bold text-white" id="appraisal-property-address">42 Ocean View Drive</h1>
                    <p class="text-xl text-white/90 mt-1" id="appraisal-suburb">Bondi, NSW 2026</p>
                  </div>
                </div>
              </div>
              
              <!-- Value Estimate Hero -->
              <div class="bg-gradient-to-r from-green-50 to-emerald-50 border-b-4 border-green-500 p-8">
                <div class="text-center">
                  <p class="text-sm text-gray-600 uppercase tracking-wider mb-2">Estimated Market Value</p>
                  <div class="text-5xl font-bold text-gray-900 mb-2" id="appraisal-value-range">$2,400,000 - $2,800,000</div>
                  <p class="text-gray-600">Based on recent comparable sales and market conditions</p>
                  <div class="flex items-center justify-center space-x-6 mt-6">
                    <div class="text-center">
                      <p class="text-2xl font-bold text-green-600">+32%</p>
                      <p class="text-xs text-gray-500">Since Purchase</p>
                    </div>
                    <div class="w-px h-10 bg-gray-300"></div>
                    <div class="text-center">
                      <p class="text-2xl font-bold text-green-600">+8.2%</p>
                      <p class="text-xs text-gray-500">Last 12 Months</p>
                    </div>
                    <div class="w-px h-10 bg-gray-300"></div>
                    <div class="text-center">
                      <p class="text-2xl font-bold text-gray-900">$1,200,000</p>
                      <p class="text-xs text-gray-500">Capital Growth</p>
                    </div>
                  </div>
                </div>
              </div>
              
              <!-- Property Details Grid -->
              <div class="p-8 border-b border-gray-200">
                <h2 class="text-lg font-bold text-gray-900 mb-6 flex items-center">
                  <span class="w-8 h-8 bg-primary/10 rounded-lg flex items-center justify-center mr-3">
                    <svg class="w-4 h-4 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"/></svg>
                  </span>
                  Property Overview
                </h2>
                <div class="grid grid-cols-4 gap-6">
                  <div class="bg-gray-50 rounded-xl p-4 text-center">
                    <div class="w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-2">
                      <svg class="w-5 h-5 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"/></svg>
                    </div>
                    <p class="text-2xl font-bold text-gray-900">4</p>
                    <p class="text-sm text-gray-500">Bedrooms</p>
                  </div>
                  <div class="bg-gray-50 rounded-xl p-4 text-center">
                    <div class="w-10 h-10 bg-cyan-100 rounded-full flex items-center justify-center mx-auto mb-2">
                      <svg class="w-5 h-5 text-cyan-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 14v3m4-3v3m4-3v3M3 21h18M3 10h18M3 7l9-4 9 4M4 10h16v11H4V10z"/></svg>
                    </div>
                    <p class="text-2xl font-bold text-gray-900">3</p>
                    <p class="text-sm text-gray-500">Bathrooms</p>
                  </div>
                  <div class="bg-gray-50 rounded-xl p-4 text-center">
                    <div class="w-10 h-10 bg-amber-100 rounded-full flex items-center justify-center mx-auto mb-2">
                      <svg class="w-5 h-5 text-amber-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"/></svg>
                    </div>
                    <p class="text-2xl font-bold text-gray-900">2</p>
                    <p class="text-sm text-gray-500">Car Spaces</p>
                  </div>
                  <div class="bg-gray-50 rounded-xl p-4 text-center">
                    <div class="w-10 h-10 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-2">
                      <svg class="w-5 h-5 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 5a1 1 0 011-1h14a1 1 0 011 1v2a1 1 0 01-1 1H5a1 1 0 01-1-1V5zM4 13a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H5a1 1 0 01-1-1v-6z"/></svg>
                    </div>
                    <p class="text-2xl font-bold text-gray-900">650mÂ²</p>
                    <p class="text-sm text-gray-500">Land Size</p>
                  </div>
                </div>
              </div>
              
              <!-- Comparable Sales -->
              <div class="p-8 border-b border-gray-200">
                <h2 class="text-lg font-bold text-gray-900 mb-6 flex items-center">
                  <span class="w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center mr-3">
                    <svg class="w-4 h-4 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"/></svg>
                  </span>
                  Recent Comparable Sales in Your Area
                </h2>
                <div class="space-y-4">
                  <div class="flex items-center p-4 bg-green-50 rounded-xl border border-green-100">
                    <img src="https://images.unsplash.com/photo-1600596542815-ffad4c1539a9?w=120&h=80&fit=crop" class="w-24 h-16 object-cover rounded-lg mr-4">
                    <div class="flex-1">
                      <p class="font-semibold text-gray-900">44 Ocean View Drive, Bondi</p>
                      <p class="text-sm text-gray-500">4 bed â€¢ 3 bath â€¢ 620mÂ² â€¢ Sold 3 weeks ago</p>
                    </div>
                    <div class="text-right">
                      <p class="text-xl font-bold text-green-600">$2,650,000</p>
                      <p class="text-xs text-gray-500">Your neighbour</p>
                    </div>
                  </div>
                  <div class="flex items-center p-4 bg-gray-50 rounded-xl">
                    <img src="https://images.unsplash.com/photo-1600585154340-be6161a56a0c?w=120&h=80&fit=crop" class="w-24 h-16 object-cover rounded-lg mr-4">
                    <div class="flex-1">
                      <p class="font-semibold text-gray-900">18 Campbell Parade, Bondi</p>
                      <p class="text-sm text-gray-500">4 bed â€¢ 2 bath â€¢ 580mÂ² â€¢ Sold 6 weeks ago</p>
                    </div>
                    <div class="text-right">
                      <p class="text-xl font-bold text-gray-900">$2,480,000</p>
                      <p class="text-xs text-gray-500">350m away</p>
                    </div>
                  </div>
                  <div class="flex items-center p-4 bg-gray-50 rounded-xl">
                    <img src="https://images.unsplash.com/photo-1600607687939-ce8a6c25118c?w=120&h=80&fit=crop" class="w-24 h-16 object-cover rounded-lg mr-4">
                    <div class="flex-1">
                      <p class="font-semibold text-gray-900">7 Beach Road, Bondi</p>
                      <p class="text-sm text-gray-500">5 bed â€¢ 4 bath â€¢ 720mÂ² â€¢ Sold 2 months ago</p>
                    </div>
                    <div class="text-right">
                      <p class="text-xl font-bold text-gray-900">$3,150,000</p>
                      <p class="text-xs text-gray-500">500m away</p>
                    </div>
                  </div>
                </div>
              </div>
              
              <!-- Market Insights -->
              <div class="p-8 border-b border-gray-200 bg-gradient-to-r from-blue-50 to-indigo-50">
                <h2 class="text-lg font-bold text-gray-900 mb-6 flex items-center">
                  <span class="w-8 h-8 bg-indigo-100 rounded-lg flex items-center justify-center mr-3">
                    <svg class="w-4 h-4 text-indigo-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"/></svg>
                  </span>
                  Bondi Market Snapshot
                </h2>
                <div class="grid grid-cols-3 gap-6">
                  <div class="bg-white rounded-xl p-5 shadow-sm">
                    <div class="flex items-center justify-between mb-3">
                      <p class="text-sm text-gray-500">Median House Price</p>
                      <span class="text-xs text-green-600 font-medium bg-green-100 px-2 py-0.5 rounded">â†‘ 12%</span>
                    </div>
                    <p class="text-2xl font-bold text-gray-900">$3.2M</p>
                    <div class="mt-3 h-2 bg-gray-100 rounded-full overflow-hidden">
                      <div class="h-full bg-gradient-to-r from-green-400 to-green-500 rounded-full" style="width: 75%"></div>
                    </div>
                  </div>
                  <div class="bg-white rounded-xl p-5 shadow-sm">
                    <div class="flex items-center justify-between mb-3">
                      <p class="text-sm text-gray-500">Days on Market</p>
                      <span class="text-xs text-green-600 font-medium bg-green-100 px-2 py-0.5 rounded">â†“ Fast</span>
                    </div>
                    <p class="text-2xl font-bold text-gray-900">21 days</p>
                    <div class="mt-3 h-2 bg-gray-100 rounded-full overflow-hidden">
                      <div class="h-full bg-gradient-to-r from-blue-400 to-blue-500 rounded-full" style="width: 35%"></div>
                    </div>
                  </div>
                  <div class="bg-white rounded-xl p-5 shadow-sm">
                    <div class="flex items-center justify-between mb-3">
                      <p class="text-sm text-gray-500">Auction Clearance</p>
                      <span class="text-xs text-green-600 font-medium bg-green-100 px-2 py-0.5 rounded">Strong</span>
                    </div>
                    <p class="text-2xl font-bold text-gray-900">78%</p>
                    <div class="mt-3 h-2 bg-gray-100 rounded-full overflow-hidden">
                      <div class="h-full bg-gradient-to-r from-amber-400 to-orange-500 rounded-full" style="width: 78%"></div>
                    </div>
                  </div>
                </div>
                <div class="mt-6 p-4 bg-white rounded-xl shadow-sm">
                  <p class="text-sm text-gray-700"><span class="font-semibold">Market Analysis:</span> Bondi is experiencing strong buyer demand, particularly for family homes with ocean views. Properties similar to yours are selling within 3 weeks on average, often above the asking price. Now is an excellent time to consider your options.</p>
                </div>
              </div>
              
              <!-- Why Sell Now -->
              <div class="p-8 border-b border-gray-200">
                <h2 class="text-lg font-bold text-gray-900 mb-6 flex items-center">
                  <span class="w-8 h-8 bg-amber-100 rounded-lg flex items-center justify-center mr-3">
                    <svg class="w-4 h-4 text-amber-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>
                  </span>
                  Why Now Could Be the Right Time
                </h2>
                <div class="grid grid-cols-2 gap-4">
                  <div class="flex items-start space-x-3 p-4 bg-green-50 rounded-xl">
                    <div class="w-8 h-8 bg-green-100 rounded-full flex items-center justify-center flex-shrink-0">
                      <svg class="w-4 h-4 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/></svg>
                    </div>
                    <div>
                      <p class="font-semibold text-gray-900">Peak Selling Season</p>
                      <p class="text-sm text-gray-600">Buyer activity is at its highest in Q1 2026</p>
                    </div>
                  </div>
                  <div class="flex items-start space-x-3 p-4 bg-green-50 rounded-xl">
                    <div class="w-8 h-8 bg-green-100 rounded-full flex items-center justify-center flex-shrink-0">
                      <svg class="w-4 h-4 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/></svg>
                    </div>
                    <div>
                      <p class="font-semibold text-gray-900">Low Stock Levels</p>
                      <p class="text-sm text-gray-600">Only 12 similar homes listed in Bondi</p>
                    </div>
                  </div>
                  <div class="flex items-start space-x-3 p-4 bg-green-50 rounded-xl">
                    <div class="w-8 h-8 bg-green-100 rounded-full flex items-center justify-center flex-shrink-0">
                      <svg class="w-4 h-4 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/></svg>
                    </div>
                    <div>
                      <p class="font-semibold text-gray-900">Interest Rate Cuts</p>
                      <p class="text-sm text-gray-600">RBA cuts boosting borrowing capacity</p>
                    </div>
                  </div>
                  <div class="flex items-start space-x-3 p-4 bg-green-50 rounded-xl">
                    <div class="w-8 h-8 bg-green-100 rounded-full flex items-center justify-center flex-shrink-0">
                      <svg class="w-4 h-4 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/></svg>
                    </div>
                    <div>
                      <p class="font-semibold text-gray-900">Neighbour Just Sold</p>
                      <p class="text-sm text-gray-600">44 Ocean View achieved $2.65M</p>
                    </div>
                  </div>
                </div>
              </div>
              
              <!-- Agent Card -->
              <div class="p-8 bg-gradient-to-r from-gray-900 to-gray-800">
                <div class="flex items-center justify-between">
                  <div class="flex items-center space-x-5">
                    <div class="w-20 h-20 bg-gradient-to-br from-gray-600 to-gray-700 rounded-full flex items-center justify-center text-white text-2xl font-bold border-4 border-white/20">JD</div>
                    <div class="text-white">
                      <h3 class="text-xl font-bold">John Davidson</h3>
                      <p class="text-white/70">Senior Sales Agent â€¢ Ray White Bondi</p>
                      <div class="flex items-center space-x-4 mt-2">
                        <span class="flex items-center space-x-1 text-sm text-white/80">
                          <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"/></svg>
                          <span>0412 345 678</span>
                        </span>
                        <span class="flex items-center space-x-1 text-sm text-white/80">
                          <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"/></svg>
                          <span>john@raywhite.com</span>
                        </span>
                      </div>
                    </div>
                  </div>
                  <div class="text-right">
                    <p class="text-white/60 text-sm">My track record in Bondi</p>
                    <div class="flex items-center space-x-6 mt-2">
                      <div>
                        <p class="text-2xl font-bold text-white">$47M</p>
                        <p class="text-xs text-white/60">Sold in 2025</p>
                      </div>
                      <div>
                        <p class="text-2xl font-bold text-white">23</p>
                        <p class="text-xs text-white/60">Properties</p>
                      </div>
                      <div>
                        <p class="text-2xl font-bold text-amber-400">4.9â˜…</p>
                        <p class="text-xs text-white/60">Avg Rating</p>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              
              <!-- Call to Action Footer -->
              <div class="p-8 bg-primary text-center">
                <h3 class="text-2xl font-bold text-white mb-2">Ready to Explore Your Options?</h3>
                <p class="text-white/90 mb-6">Book a free, no-obligation appraisal and let's discuss how to maximise your property's value.</p>
                <div class="flex items-center justify-center space-x-4">
                  <a href="tel:0412345678" class="px-8 py-3 bg-white text-primary font-bold rounded-lg hover:bg-gray-100 transition-colors flex items-center space-x-2">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"/></svg>
                    <span>Call Now</span>
                  </a>
                  <a href="#" class="px-8 py-3 bg-white/20 text-white font-bold rounded-lg hover:bg-white/30 transition-colors border-2 border-white/50 flex items-center space-x-2">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"/></svg>
                    <span>Book Appraisal</span>
                  </a>
                </div>
              </div>
              
              <!-- Footer Disclaimer -->
              <div class="p-6 bg-gray-50 border-t border-gray-200">
                <p class="text-xs text-gray-500 text-center">This appraisal is an estimate only based on recent sales data and market conditions. A formal valuation requires an in-person inspection. Prepared by Get Listings AI on behalf of John Davidson. Â© 2026 Get Listings Pty Ltd.</p>
              </div>
              
            </div>
          </div>
        </div>
      </div>
      
      <!-- LEADERBOARD PAGE -->
      <div id="page-leaderboard" class="page flex-1 overflow-auto hidden bg-gray-50">
        <div class="bg-white border-b border-gray-200 px-4 py-4">
          <div class="flex items-center justify-between">
            <div>
              <h1 class="text-2xl font-bold text-gray-900">Agent Leaderboard</h1>
              <p class="text-sm text-gray-500 mt-0.5">Top performing agents this month</p>
            </div>
            <div class="flex items-center space-x-2">
              <select class="px-3 py-2 border border-gray-200 rounded-lg text-sm bg-white">
                <option>This Month</option>
                <option>Last Month</option>
                <option>This Quarter</option>
                <option>This Year</option>
                <option>All Time</option>
              </select>
            </div>
          </div>
        </div>
        
        <div class="p-6">
          <!-- Top 3 Podium -->
          <div class="bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 rounded-2xl p-10 pt-16 mb-6 shadow-xl">
            <div class="flex items-end justify-center gap-8 md:gap-12">
              <!-- 2nd Place -->
              <div class="text-center w-48">
                <div class="relative mb-4">
                  <div class="w-20 h-20 rounded-full border-4 border-gray-400 overflow-hidden mx-auto shadow-lg bg-gray-700">
                    <img src="https://images.unsplash.com/photo-1573496359142-b8d87734a5a2?w=150&h=150&fit=crop&crop=face" alt="Sheridan Melrose" class="w-full h-full object-cover">
                  </div>
                  <div class="absolute -bottom-2 left-1/2 transform -translate-x-1/2 w-7 h-7 bg-gradient-to-br from-gray-300 to-gray-500 rounded-full flex items-center justify-center text-slate-900 text-sm font-bold shadow-lg border-2 border-white">2</div>
                </div>
                <div class="bg-gray-400/20 backdrop-blur rounded-xl p-4">
                  <p class="font-semibold text-white whitespace-nowrap">Sheridan Melrose</p>
                  <p class="text-xs text-gray-400 mt-1">Ray White Double Bay</p>
                  <p class="text-3xl font-bold text-white mt-3">526</p>
                  <p class="text-xs text-gray-400">points</p>
                </div>
              </div>
              
              <!-- 1st Place -->
              <div class="text-center w-52">
                <div class="relative mb-4">
                  <!-- Crown -->
                  <div class="absolute -top-6 left-1/2 transform -translate-x-1/2 z-10">
                    <svg class="w-10 h-10 text-amber-400 drop-shadow-lg" fill="currentColor" viewBox="0 0 24 24"><path d="M5 16L3 5l5.5 5L12 4l3.5 6L21 5l-2 11H5zm14 3c0 .6-.4 1-1 1H6c-.6 0-1-.4-1-1v-1h14v1z"/></svg>
                  </div>
                  <div class="w-28 h-28 rounded-full border-4 border-amber-400 overflow-hidden mx-auto shadow-xl ring-4 ring-amber-400/30 bg-gray-700">
                    <img src="https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=150&h=150&fit=crop&crop=face" alt="Darren Cooke" class="w-full h-full object-cover">
                  </div>
                  <div class="absolute -bottom-2 left-1/2 transform -translate-x-1/2 w-8 h-8 bg-gradient-to-br from-amber-400 to-amber-600 rounded-full flex items-center justify-center text-slate-900 text-base font-bold shadow-lg border-2 border-white">1</div>
                </div>
                <div class="bg-amber-400/20 backdrop-blur rounded-xl p-5 border border-amber-400/30">
                  <p class="font-bold text-white text-xl">Darren Cooke</p>
                  <p class="text-sm text-amber-200 mt-1">McGrath Estate Agents</p>
                  <p class="text-5xl font-black text-white mt-3">766</p>
                  <p class="text-sm text-amber-200">points</p>
                </div>
              </div>
              
              <!-- 3rd Place -->
              <div class="text-center w-48">
                <div class="relative mb-4">
                  <div class="w-20 h-20 rounded-full border-4 border-amber-700 overflow-hidden mx-auto shadow-lg bg-gray-700">
                    <img src="https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=150&h=150&fit=crop&crop=face" alt="Billy Clarke" class="w-full h-full object-cover">
                  </div>
                  <div class="absolute -bottom-2 left-1/2 transform -translate-x-1/2 w-7 h-7 bg-gradient-to-br from-amber-600 to-amber-800 rounded-full flex items-center justify-center text-white text-sm font-bold shadow-lg border-2 border-white">3</div>
                </div>
                <div class="bg-amber-700/20 backdrop-blur rounded-xl p-4">
                  <p class="font-semibold text-white whitespace-nowrap">Billy Clarke</p>
                  <p class="text-xs text-gray-400 mt-1">LJ Hooker Bondi</p>
                  <p class="text-3xl font-bold text-white mt-3">226</p>
                  <p class="text-xs text-gray-400">points</p>
                </div>
              </div>
            </div>
          </div>
          
          <!-- Rankings Table -->
          <div id="leaderboard-table" class="bg-white rounded-xl border border-gray-200 shadow-sm overflow-hidden">
            <!-- Table Header -->
            <div class="bg-gray-50 border-b border-gray-200 px-6 py-3 grid grid-cols-12 gap-4 text-xs font-semibold text-gray-500 uppercase tracking-wide">
              <div class="col-span-1">Rank</div>
              <div class="col-span-9">Agent</div>
              <div class="col-span-2 text-right">Points</div>
            </div>
            
            <!-- Dynamic leaderboard rows -->
            <div id="leaderboard-rows">
              <!-- Will be populated by loadLeaderboard() -->
              <div class="px-6 py-8 text-center text-gray-500">
                <div class="animate-pulse">Loading leaderboard...</div>
              </div>
            </div>
            
            <!-- Load More / Pagination -->
            <div id="leaderboard-pagination" class="hidden border-t border-gray-200 px-6 py-4">
              <div class="flex items-center justify-between">
                <p class="text-sm text-gray-500">
                  Showing <span id="leaderboard-showing">0</span> of <span id="leaderboard-total">0</span> agents
                </p>
                <div class="flex items-center space-x-3">
                  <button onclick="loadLeaderboardPage('prev')" id="leaderboard-prev-btn" class="px-4 py-2 text-sm font-medium text-gray-600 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors disabled:opacity-50 disabled:cursor-not-allowed" disabled>
                    â† Previous
                  </button>
                  <span id="leaderboard-page-info" class="text-sm text-gray-600 font-medium">Page 1</span>
                  <button onclick="loadLeaderboardPage('next')" id="leaderboard-next-btn" class="px-4 py-2 text-sm font-medium text-white bg-primary rounded-lg hover:bg-red-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed">
                    Next â†’
                  </button>
                </div>
              </div>
            </div>
          </div>
          
          <!-- Stats Cards -->
          <div class="grid grid-cols-3 gap-4 mt-6">
            <div class="bg-white rounded-xl border border-gray-200 p-4 shadow-sm">
              <div class="flex items-center justify-between">
                <div>
                  <p class="text-sm text-gray-500">Your Rank</p>
                  <p class="text-2xl font-bold text-gray-900" id="leaderboard-your-rank">#-</p>
                </div>
                <div class="w-10 h-10 bg-amber-100 rounded-full flex items-center justify-center">
                  <svg class="w-5 h-5 text-amber-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"/></svg>
                </div>
              </div>
              <p class="text-xs text-green-600 mt-2 flex items-center"><svg class="w-3 h-3 mr-1" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M5.293 9.707a1 1 0 010-1.414l4-4a1 1 0 011.414 0l4 4a1 1 0 01-1.414 1.414L11 7.414V15a1 1 0 11-2 0V7.414L6.707 9.707a1 1 0 01-1.414 0z" clip-rule="evenodd"/></svg>Up 3 spots this week</p>
            </div>
            <div class="bg-white rounded-xl border border-gray-200 p-4 shadow-sm">
              <div class="flex items-center justify-between">
                <div>
                  <p class="text-sm text-gray-500">Points to #11</p>
                  <p class="text-2xl font-bold text-gray-900">14</p>
                </div>
                <div class="w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center">
                  <svg class="w-5 h-5 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"/></svg>
                </div>
              </div>
              <p class="text-xs text-gray-500 mt-2">1 more sale to overtake</p>
            </div>
            <div class="bg-white rounded-xl border border-gray-200 p-4 shadow-sm">
              <div class="flex items-center justify-between">
                <div>
                  <p class="text-sm text-gray-500">This Month</p>
                  <p class="text-2xl font-bold text-gray-900">+34</p>
                </div>
                <div class="w-10 h-10 bg-green-100 rounded-full flex items-center justify-center">
                  <svg class="w-5 h-5 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>
                </div>
              </div>
              <p class="text-xs text-gray-500 mt-2">points earned</p>
            </div>
          </div>
          
          <!-- Points Info -->
          <div class="mt-6 bg-gradient-to-r from-slate-50 to-gray-50 border border-gray-200 rounded-xl p-5">
            <div class="flex items-start space-x-4">
              <div class="w-10 h-10 bg-white rounded-lg border border-gray-200 flex items-center justify-center flex-shrink-0">
                <svg class="w-5 h-5 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>
              </div>
              <div>
                <p class="font-semibold text-gray-900">How Points Are Calculated</p>
                <div class="mt-2 grid grid-cols-3 gap-4 text-sm">
                  <div class="flex items-center space-x-2">
                    <span class="w-2 h-2 bg-blue-500 rounded-full"></span>
                    <span class="text-gray-600">Appraisal booked: <strong>5 pts</strong></span>
                  </div>
                  <div class="flex items-center space-x-2">
                    <span class="w-2 h-2 bg-green-500 rounded-full"></span>
                    <span class="text-gray-600">Property listed: <strong>15 pts</strong></span>
                  </div>
                  <div class="flex items-center space-x-2">
                    <span class="w-2 h-2 bg-amber-500 rounded-full"></span>
                    <span class="text-gray-600">Property sold: <strong>25 pts</strong></span>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      
      <!-- SETTINGS PAGE -->
      <div id="page-settings" class="page flex-1 overflow-auto hidden bg-gray-50">
        <div class="bg-white border-b border-gray-200 px-4 py-4">
          <div>
            <h1 class="text-2xl font-bold text-gray-900">Settings</h1>
            <p class="text-sm text-gray-500 mt-0.5">Manage your account and preferences</p>
          </div>
        </div>
        <div class="p-4">
          
          <!-- Personal Settings Section -->
          <h2 class="text-sm font-semibold text-gray-500 uppercase tracking-wider mb-5">Personal settings</h2>
          <div class="grid grid-cols-3 gap-8 mb-12">
            <!-- Agent Persona -->
            <button onclick="showSettingsDetail('persona')" class="text-left group">
              <div class="flex items-start space-x-3">
                <div class="w-8 h-8 bg-gradient-to-br from-primary to-red-600 rounded-lg flex items-center justify-center flex-shrink-0 mt-0.5">
                  <svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5.121 17.804A13.937 13.937 0 0112 16c2.5 0 4.847.655 6.879 1.804M15 10a3 3 0 11-6 0 3 3 0 016 0zm6 2a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>
                </div>
                <div>
                  <p class="font-medium text-primary group-hover:underline">Agent persona</p>
                  <p class="text-sm text-gray-500 mt-0.5">Your profile, agency, REA/Domain links, and communication style.</p>
                </div>
              </div>
            </button>
            
            <!-- Personal Details -->
            <button onclick="showSettingsDetail('profile')" class="text-left group">
              <div class="flex items-start space-x-3">
                <div class="w-8 h-8 bg-primary/10 rounded-lg flex items-center justify-center flex-shrink-0 mt-0.5">
                  <svg class="w-4 h-4 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"/></svg>
                </div>
                <div>
                  <p class="font-medium text-primary group-hover:underline">Personal details</p>
                  <p class="text-sm text-gray-500 mt-0.5">Contact information, profile photo, and your account settings.</p>
                </div>
              </div>
            </button>
            
            <!-- Notification Preferences -->
            <button onclick="showSettingsDetail('notifications')" class="text-left group">
              <div class="flex items-start space-x-3">
                <div class="w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center flex-shrink-0 mt-0.5">
                  <svg class="w-4 h-4 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"/></svg>
                </div>
                <div>
                  <p class="font-medium text-primary group-hover:underline">Notification preferences</p>
                  <p class="text-sm text-gray-500 mt-0.5">Customise emails, SMS, and push notifications you receive.</p>
                </div>
              </div>
            </button>
            
            <!-- Security -->
            <button class="text-left group">
              <div class="flex items-start space-x-3">
                <div class="w-8 h-8 bg-green-100 rounded-lg flex items-center justify-center flex-shrink-0 mt-0.5">
                  <svg class="w-4 h-4 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"/></svg>
                </div>
                <div>
                  <p class="font-medium text-primary group-hover:underline">Security</p>
                  <p class="text-sm text-gray-500 mt-0.5">Password, two-factor authentication, and session management.</p>
                </div>
              </div>
            </button>
            
            <!-- Time Zone -->
            <button onclick="showSettingsDetail('timezone')" class="text-left group">
              <div class="flex items-start space-x-3">
                <div class="w-8 h-8 bg-sky-100 rounded-lg flex items-center justify-center flex-shrink-0 mt-0.5">
                  <svg class="w-4 h-4 text-sky-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>
                </div>
                <div>
                  <p class="font-medium text-primary group-hover:underline">Time zone</p>
                  <p class="text-sm text-gray-500 mt-0.5">Set your local time zone for notifications and scheduling.</p>
                </div>
              </div>
            </button>
          </div>
          
          <!-- Account Settings Section -->
          <h2 class="text-sm font-semibold text-gray-500 uppercase tracking-wider mb-5">Account settings</h2>
          <div class="grid grid-cols-3 gap-8 mb-12">
            <!-- Suburb Subscription -->
            <button onclick="showSettingsDetail('suburbs')" class="text-left group">
              <div class="flex items-start space-x-3">
                <div class="w-8 h-8 bg-purple-100 rounded-lg flex items-center justify-center flex-shrink-0 mt-0.5">
                  <svg class="w-4 h-4 text-purple-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"/><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"/></svg>
                </div>
                <div>
                  <p class="font-medium text-primary group-hover:underline">Suburb subscription</p>
                  <p class="text-sm text-gray-500 mt-0.5">Manage suburbs you're tracking for new seller leads.</p>
                </div>
              </div>
            </button>
            
            <!-- Manage Subscription -->
            <button onclick="showSettingsDetail('subscription')" class="text-left group">
              <div class="flex items-start space-x-3">
                <div class="w-8 h-8 bg-amber-100 rounded-lg flex items-center justify-center flex-shrink-0 mt-0.5">
                  <svg class="w-4 h-4 text-amber-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"/></svg>
                </div>
                <div>
                  <p class="font-medium text-primary group-hover:underline">Billing & subscription</p>
                  <p class="text-sm text-gray-500 mt-0.5">Manage your plan, payment methods, and invoices.</p>
                </div>
              </div>
            </button>
            
            <!-- Leaderboard -->
            <button onclick="showPage('leaderboard')" class="text-left group">
              <div class="flex items-start space-x-3">
                <div class="w-8 h-8 bg-rose-100 rounded-lg flex items-center justify-center flex-shrink-0 mt-0.5">
                  <svg class="w-4 h-4 text-rose-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z"/></svg>
                </div>
                <div>
                  <p class="font-medium text-primary group-hover:underline">Leaderboard</p>
                  <p class="text-sm text-gray-500 mt-0.5">View rankings and compete with other agents.</p>
                </div>
              </div>
            </button>
          </div>
          
          <!-- Product Settings Section -->
          <h2 class="text-sm font-semibold text-gray-500 uppercase tracking-wider mb-5">Product settings</h2>
          <div class="grid grid-cols-3 gap-8 mb-12">
            <!-- Pipeline Stages -->
            <button onclick="showSettingsDetail('pipeline')" class="text-left group">
              <div class="flex items-start space-x-3">
                <div class="w-8 h-8 bg-indigo-100 rounded-lg flex items-center justify-center flex-shrink-0 mt-0.5">
                  <svg class="w-4 h-4 text-indigo-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 17V7m0 10a2 2 0 01-2 2H5a2 2 0 01-2-2V7a2 2 0 012-2h2a2 2 0 012 2m0 10a2 2 0 002 2h2a2 2 0 002-2M9 7a2 2 0 012-2h2a2 2 0 012 2m0 10V7m0 10a2 2 0 002 2h2a2 2 0 002-2V7a2 2 0 00-2-2h-2a2 2 0 00-2 2"/></svg>
                </div>
                <div>
                  <p class="font-medium text-primary group-hover:underline">Pipeline stages</p>
                  <p class="text-sm text-gray-500 mt-0.5">Customise your sales pipeline stages and colours.</p>
                </div>
              </div>
            </button>
            
            <!-- Call Scripts -->
            <button onclick="showSettingsDetail('scripts')" class="text-left group">
              <div class="flex items-start space-x-3">
                <div class="w-8 h-8 bg-cyan-100 rounded-lg flex items-center justify-center flex-shrink-0 mt-0.5">
                  <svg class="w-4 h-4 text-cyan-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"/></svg>
                </div>
                <div>
                  <p class="font-medium text-primary group-hover:underline">Call scripts</p>
                  <p class="text-sm text-gray-500 mt-0.5">Manage your phone call scripts and templates.</p>
                </div>
              </div>
            </button>
            
            <!-- SMS & Email Templates -->
            <button onclick="showSettingsDetail('templates')" class="text-left group">
              <div class="flex items-start space-x-3">
                <div class="w-8 h-8 bg-teal-100 rounded-lg flex items-center justify-center flex-shrink-0 mt-0.5">
                  <svg class="w-4 h-4 text-teal-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"/></svg>
                </div>
                <div>
                  <p class="font-medium text-primary group-hover:underline">SMS & email templates</p>
                  <p class="text-sm text-gray-500 mt-0.5">Create and manage your messaging templates.</p>
                </div>
              </div>
            </button>
            
            <!-- API Connection -->
            <button onclick="showSettingsDetail('api')" class="text-left group">
              <div class="flex items-start space-x-3">
                <div class="w-8 h-8 bg-slate-800 rounded-lg flex items-center justify-center flex-shrink-0 mt-0.5">
                  <svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"/></svg>
                </div>
                <div>
                  <p class="font-medium text-primary group-hover:underline">API connection</p>
                  <p class="text-sm text-gray-500 mt-0.5">Connect to prop.deals API for live data.</p>
                </div>
              </div>
            </button>
          </div>
          
          <!-- Admin Section -->
          <h2 class="text-sm font-semibold text-gray-500 uppercase tracking-wider mb-5">Admin</h2>
          <div class="grid grid-cols-3 gap-8 mb-12">
            <!-- Lead Reliability -->
            <button onclick="showPage('reliability')" class="text-left group">
              <div class="flex items-start space-x-3">
                <div class="w-8 h-8 bg-amber-100 rounded-lg flex items-center justify-center flex-shrink-0 mt-0.5">
                  <svg class="w-4 h-4 text-amber-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"/></svg>
                </div>
                <div>
                  <p class="font-medium text-primary group-hover:underline">Lead reliability</p>
                  <p class="text-sm text-gray-500 mt-0.5">Review and improve lead data quality.</p>
                </div>
              </div>
            </button>
          </div>
          
          <!-- Support Section -->
          <h2 class="text-sm font-semibold text-gray-500 uppercase tracking-wider mb-5">Support</h2>
          <div class="grid grid-cols-3 gap-8 mb-12">
            <!-- Help Center -->
            <button class="text-left group">
              <div class="flex items-start space-x-3">
                <div class="w-8 h-8 bg-gray-100 rounded-lg flex items-center justify-center flex-shrink-0 mt-0.5">
                  <svg class="w-4 h-4 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>
                </div>
                <div>
                  <p class="font-medium text-primary group-hover:underline">Help center</p>
                  <p class="text-sm text-gray-500 mt-0.5">FAQs, guides, and tutorials to help you succeed.</p>
                </div>
              </div>
            </button>
            
            <!-- Contact Support -->
            <button class="text-left group">
              <div class="flex items-start space-x-3">
                <div class="w-8 h-8 bg-gray-100 rounded-lg flex items-center justify-center flex-shrink-0 mt-0.5">
                  <svg class="w-4 h-4 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M18.364 5.636l-3.536 3.536m0 5.656l3.536 3.536M9.172 9.172L5.636 5.636m3.536 9.192l-3.536 3.536M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-5 0a4 4 0 11-8 0 4 4 0 018 0z"/></svg>
                </div>
                <div>
                  <p class="font-medium text-primary group-hover:underline">Contact support</p>
                  <p class="text-sm text-gray-500 mt-0.5">Get help from our customer success team.</p>
                </div>
              </div>
            </button>
            
            <!-- Replay Tour -->
            <button onclick="localStorage.removeItem('onboardingComplete'); showOnboarding();" class="text-left group">
              <div class="flex items-start space-x-3">
                <div class="w-8 h-8 bg-sky-100 rounded-lg flex items-center justify-center flex-shrink-0 mt-0.5">
                  <svg class="w-4 h-4 text-sky-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"/></svg>
                </div>
                <div>
                  <p class="font-medium text-primary group-hover:underline">Replay tour</p>
                  <p class="text-sm text-gray-500 mt-0.5">Watch the onboarding walkthrough again.</p>
                </div>
              </div>
            </button>
            
            <!-- Sign Out -->
            <button class="text-left group">
              <div class="flex items-start space-x-3">
                <div class="w-8 h-8 bg-red-100 rounded-lg flex items-center justify-center flex-shrink-0 mt-0.5">
                  <svg class="w-4 h-4 text-red-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"/></svg>
                </div>
                <div>
                  <p class="font-medium text-red-600 group-hover:underline">Sign out</p>
                  <p class="text-sm text-gray-500 mt-0.5">Log out of your Get Listings account.</p>
                </div>
              </div>
            </button>
          </div>
          
        </div>
      </div>
      
      <!-- SETTINGS DETAIL PANELS MOVED TO END OF FILE -->
      
      <!-- BRANDING OPPORTUNITIES PAGE -->
      <div id="page-branding" class="page flex-1 overflow-auto hidden bg-gray-50">
        <div class="bg-white border-b border-gray-200">
          <div class="px-4 py-4">
            <div class="flex items-center justify-between">
              <div>
                <h1 class="text-2xl font-bold text-gray-900">Marketing Tips</h1>
                <p class="text-sm text-gray-500 mt-0.5">AI-curated tips to improve your online presence</p>
              </div>
              <div class="flex items-center space-x-2">
                <span class="text-sm text-gray-500">3 of 12 completed</span>
                <div class="w-32 h-2 bg-gray-200 rounded-full overflow-hidden">
                  <div class="w-1/4 h-full bg-green-500"></div>
                </div>
              </div>
            </div>
          </div>
          <!-- Category Tabs -->
          <div class="px-4 flex space-x-1 overflow-x-auto" id="branding-tabs">
            <button onclick="filterBrandingCategory('all')" class="branding-tab active px-4 py-2 text-sm font-medium rounded-t-lg border-b-2 border-primary text-primary bg-primary/5">All</button>
            <button onclick="filterBrandingCategory('video')" class="branding-tab px-4 py-2 text-sm font-medium rounded-t-lg border-b-2 border-transparent text-gray-500 hover:text-gray-700 hover:bg-gray-50">ðŸŽ¬ Video</button>
            <button onclick="filterBrandingCategory('social')" class="branding-tab px-4 py-2 text-sm font-medium rounded-t-lg border-b-2 border-transparent text-gray-500 hover:text-gray-700 hover:bg-gray-50">ðŸ“± Social</button>
            <button onclick="filterBrandingCategory('profile')" class="branding-tab px-4 py-2 text-sm font-medium rounded-t-lg border-b-2 border-transparent text-gray-500 hover:text-gray-700 hover:bg-gray-50">ðŸ‘¤ Profile</button>
            <button onclick="filterBrandingCategory('content')" class="branding-tab px-4 py-2 text-sm font-medium rounded-t-lg border-b-2 border-transparent text-gray-500 hover:text-gray-700 hover:bg-gray-50">ðŸ“ Content</button>
            <button onclick="filterBrandingCategory('advertising')" class="branding-tab px-4 py-2 text-sm font-medium rounded-t-lg border-b-2 border-transparent text-gray-500 hover:text-gray-700 hover:bg-gray-50">ðŸ“¢ Ads</button>
            <div class="flex-1"></div>
            <button onclick="filterBrandingCategory('completed')" class="branding-tab px-4 py-2 text-sm font-medium rounded-t-lg border-b-2 border-transparent text-gray-500 hover:text-gray-700 hover:bg-gray-50">âœ“ Completed</button>
          </div>
        </div>
        <div class="p-4" id="branding-list">
          <!-- Content added by JS -->
        </div>
      </div>
      
      <!-- LEAD RELIABILITY ADMIN PAGE -->
      <div id="page-reliability" class="page flex-1 overflow-auto hidden bg-gray-100">
        <div class="bg-white border-b border-gray-200 px-4 py-4">
          <div class="flex items-center justify-between">
            <div>
              <div class="flex items-center space-x-2">
                <h1 class="text-2xl font-bold text-gray-900">Lead Reliability</h1>
                <span class="px-2 py-0.5 bg-amber-100 text-amber-700 text-xs font-medium rounded">Admin Panel</span>
              </div>
              <p class="text-sm text-gray-500 mt-0.5">AI-screened insights awaiting verification</p>
            </div>
            <div class="flex items-center space-x-3">
              <div class="flex items-center space-x-2 text-sm">
                <span class="text-gray-500">Filter:</span>
                <select id="reliability-filter" onchange="filterReliabilityInsights(this.value)" class="px-3 py-1.5 border border-gray-200 rounded-lg text-sm">
                  <option value="pending">Pending Review</option>
                  <option value="all">All Insights</option>
                  <option value="approved">Approved</option>
                  <option value="rejected">Rejected</option>
                </select>
              </div>
              <button onclick="autoApproveHighConfidence()" class="px-4 py-2 bg-green-600 text-white rounded-lg text-sm font-medium hover:bg-green-700 flex items-center space-x-2">
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>
                <span>Auto-Approve 90%+</span>
              </button>
            </div>
          </div>
        </div>
        
        <!-- Stats Bar -->
        <div class="bg-white border-b border-gray-200 px-4 py-3">
          <div class="flex items-center space-x-8 text-sm">
            <div class="flex items-center space-x-2">
              <div class="w-3 h-3 bg-amber-400 rounded-full"></div>
              <span class="text-gray-600"><span class="font-semibold text-gray-900" id="pending-count">47</span> Pending</span>
            </div>
            <div class="flex items-center space-x-2">
              <div class="w-3 h-3 bg-green-500 rounded-full"></div>
              <span class="text-gray-600"><span class="font-semibold text-gray-900" id="approved-count">1,842</span> Approved Today</span>
            </div>
            <div class="flex items-center space-x-2">
              <div class="w-3 h-3 bg-red-500 rounded-full"></div>
              <span class="text-gray-600"><span class="font-semibold text-gray-900" id="rejected-count">23</span> Rejected Today</span>
            </div>
            <div class="flex items-center space-x-2 ml-auto">
              <span class="text-gray-500">Auto-approved (90%+ / 4+ sources):</span>
              <span class="font-semibold text-green-600">1,654</span>
            </div>
          </div>
        </div>
        
        <!-- Insights Table -->
        <div class="p-4">
          <div class="bg-white rounded-xl border border-gray-200 overflow-hidden">
            <table class="w-full">
              <thead class="bg-gray-50 border-b border-gray-200">
                <tr>
                  <th class="px-4 py-3 text-left text-xs font-semibold text-gray-500 uppercase">Property / Lead</th>
                  <th class="px-4 py-3 text-left text-xs font-semibold text-gray-500 uppercase">Insight Type</th>
                  <th class="px-4 py-3 text-left text-xs font-semibold text-gray-500 uppercase cursor-pointer hover:bg-gray-100 select-none" onclick="sortReliabilityByConfidence()">
                    <span class="flex items-center space-x-1">
                      <span>AI Confidence</span>
                      <svg id="confidence-sort-icon" class="w-4 h-4 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/></svg>
                    </span>
                  </th>
                  <th class="px-4 py-3 text-left text-xs font-semibold text-gray-500 uppercase">Sources</th>
                  <th class="px-4 py-3 text-left text-xs font-semibold text-gray-500 uppercase">Evidence</th>
                  <th class="px-4 py-3 text-left text-xs font-semibold text-gray-500 uppercase">Detected</th>
                  <th class="px-4 py-3 text-center text-xs font-semibold text-gray-500 uppercase">Action</th>
                </tr>
              </thead>
              <tbody id="reliability-table-body" class="divide-y divide-gray-100">
                <!-- Generated by JavaScript -->
              </tbody>
            </table>
          </div>
          
          <!-- Pagination -->
          <div class="flex items-center justify-between mt-4">
            <p class="text-sm text-gray-500">Showing 1-20 of 47 pending insights</p>
            <div class="flex items-center space-x-2">
              <button class="px-3 py-1.5 border border-gray-200 rounded-lg hover:bg-gray-50 text-sm">Previous</button>
              <button class="px-3 py-1.5 bg-primary text-white rounded-lg text-sm">1</button>
              <button class="px-3 py-1.5 border border-gray-200 rounded-lg hover:bg-gray-50 text-sm">2</button>
              <button class="px-3 py-1.5 border border-gray-200 rounded-lg hover:bg-gray-50 text-sm">3</button>
              <button class="px-3 py-1.5 border border-gray-200 rounded-lg hover:bg-gray-50 text-sm">Next</button>
            </div>
          </div>
        </div>
      </div>
      
      <!-- NEARBY LEADS PAGE -->
      <div id="page-nearby" class="page flex-1 overflow-auto hidden bg-gray-50">
        <div class="bg-white border-b border-gray-200 px-4 py-4">
          <div class="flex items-center justify-between">
            <div>
              <div class="flex items-center space-x-2">
                <h1 class="text-2xl font-bold text-gray-900">Nearby Leads</h1>
                <span class="px-2 py-0.5 bg-gradient-to-r from-amber-100 to-orange-100 text-amber-700 text-xs font-medium rounded flex items-center space-x-1">
                  <svg class="w-3 h-3" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z" clip-rule="evenodd"/></svg>
                  <span>Hidden</span>
                </span>
              </div>
              <p class="text-sm text-gray-500 mt-0.5">High-potential leads in suburbs near your coverage area</p>
            </div>
            <button onclick="showNearbyUpgradeModal()" class="px-4 py-2 bg-gradient-to-r from-amber-500 to-orange-500 text-white rounded-lg text-sm font-medium hover:from-amber-600 hover:to-orange-600 flex items-center space-x-2 shadow-lg shadow-amber-500/25">
              <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"/></svg>
              <span>Upgrade to Unlock</span>
            </button>
          </div>
        </div>
        
        <!-- Your Subscribed Suburbs Info -->
        <div class="bg-gradient-to-r from-sky-50 to-blue-50 border-b border-sky-100 px-4 py-3">
          <div class="flex items-center justify-between">
            <div class="flex items-center space-x-3">
              <div class="w-8 h-8 bg-sky-100 rounded-lg flex items-center justify-center">
                <svg class="w-5 h-5 text-sky-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>
              </div>
              <div>
                <p class="text-sm font-medium text-gray-900">Your subscribed suburbs:</p>
                <p class="text-xs text-gray-600">Bondi, Coogee, Bronte, Tamarama</p>
              </div>
            </div>
            <div class="text-right">
              <p class="text-xs text-gray-500">Current plan</p>
              <p class="text-sm font-semibold text-sky-600">Eastern Beaches Package</p>
            </div>
          </div>
        </div>
        
        <!-- Nearby Suburbs Stats -->
        <div class="bg-white border-b border-gray-200 px-4 py-3">
          <div class="flex items-center space-x-6 text-sm">
            <div class="flex items-center space-x-2">
              <div class="w-3 h-3 bg-amber-400 rounded-full animate-pulse"></div>
              <span class="text-gray-600"><span class="font-semibold text-gray-900" id="nearby-total">89</span> Hidden Leads Nearby</span>
            </div>
            <div class="flex items-center space-x-2">
              <div class="w-3 h-3 bg-red-500 rounded-full"></div>
              <span class="text-gray-600"><span class="font-semibold text-gray-900">12</span> High Priority</span>
            </div>
            <div class="flex items-center space-x-2">
              <div class="w-3 h-3 bg-green-500 rounded-full"></div>
              <span class="text-gray-600"><span class="font-semibold text-gray-900">$4.2M</span> Est. Commission Value</span>
            </div>
            <div class="ml-auto text-xs text-gray-400">Updated 2 hours ago</div>
          </div>
        </div>
        
        <!-- Nearby Suburbs Grid -->
        <div class="p-4">
          <div class="grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-4" id="nearby-suburbs-grid">
            <!-- Generated by JavaScript -->
          </div>
          
          <!-- Upgrade CTA -->
          <div class="mt-6 bg-gradient-to-r from-amber-500 to-orange-500 rounded-2xl p-6 text-white">
            <div class="flex items-center justify-between">
              <div>
                <h3 class="text-xl font-bold">Unlock All Nearby Suburbs</h3>
                <p class="text-amber-100 mt-1">Get access to 89 high-potential leads just outside your current coverage</p>
                <div class="flex items-center space-x-4 mt-3">
                  <div class="flex items-center space-x-2">
                    <svg class="w-5 h-5 text-amber-200" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/></svg>
                    <span class="text-sm">Instant access</span>
                  </div>
                  <div class="flex items-center space-x-2">
                    <svg class="w-5 h-5 text-amber-200" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/></svg>
                    <span class="text-sm">Full contact details</span>
                  </div>
                  <div class="flex items-center space-x-2">
                    <svg class="w-5 h-5 text-amber-200" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/></svg>
                    <span class="text-sm">AI insights included</span>
                  </div>
                </div>
              </div>
              <div class="text-right">
                <p class="text-amber-200 text-sm">Starting from</p>
                <p class="text-3xl font-bold">$49<span class="text-lg font-normal">/suburb/mo</span></p>
                <button onclick="showNearbyUpgradeModal()" class="mt-2 px-6 py-2 bg-white text-amber-600 rounded-lg text-sm font-semibold hover:bg-amber-50 transition-colors">
                  View Packages
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
      
      <!-- EXPIRING LISTINGS PAGE -->
      <div id="page-expired" class="page flex-1 overflow-auto hidden bg-gray-100">
        <div class="bg-white border-b border-gray-200 px-4 py-4">
          <div class="flex items-center justify-between">
            <div>
              <h1 class="text-2xl font-bold text-gray-900">Expiring Listings</h1>
              <p class="text-gray-600 text-sm mt-1">Properties with listings about to expire - prime opportunity to connect</p>
            </div>
            <div class="flex items-center space-x-3">
              <button onclick="loadExpiringListings(1)" class="inline-flex items-center px-4 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 bg-white hover:bg-gray-50">
                <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"/></svg>
                Refresh
              </button>
            </div>
          </div>
        </div>
        
        <!-- Expiring Listings Stats -->
        <div class="bg-white border-b border-gray-200 px-4 py-3">
          <div class="flex items-center space-x-6 text-sm">
            <div class="flex items-center space-x-2">
              <div class="w-3 h-3 bg-orange-500 rounded-full animate-pulse"></div>
              <span class="text-gray-600"><span class="font-semibold text-gray-900" id="expired-total">0</span> Expiring Listings</span>
            </div>
            <div class="flex items-center space-x-2">
              <div class="w-3 h-3 bg-red-500 rounded-full"></div>
              <span class="text-gray-600"><span class="font-semibold text-gray-900" id="expired-urgent">0</span> Expiring This Week</span>
            </div>
            <div class="flex items-center space-x-2">
              <div class="w-3 h-3 bg-amber-400 rounded-full"></div>
              <span class="text-gray-600"><span class="font-semibold text-gray-900" id="expired-soon">0</span> Expiring This Month</span>
            </div>
          </div>
        </div>
        
        <!-- Expiring Listings Content -->
        <div class="p-4">
          <div id="expired-list" class="space-y-3">
            <!-- Loading state -->
            <div id="expired-loading" class="flex flex-col items-center justify-center py-16">
              <div class="animate-spin rounded-full h-12 w-12 border-4 border-orange-500 border-t-transparent mb-4"></div>
              <p class="text-gray-500">Loading expiring listings...</p>
            </div>
          </div>
          
          <!-- Empty State -->
          <div id="expired-empty" class="hidden flex-col items-center justify-center py-16">
            <div class="w-20 h-20 bg-orange-100 rounded-full flex items-center justify-center mb-4">
              <svg class="w-10 h-10 text-orange-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>
            </div>
            <h3 class="text-lg font-semibold text-gray-900 mb-2">No Expiring Listings</h3>
            <p class="text-gray-500 text-center max-w-md">There are currently no listings about to expire in your areas. Check back later for new opportunities.</p>
          </div>
          
          <!-- Pagination -->
          <div id="expired-pagination" class="hidden mt-6 flex items-center justify-between">
            <button onclick="loadExpiringListings(expiringData.page - 1)" id="expired-prev" class="px-4 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed">
              Previous
            </button>
            <span class="text-sm text-gray-600">
              Page <span id="expired-current-page">1</span> of <span id="expired-total-pages">1</span>
            </span>
            <button onclick="loadExpiringListings(expiringData.page + 1)" id="expired-next" class="px-4 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed">
              Next
            </button>
          </div>
        </div>
      </div>
      
      <!-- SMS FLOWS PAGE -->
      <div id="page-smsflows" class="page flex-1 overflow-auto hidden bg-gray-100">
        <div class="bg-white border-b border-gray-200 px-4 py-4">
          <div class="flex items-center justify-between">
            <div>
              <h1 class="text-2xl font-bold text-gray-900">SMS Flow Builder</h1>
              <p class="text-sm text-gray-500 mt-0.5">Create automated SMS sequences to convert leads to valuation requests</p>
            </div>
            <div class="flex items-center space-x-3">
              <button onclick="previewSMSFlow()" class="px-4 py-2 border border-gray-200 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-50 flex items-center space-x-2">
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"/></svg>
                <span>Preview</span>
              </button>
              <button onclick="saveSMSFlow()" class="px-4 py-2 bg-primary text-white rounded-lg text-sm font-medium hover:bg-red-700 flex items-center space-x-2">
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/></svg>
                <span>Save Flow</span>
              </button>
            </div>
          </div>
        </div>
        
        <div class="flex h-[calc(100vh-140px)]">
          <!-- SMS Templates Library -->
          <div class="w-80 bg-white border-r border-gray-200 flex flex-col">
            <div class="p-4 border-b border-gray-200">
              <h2 class="font-semibold text-gray-900">SMS Templates</h2>
              <p class="text-xs text-gray-500 mt-1">Drag templates to build your flow</p>
            </div>
            <div class="flex-1 overflow-auto p-4 space-y-3" id="sms-templates-library">
              <!-- Templates will be rendered by JavaScript -->
            </div>
          </div>
          
          <!-- Flow Builder Canvas -->
          <div class="flex-1 p-6 overflow-auto">
            <div class="max-w-xl mx-auto">
              <!-- Flow Start -->
              <div class="flex items-center justify-center mb-4">
                <div class="px-4 py-2 bg-green-100 text-green-700 rounded-full text-sm font-medium flex items-center space-x-2">
                  <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-8.707l-3-3a1 1 0 00-1.414 1.414L10.586 9H7a1 1 0 100 2h3.586l-1.293 1.293a1 1 0 101.414 1.414l3-3a1 1 0 000-1.414z" clip-rule="evenodd"/></svg>
                  <span>Lead Enters Info</span>
                </div>
              </div>
              
              <!-- Connector -->
              <div class="flex justify-center">
                <div class="w-0.5 h-8 bg-gray-300"></div>
              </div>
              
              <!-- Drop Zone for Flow -->
              <div id="sms-flow-canvas" class="min-h-[100px] p-4 border-2 border-dashed border-gray-300 rounded-xl bg-gray-50/50" ondragover="allowDrop(event)" ondrop="dropSMSTemplate(event)">
                <div id="sms-flow-placeholder" class="text-center py-12 text-gray-400">
                  <svg class="w-12 h-12 mx-auto mb-3 text-gray-300" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"/></svg>
                  <p class="font-medium">Drag SMS templates here</p>
                  <p class="text-sm mt-1">Build your conversion flow step by step</p>
                </div>
              </div>
              
              <!-- Connector -->
              <div class="flex justify-center mt-4">
                <div class="w-0.5 h-8 bg-gray-300"></div>
              </div>
              
              <!-- Flow End -->
              <div class="flex items-center justify-center">
                <div class="px-4 py-2 bg-primary/10 text-primary rounded-full text-sm font-medium flex items-center space-x-2">
                  <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M6.267 3.455a3.066 3.066 0 001.745-.723 3.066 3.066 0 013.976 0 3.066 3.066 0 001.745.723 3.066 3.066 0 012.812 2.812c.051.643.304 1.254.723 1.745a3.066 3.066 0 010 3.976 3.066 3.066 0 00-.723 1.745 3.066 3.066 0 01-2.812 2.812 3.066 3.066 0 00-1.745.723 3.066 3.066 0 01-3.976 0 3.066 3.066 0 00-1.745-.723 3.066 3.066 0 01-2.812-2.812 3.066 3.066 0 00-.723-1.745 3.066 3.066 0 010-3.976 3.066 3.066 0 00.723-1.745 3.066 3.066 0 012.812-2.812zm7.44 5.252a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/></svg>
                  <span>Valuation Booked! ðŸŽ‰</span>
                </div>
              </div>
            </div>
          </div>
          
          <!-- Flow Settings -->
          <div class="w-72 bg-white border-l border-gray-200 flex flex-col">
            <div class="p-4 border-b border-gray-200">
              <h2 class="font-semibold text-gray-900">Flow Settings</h2>
            </div>
            <div class="flex-1 overflow-auto p-4 space-y-4">
              <div>
                <label class="block text-sm font-medium text-gray-700 mb-1">Flow Name</label>
                <input type="text" value="New Lead Valuation Flow" class="w-full px-3 py-2 border border-gray-200 rounded-lg text-sm focus:outline-none focus:border-primary">
              </div>
              <div>
                <label class="block text-sm font-medium text-gray-700 mb-1">Trigger</label>
                <select class="w-full px-3 py-2 border border-gray-200 rounded-lg text-sm focus:outline-none focus:border-primary">
                  <option>Lead submits info</option>
                  <option>Lead requests valuation</option>
                  <option>Lead views property</option>
                </select>
              </div>
              <div>
                <label class="block text-sm font-medium text-gray-700 mb-1">Default Delay Between Messages</label>
                <select class="w-full px-3 py-2 border border-gray-200 rounded-lg text-sm focus:outline-none focus:border-primary">
                  <option>Immediate</option>
                  <option>30 minutes</option>
                  <option selected>1 hour</option>
                  <option>2 hours</option>
                  <option>1 day</option>
                  <option>2 days</option>
                </select>
              </div>
              
              <div class="pt-4 border-t border-gray-200">
                <h3 class="text-sm font-medium text-gray-700 mb-2">Merge Fields</h3>
                <div class="flex flex-wrap gap-2">
                  <span class="px-2 py-1 bg-blue-50 text-blue-600 text-xs rounded cursor-pointer hover:bg-blue-100" onclick="copyMergeField('{{first_name}}')">{{first_name}}</span>
                  <span class="px-2 py-1 bg-blue-50 text-blue-600 text-xs rounded cursor-pointer hover:bg-blue-100" onclick="copyMergeField('{{property_address}}')">{{property_address}}</span>
                  <span class="px-2 py-1 bg-blue-50 text-blue-600 text-xs rounded cursor-pointer hover:bg-blue-100" onclick="copyMergeField('{{suburb}}')">{{suburb}}</span>
                  <span class="px-2 py-1 bg-blue-50 text-blue-600 text-xs rounded cursor-pointer hover:bg-blue-100" onclick="copyMergeField('{{agent_name}}')">{{agent_name}}</span>
                  <span class="px-2 py-1 bg-blue-50 text-blue-600 text-xs rounded cursor-pointer hover:bg-blue-100" onclick="copyMergeField('{{booking_link}}')">{{booking_link}}</span>
                </div>
                <p class="text-xs text-gray-400 mt-2">Click to copy</p>
              </div>
              
              <div class="pt-4 border-t border-gray-200">
                <h3 class="text-sm font-medium text-gray-700 mb-2">Flow Stats</h3>
                <div class="space-y-2 text-sm">
                  <div class="flex justify-between">
                    <span class="text-gray-500">Messages in flow</span>
                    <span class="font-semibold text-gray-900" id="flow-message-count">0</span>
                  </div>
                  <div class="flex justify-between">
                    <span class="text-gray-500">Est. conversion</span>
                    <span class="font-semibold text-green-600">~24%</span>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      
      <!-- LAUNCHPAD PAGE -->
      <div id="page-launchpad" class="page hidden flex-1 overflow-auto bg-gradient-to-b from-slate-50 to-white">
        
        <!-- Hero Section -->
        <div class="relative overflow-hidden">
          <!-- Subtle background pattern -->
          <div class="absolute inset-0 bg-[radial-gradient(ellipse_at_top,_var(--tw-gradient-stops))] from-slate-100 via-transparent to-transparent opacity-60"></div>
          
          <div class="relative max-w-5xl mx-auto px-8 pt-20 pb-16">
            <!-- Eyebrow -->
            <div class="flex items-center space-x-2 mb-6">
              <div class="w-8 h-px bg-primary"></div>
              <span class="text-xs font-semibold text-primary uppercase tracking-widest">Private Program</span>
            </div>
            
            <!-- Main headline -->
            <h1 class="text-5xl md:text-6xl font-bold text-gray-900 leading-[1.1] tracking-tight max-w-3xl">
              Your agency.<br>
              <span class="text-transparent bg-clip-text bg-gradient-to-r from-gray-900 via-gray-700 to-gray-500">Built and run for you.</span>
            </h1>
            
            <!-- Subheadline -->
            <p class="mt-6 text-xl text-gray-600 max-w-2xl leading-relaxed">
              We design your brand, build your website, create your marketing, run your ads, and deliver qualified leads. You focus on one thing: listing and selling property.
            </p>
            
            <!-- CTA -->
            <div class="mt-10 flex items-center space-x-6">
              <button onclick="scrollToLaunchpadSection('launchpad-how-it-works')" class="px-8 py-4 bg-gray-900 text-white font-semibold rounded-lg hover:bg-gray-800 transition-colors shadow-lg shadow-gray-900/20">
                See How It Works
              </button>
              <button onclick="scrollToLaunchpadSection('launchpad-apply')" class="px-8 py-4 text-gray-700 font-semibold hover:text-gray-900 transition-colors flex items-center space-x-2">
                <span>Apply Now</span>
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"/></svg>
              </button>
            </div>
            
            <!-- Trust signals -->
            <div class="mt-16 flex items-center space-x-8 text-sm text-gray-500">
              <div class="flex items-center space-x-2">
                <svg class="w-4 h-4 text-green-500" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/></svg>
                <span>12 agencies launched</span>
              </div>
              <div class="flex items-center space-x-2">
                <svg class="w-4 h-4 text-green-500" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/></svg>
                <span>$47M in listings generated</span>
              </div>
              <div class="flex items-center space-x-2">
                <svg class="w-4 h-4 text-green-500" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/></svg>
                <span>Avg. 6.2 listings in first 90 days</span>
              </div>
            </div>
          </div>
        </div>
        
        <!-- What We Build Section -->
        <div id="launchpad-how-it-works" class="max-w-5xl mx-auto px-8 py-24">
          <div class="text-center mb-16">
            <h2 class="text-3xl font-bold text-gray-900 mb-4">Everything you need. Nothing you don't.</h2>
            <p class="text-lg text-gray-600 max-w-2xl mx-auto">We handle the infrastructure so you can focus on relationships and revenue.</p>
          </div>
          
          <!-- Build items grid -->
          <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <!-- Brand Identity -->
            <div class="group bg-white rounded-2xl p-8 border border-gray-100 hover:border-gray-200 hover:shadow-lg transition-all duration-300">
              <div class="w-12 h-12 bg-slate-100 rounded-xl flex items-center justify-center mb-6 group-hover:bg-slate-200 transition-colors">
                <svg class="w-6 h-6 text-slate-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01"/></svg>
              </div>
              <h3 class="text-xl font-semibold text-gray-900 mb-2">Brand Identity</h3>
              <p class="text-gray-600 leading-relaxed">Your agency name, positioning, logo system, colour palette, and brand guidelines. Professionally designed to stand out in your market.</p>
            </div>
            
            <!-- Website -->
            <div class="group bg-white rounded-2xl p-8 border border-gray-100 hover:border-gray-200 hover:shadow-lg transition-all duration-300">
              <div class="w-12 h-12 bg-slate-100 rounded-xl flex items-center justify-center mb-6 group-hover:bg-slate-200 transition-colors">
                <svg class="w-6 h-6 text-slate-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9c1.657 0 3-4.03 3-9s-1.343-9-3-9m0 18c-1.657 0-3-4.03-3-9s1.343-9 3-9m-9 9a9 9 0 019-9"/></svg>
              </div>
              <h3 class="text-xl font-semibold text-gray-900 mb-2">High-Converting Website</h3>
              <p class="text-gray-600 leading-relaxed">A fast, mobile-optimised website built to convert visitors into appraisal requests. SEO-ready and designed to build credibility.</p>
            </div>
            
            <!-- Funnels -->
            <div class="group bg-white rounded-2xl p-8 border border-gray-100 hover:border-gray-200 hover:shadow-lg transition-all duration-300">
              <div class="w-12 h-12 bg-slate-100 rounded-xl flex items-center justify-center mb-6 group-hover:bg-slate-200 transition-colors">
                <svg class="w-6 h-6 text-slate-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"/></svg>
              </div>
              <h3 class="text-xl font-semibold text-gray-900 mb-2">Listing & Appraisal Funnels</h3>
              <p class="text-gray-600 leading-relaxed">Dedicated landing pages for property valuations, seller guides, and market reports. Engineered to capture high-intent leads.</p>
            </div>
            
            <!-- Marketing Creative -->
            <div class="group bg-white rounded-2xl p-8 border border-gray-100 hover:border-gray-200 hover:shadow-lg transition-all duration-300">
              <div class="w-12 h-12 bg-slate-100 rounded-xl flex items-center justify-center mb-6 group-hover:bg-slate-200 transition-colors">
                <svg class="w-6 h-6 text-slate-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"/></svg>
              </div>
              <h3 class="text-xl font-semibold text-gray-900 mb-2">Marketing Creative</h3>
              <p class="text-gray-600 leading-relaxed">Social media templates, ad creative, email sequences, and property marketing collateral. All on-brand and ready to deploy.</p>
            </div>
            
            <!-- Paid Advertising -->
            <div class="group bg-white rounded-2xl p-8 border border-gray-100 hover:border-gray-200 hover:shadow-lg transition-all duration-300">
              <div class="w-12 h-12 bg-slate-100 rounded-xl flex items-center justify-center mb-6 group-hover:bg-slate-200 transition-colors">
                <svg class="w-6 h-6 text-slate-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"/></svg>
              </div>
              <h3 class="text-xl font-semibold text-gray-900 mb-2">Paid Ads & Lead Generation</h3>
              <p class="text-gray-600 leading-relaxed">We run and optimise Facebook, Instagram, and Google campaigns in your target suburbs. You don't touch the ads manager.</p>
            </div>
            
            <!-- Lead Delivery -->
            <div class="group bg-white rounded-2xl p-8 border border-gray-100 hover:border-gray-200 hover:shadow-lg transition-all duration-300">
              <div class="w-12 h-12 bg-slate-100 rounded-xl flex items-center justify-center mb-6 group-hover:bg-slate-200 transition-colors">
                <svg class="w-6 h-6 text-slate-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"/></svg>
              </div>
              <h3 class="text-xl font-semibold text-gray-900 mb-2">Qualified Lead Delivery</h3>
              <p class="text-gray-600 leading-relaxed">Leads are qualified, enriched with property data, and delivered directly to your phone. Exclusive to youâ€”never shared.</p>
            </div>
          </div>
        </div>
        
        <!-- Investment Model Section -->
        <div class="bg-slate-50 py-24">
          <div class="max-w-5xl mx-auto px-8">
            <div class="text-center mb-16">
              <h2 class="text-3xl font-bold text-gray-900 mb-4">The investment model</h2>
              <p class="text-lg text-gray-600 max-w-2xl mx-auto">A one-time setup investment. Designed to pay for itself through listings.</p>
            </div>
            
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-12 items-start">
              <!-- Investment breakdown -->
              <div class="bg-white rounded-2xl p-8 border border-gray-200 shadow-sm">
                <div class="flex items-center justify-between mb-8">
                  <h3 class="text-lg font-semibold text-gray-900">Setup Investment</h3>
                  <span class="text-3xl font-bold text-gray-900">$50,000</span>
                </div>
                
                <div class="space-y-4">
                  <div class="flex items-start space-x-3">
                    <svg class="w-5 h-5 text-green-500 mt-0.5 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/></svg>
                    <span class="text-gray-700">Complete brand identity & positioning</span>
                  </div>
                  <div class="flex items-start space-x-3">
                    <svg class="w-5 h-5 text-green-500 mt-0.5 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/></svg>
                    <span class="text-gray-700">Custom website & lead funnels</span>
                  </div>
                  <div class="flex items-start space-x-3">
                    <svg class="w-5 h-5 text-green-500 mt-0.5 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/></svg>
                    <span class="text-gray-700">Full marketing creative suite</span>
                  </div>
                  <div class="flex items-start space-x-3">
                    <svg class="w-5 h-5 text-green-500 mt-0.5 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/></svg>
                    <span class="text-gray-700">12 months managed ad campaigns</span>
                  </div>
                  <div class="flex items-start space-x-3">
                    <svg class="w-5 h-5 text-green-500 mt-0.5 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/></svg>
                    <span class="text-gray-700">Minimum 50 qualified leads delivered</span>
                  </div>
                  <div class="flex items-start space-x-3">
                    <svg class="w-5 h-5 text-green-500 mt-0.5 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/></svg>
                    <span class="text-gray-700">Ongoing optimisation & support</span>
                  </div>
                </div>
                
                <div class="mt-8 pt-6 border-t border-gray-100">
                  <p class="text-sm text-gray-500">Ad spend is separate and managed by us. Typical monthly spend: $2,000â€“$5,000 depending on market.</p>
                </div>
              </div>
              
              <!-- Economics calculator -->
              <div class="space-y-6">
                <div class="bg-white rounded-2xl p-8 border border-gray-200 shadow-sm">
                  <h3 class="text-lg font-semibold text-gray-900 mb-6">The simple economics</h3>
                  
                  <div class="space-y-5">
                    <div class="flex items-center justify-between py-3 border-b border-gray-100">
                      <span class="text-gray-600">Avg. sale price in your area</span>
                      <span class="font-semibold text-gray-900">$1,200,000</span>
                    </div>
                    <div class="flex items-center justify-between py-3 border-b border-gray-100">
                      <span class="text-gray-600">Your commission (2%)</span>
                      <span class="font-semibold text-gray-900">$24,000</span>
                    </div>
                    <div class="flex items-center justify-between py-3 border-b border-gray-100">
                      <span class="text-gray-600">Listings to break even</span>
                      <span class="font-semibold text-primary">2â€“3 sales</span>
                    </div>
                    <div class="flex items-center justify-between py-3">
                      <span class="text-gray-600">Typical time to break even</span>
                      <span class="font-semibold text-gray-900">60â€“90 days</span>
                    </div>
                  </div>
                </div>
                
                <div class="bg-gradient-to-br from-slate-800 to-slate-900 rounded-2xl p-8 text-white">
                  <p class="text-slate-300 text-sm mb-2">After break-even</p>
                  <p class="text-2xl font-bold mb-4">Every additional listing is pure profit.</p>
                  <p class="text-slate-400 text-sm leading-relaxed">Most Launchpad agents generate 6â€“12 listings in their first year. At an average commission of $24,000, that's $144,000â€“$288,000 in gross commission income.</p>
                </div>
              </div>
            </div>
          </div>
        </div>
        
        <!-- Not For Everyone Section -->
        <div class="max-w-5xl mx-auto px-8 py-24">
          <div class="grid grid-cols-1 lg:grid-cols-2 gap-16 items-center">
            <div>
              <h2 class="text-3xl font-bold text-gray-900 mb-6">This is not for everyone.</h2>
              <p class="text-lg text-gray-600 mb-8 leading-relaxed">
                We're selective about who we work with. The Launchpad program works best for agents who are serious about building something realâ€”not those looking for a quick fix.
              </p>
              
              <div class="space-y-4">
                <div class="flex items-start space-x-4">
                  <div class="w-6 h-6 bg-red-100 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5">
                    <svg class="w-3 h-3 text-red-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M6 18L18 6M6 6l12 12"/></svg>
                  </div>
                  <div>
                    <p class="font-medium text-gray-900">Not for hobby agents</p>
                    <p class="text-sm text-gray-500">This is for people building a career, not a side hustle.</p>
                  </div>
                </div>
                
                <div class="flex items-start space-x-4">
                  <div class="w-6 h-6 bg-red-100 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5">
                    <svg class="w-3 h-3 text-red-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M6 18L18 6M6 6l12 12"/></svg>
                  </div>
                  <div>
                    <p class="font-medium text-gray-900">Not for people who don't answer their phone</p>
                    <p class="text-sm text-gray-500">Speed to lead matters. If you're not responsive, this won't work.</p>
                  </div>
                </div>
                
                <div class="flex items-start space-x-4">
                  <div class="w-6 h-6 bg-red-100 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5">
                    <svg class="w-3 h-3 text-red-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M6 18L18 6M6 6l12 12"/></svg>
                  </div>
                  <div>
                    <p class="font-medium text-gray-900">Not for those unwilling to invest</p>
                    <p class="text-sm text-gray-500">If you're not ready to bet on yourself, we're not the right partner.</p>
                  </div>
                </div>
              </div>
            </div>
            
            <div class="bg-gradient-to-br from-green-50 to-emerald-50 rounded-2xl p-8 border border-green-100">
              <h3 class="text-xl font-bold text-gray-900 mb-6">This is for you if...</h3>
              
              <div class="space-y-4">
                <div class="flex items-start space-x-4">
                  <svg class="w-5 h-5 text-green-500 mt-0.5 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/></svg>
                  <p class="text-gray-700">You want to own your lead flow, not rent it</p>
                </div>
                <div class="flex items-start space-x-4">
                  <svg class="w-5 h-5 text-green-500 mt-0.5 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/></svg>
                  <p class="text-gray-700">You're ready to be known in your market</p>
                </div>
                <div class="flex items-start space-x-4">
                  <svg class="w-5 h-5 text-green-500 mt-0.5 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/></svg>
                  <p class="text-gray-700">You'd rather sell than build funnels</p>
                </div>
                <div class="flex items-start space-x-4">
                  <svg class="w-5 h-5 text-green-500 mt-0.5 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/></svg>
                  <p class="text-gray-700">You want a system that compounds over time</p>
                </div>
                <div class="flex items-start space-x-4">
                  <svg class="w-5 h-5 text-green-500 mt-0.5 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/></svg>
                  <p class="text-gray-700">You're ready to invest in your future self</p>
                </div>
              </div>
            </div>
          </div>
        </div>
        
        <!-- Go Independent Section -->
        <div class="bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 py-24">
          <div class="max-w-5xl mx-auto px-8">
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-12 items-center">
              <div>
                <div class="flex items-center space-x-2 mb-4">
                  <div class="w-8 h-px bg-amber-400"></div>
                  <span class="text-xs font-semibold text-amber-400 uppercase tracking-widest">Premium Upgrade</span>
                </div>
                
                <h2 class="text-3xl font-bold text-white mb-6">Ready to go fully independent?</h2>
                <p class="text-lg text-slate-300 mb-8 leading-relaxed">
                  Some agents want to graduate beyond the Launchpad and own everything outright. We offer a premium pathway to full independence.
                </p>
                
                <div class="space-y-4 mb-8">
                  <div class="flex items-start space-x-3">
                    <svg class="w-5 h-5 text-amber-400 mt-0.5 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/></svg>
                    <span class="text-slate-300">Full ownership of your domain and website</span>
                  </div>
                  <div class="flex items-start space-x-3">
                    <svg class="w-5 h-5 text-amber-400 mt-0.5 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/></svg>
                    <span class="text-slate-300">All brand assets, files, and guidelines transferred</span>
                  </div>
                  <div class="flex items-start space-x-3">
                    <svg class="w-5 h-5 text-amber-400 mt-0.5 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/></svg>
                    <span class="text-slate-300">Complete ad account and pixel ownership</span>
                  </div>
                  <div class="flex items-start space-x-3">
                    <svg class="w-5 h-5 text-amber-400 mt-0.5 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/></svg>
                    <span class="text-slate-300">CRM, funnels, and lead data fully exported</span>
                  </div>
                  <div class="flex items-start space-x-3">
                    <svg class="w-5 h-5 text-amber-400 mt-0.5 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/></svg>
                    <span class="text-slate-300">Fully separated from Get Listings infrastructure</span>
                  </div>
                </div>
              </div>
              
              <div class="bg-white/5 backdrop-blur-sm rounded-2xl p-8 border border-white/10">
                <div class="text-center">
                  <p class="text-slate-400 text-sm mb-2">Independence Package</p>
                  <p class="text-4xl font-bold text-white mb-2">$25,000</p>
                  <p class="text-slate-400 text-sm mb-6">One-time. Everything is yours.</p>
                  
                  <div class="bg-white/5 rounded-xl p-4 mb-6">
                    <p class="text-sm text-slate-300 leading-relaxed">
                      Think of this as building equity. Most agents spend this much on marketing that disappears. Here, you're building a long-term asset.
                    </p>
                  </div>
                  
                  <p class="text-xs text-slate-500">Available to Launchpad members after 6 months</p>
                </div>
              </div>
            </div>
          </div>
        </div>
        
        <!-- Final CTA Section -->
        <div id="launchpad-apply" class="max-w-5xl mx-auto px-8 py-24">
          <div class="text-center">
            <h2 class="text-4xl font-bold text-gray-900 mb-6">Ready to build your agency?</h2>
            <p class="text-xl text-gray-600 max-w-2xl mx-auto mb-10 leading-relaxed">
              We accept a limited number of agents each quarter. Applications are reviewed manually to ensure fit.
            </p>
            
            <div class="flex flex-col sm:flex-row items-center justify-center space-y-4 sm:space-y-0 sm:space-x-4 mb-12">
              <button onclick="openLaunchpadApplication()" class="px-10 py-5 bg-gray-900 text-white font-semibold rounded-xl hover:bg-gray-800 transition-colors shadow-xl shadow-gray-900/20 text-lg">
                Apply for Launchpad
              </button>
              <button onclick="openLaunchpadCall()" class="px-10 py-5 border-2 border-gray-300 text-gray-700 font-semibold rounded-xl hover:border-gray-400 hover:bg-gray-50 transition-colors text-lg">
                Request a Private Walkthrough
              </button>
            </div>
            
            <div class="flex items-center justify-center space-x-8 text-sm text-gray-500">
              <div class="flex items-center space-x-2">
                <svg class="w-4 h-4 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"/></svg>
                <span>Limited spots per quarter</span>
              </div>
              <div class="flex items-center space-x-2">
                <svg class="w-4 h-4 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>
                <span>Manual approval required</span>
              </div>
              <div class="flex items-center space-x-2">
                <svg class="w-4 h-4 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"/></svg>
                <span>Next cohort: February 2026</span>
              </div>
            </div>
          </div>
        </div>
        
        <!-- Footer -->
        <div class="border-t border-gray-200 bg-gray-50">
          <div class="max-w-5xl mx-auto px-8 py-8">
            <div class="flex items-center justify-between">
              <div class="flex items-center space-x-3">
                <div class="w-8 h-8 bg-gray-900 rounded-lg flex items-center justify-center">
                  <svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"/>
                  </svg>
                </div>
                <span class="font-semibold text-gray-900">Get Listings Launchpad</span>
              </div>
              <p class="text-sm text-gray-500">Questions? Email <a href="mailto:launchpad@getlistings.com.au" class="text-gray-700 hover:text-gray-900 underline">launchpad@getlistings.com.au</a></p>
            </div>
          </div>
        </div>
        
      </div>
      <!-- END LAUNCHPAD PAGE -->
      
      <!-- BUYER DEMAND PAGE -->
      <div id="page-buyerdemand" class="page hidden flex-1 overflow-auto bg-gradient-to-b from-blue-50/30 to-white">
        
        <!-- Hero Section -->
        <div class="relative overflow-hidden">
          <div class="absolute inset-0 bg-[radial-gradient(ellipse_at_top_right,_var(--tw-gradient-stops))] from-blue-100/40 via-transparent to-transparent"></div>
          
          <div class="relative max-w-5xl mx-auto px-8 pt-20 pb-16">
            <!-- Eyebrow -->
            <div class="flex items-center space-x-2 mb-6">
              <div class="w-8 h-px bg-blue-600"></div>
              <span class="text-xs font-semibold text-blue-600 uppercase tracking-widest">Qualified Buyer Flow</span>
            </div>
            
            <!-- Main headline -->
            <h1 class="text-5xl md:text-6xl font-bold text-gray-900 leading-[1.1] tracking-tight max-w-3xl">
              Buyers matched to your listings.<br>
              <span class="text-transparent bg-clip-text bg-gradient-to-r from-blue-600 via-blue-500 to-cyan-500">Before the first open home.</span>
            </h1>
            
            <!-- Subheadline -->
            <p class="mt-6 text-xl text-gray-600 max-w-2xl leading-relaxed">
              We generate qualified buyer demand for your listings, projects, and land packagesâ€”with budgets confirmed and timelines known.
            </p>
            
            <!-- CTA -->
            <div class="mt-10 flex items-center space-x-6">
              <button onclick="scrollToBuyerSection('buyer-packages')" class="px-8 py-4 bg-blue-600 text-white font-semibold rounded-lg hover:bg-blue-700 transition-colors shadow-lg shadow-blue-600/20">
                View Buyer Packages
              </button>
              <button onclick="scrollToBuyerSection('buyer-request')" class="px-8 py-4 text-gray-700 font-semibold hover:text-gray-900 transition-colors flex items-center space-x-2">
                <span>Request Buyers</span>
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"/></svg>
              </button>
            </div>
            
            <!-- Trust signals -->
            <div class="mt-16 flex items-center space-x-8 text-sm text-gray-500">
              <div class="flex items-center space-x-2">
                <svg class="w-4 h-4 text-blue-500" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/></svg>
                <span>2,400+ buyers matched</span>
              </div>
              <div class="flex items-center space-x-2">
                <svg class="w-4 h-4 text-blue-500" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/></svg>
                <span>68% contact-to-inspection rate</span>
              </div>
              <div class="flex items-center space-x-2">
                <svg class="w-4 h-4 text-blue-500" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/></svg>
                <span>Avg. 12 days to qualified buyer</span>
              </div>
            </div>
          </div>
        </div>
        
        <!-- What Makes Different Section -->
        <div class="max-w-5xl mx-auto px-8 py-24">
          <div class="text-center mb-16">
            <h2 class="text-3xl font-bold text-gray-900 mb-4">This is not portal noise.</h2>
            <p class="text-lg text-gray-600 max-w-2xl mx-auto">Every buyer is pre-qualified before you receive their details. We filter the signal from the noise.</p>
          </div>
          
          <!-- Qualification points -->
          <div class="grid grid-cols-1 md:grid-cols-5 gap-6">
            <div class="bg-white rounded-2xl p-6 border border-gray-100 text-center hover:border-blue-200 hover:shadow-md transition-all">
              <div class="w-12 h-12 bg-blue-50 rounded-xl flex items-center justify-center mx-auto mb-4">
                <svg class="w-6 h-6 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>
              </div>
              <h3 class="font-semibold text-gray-900 mb-1">Intent Verified</h3>
              <p class="text-sm text-gray-500">Active buying intent confirmed</p>
            </div>
            
            <div class="bg-white rounded-2xl p-6 border border-gray-100 text-center hover:border-blue-200 hover:shadow-md transition-all">
              <div class="w-12 h-12 bg-blue-50 rounded-xl flex items-center justify-center mx-auto mb-4">
                <svg class="w-6 h-6 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>
              </div>
              <h3 class="font-semibold text-gray-900 mb-1">Budget Confirmed</h3>
              <p class="text-sm text-gray-500">Price range validated</p>
            </div>
            
            <div class="bg-white rounded-2xl p-6 border border-gray-100 text-center hover:border-blue-200 hover:shadow-md transition-all">
              <div class="w-12 h-12 bg-blue-50 rounded-xl flex items-center justify-center mx-auto mb-4">
                <svg class="w-6 h-6 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"/></svg>
              </div>
              <h3 class="font-semibold text-gray-900 mb-1">Timeframe Known</h3>
              <p class="text-sm text-gray-500">Purchase timeline captured</p>
            </div>
            
            <div class="bg-white rounded-2xl p-6 border border-gray-100 text-center hover:border-blue-200 hover:shadow-md transition-all">
              <div class="w-12 h-12 bg-blue-50 rounded-xl flex items-center justify-center mx-auto mb-4">
                <svg class="w-6 h-6 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"/></svg>
              </div>
              <h3 class="font-semibold text-gray-900 mb-1">Type Matched</h3>
              <p class="text-sm text-gray-500">Property preferences aligned</p>
            </div>
            
            <div class="bg-white rounded-2xl p-6 border border-gray-100 text-center hover:border-blue-200 hover:shadow-md transition-all">
              <div class="w-12 h-12 bg-blue-50 rounded-xl flex items-center justify-center mx-auto mb-4">
                <svg class="w-6 h-6 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"/><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"/></svg>
              </div>
              <h3 class="font-semibold text-gray-900 mb-1">Location Validated</h3>
              <p class="text-sm text-gray-500">Suburb preferences confirmed</p>
            </div>
          </div>
        </div>
        
        <!-- Use Cases Section -->
        <div class="bg-slate-50 py-24">
          <div class="max-w-5xl mx-auto px-8">
            <div class="text-center mb-16">
              <h2 class="text-3xl font-bold text-gray-900 mb-4">Buyer demand for every deal type</h2>
              <p class="text-lg text-gray-600 max-w-2xl mx-auto">Whether it's a single listing, a staged release, or land packagesâ€”we match buyers to your inventory.</p>
            </div>
            
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
              <!-- Listing-Specific -->
              <div class="bg-white rounded-2xl p-8 border border-gray-200 shadow-sm hover:shadow-lg transition-all">
                <div class="w-14 h-14 bg-gradient-to-br from-blue-500 to-blue-600 rounded-2xl flex items-center justify-center mb-6 shadow-lg shadow-blue-500/20">
                  <svg class="w-7 h-7 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"/></svg>
                </div>
                <h3 class="text-xl font-bold text-gray-900 mb-3">Listing-Specific Buyers</h3>
                <p class="text-gray-600 mb-6 leading-relaxed">Buyers sourced specifically for a single property. Used to support a live listing, accelerate the sale, or defend your price.</p>
                <ul class="space-y-2 text-sm text-gray-500">
                  <li class="flex items-center space-x-2">
                    <svg class="w-4 h-4 text-blue-500" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/></svg>
                    <span>Increase buyer competition</span>
                  </li>
                  <li class="flex items-center space-x-2">
                    <svg class="w-4 h-4 text-blue-500" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/></svg>
                    <span>Support hard-to-sell properties</span>
                  </li>
                  <li class="flex items-center space-x-2">
                    <svg class="w-4 h-4 text-blue-500" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/></svg>
                    <span>Reduce days on market</span>
                  </li>
                </ul>
              </div>
              
              <!-- Project / Off-the-Plan -->
              <div class="bg-white rounded-2xl p-8 border border-gray-200 shadow-sm hover:shadow-lg transition-all">
                <div class="w-14 h-14 bg-gradient-to-br from-violet-500 to-purple-600 rounded-2xl flex items-center justify-center mb-6 shadow-lg shadow-violet-500/20">
                  <svg class="w-7 h-7 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"/></svg>
                </div>
                <h3 class="text-xl font-bold text-gray-900 mb-3">Project & Off-the-Plan</h3>
                <p class="text-gray-600 mb-6 leading-relaxed">Buyers matched to apartments, townhouses, or house & land packages. Ideal for staged releases and pre-construction sales.</p>
                <ul class="space-y-2 text-sm text-gray-500">
                  <li class="flex items-center space-x-2">
                    <svg class="w-4 h-4 text-violet-500" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/></svg>
                    <span>Fill early release stages</span>
                  </li>
                  <li class="flex items-center space-x-2">
                    <svg class="w-4 h-4 text-violet-500" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/></svg>
                    <span>Investor & owner-occupier mix</span>
                  </li>
                  <li class="flex items-center space-x-2">
                    <svg class="w-4 h-4 text-violet-500" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/></svg>
                    <span>Prove demand to developers</span>
                  </li>
                </ul>
              </div>
              
              <!-- Land & Development -->
              <div class="bg-white rounded-2xl p-8 border border-gray-200 shadow-sm hover:shadow-lg transition-all">
                <div class="w-14 h-14 bg-gradient-to-br from-emerald-500 to-green-600 rounded-2xl flex items-center justify-center mb-6 shadow-lg shadow-emerald-500/20">
                  <svg class="w-7 h-7 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"/></svg>
                </div>
                <h3 class="text-xl font-bold text-gray-900 mb-3">Land & Development</h3>
                <p class="text-gray-600 mb-6 leading-relaxed">Investors or owner-occupiers matched to land opportunities. Deep qualification with budget, timeline, and build intent.</p>
                <ul class="space-y-2 text-sm text-gray-500">
                  <li class="flex items-center space-x-2">
                    <svg class="w-4 h-4 text-emerald-500" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/></svg>
                    <span>Long-form qualification</span>
                  </li>
                  <li class="flex items-center space-x-2">
                    <svg class="w-4 h-4 text-emerald-500" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/></svg>
                    <span>Build timeline captured</span>
                  </li>
                  <li class="flex items-center space-x-2">
                    <svg class="w-4 h-4 text-emerald-500" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/></svg>
                    <span>Finance pre-approval noted</span>
                  </li>
                </ul>
              </div>
            </div>
          </div>
        </div>
        
        <!-- Packages & Pricing Section -->
        <div id="buyer-packages" class="max-w-5xl mx-auto px-8 py-24">
          <div class="text-center mb-16">
            <h2 class="text-3xl font-bold text-gray-900 mb-4">Transparent pricing. Quality over volume.</h2>
            <p class="text-lg text-gray-600 max-w-2xl mx-auto">Choose the package that matches your deal. Every buyer is pre-qualified before delivery.</p>
          </div>
          
          <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
            <!-- Starter Package -->
            <div class="bg-white rounded-2xl border border-gray-200 overflow-hidden hover:border-blue-300 hover:shadow-xl transition-all">
              <div class="p-8">
                <div class="flex items-center justify-between mb-4">
                  <h3 class="text-lg font-bold text-gray-900">Starter</h3>
                  <span class="text-xs font-medium text-gray-500 bg-gray-100 px-2 py-1 rounded">Single Listing</span>
                </div>
                <div class="mb-6">
                  <span class="text-4xl font-bold text-gray-900">$500</span>
                  <span class="text-gray-500 ml-1">one-time</span>
                </div>
                <p class="text-gray-600 text-sm mb-6 leading-relaxed">Qualified buyers for a specific listing. Ideal for supporting one sale.</p>
                
                <ul class="space-y-3 mb-8">
                  <li class="flex items-start space-x-3 text-sm">
                    <svg class="w-5 h-5 text-blue-500 mt-0.5 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/></svg>
                    <span class="text-gray-700">5â€“8 qualified buyers</span>
                  </li>
                  <li class="flex items-start space-x-3 text-sm">
                    <svg class="w-5 h-5 text-blue-500 mt-0.5 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/></svg>
                    <span class="text-gray-700">Basic qualification</span>
                  </li>
                  <li class="flex items-start space-x-3 text-sm">
                    <svg class="w-5 h-5 text-blue-500 mt-0.5 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/></svg>
                    <span class="text-gray-700">Budget range captured</span>
                  </li>
                  <li class="flex items-start space-x-3 text-sm">
                    <svg class="w-5 h-5 text-blue-500 mt-0.5 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/></svg>
                    <span class="text-gray-700">7â€“14 day delivery</span>
                  </li>
                </ul>
                
                <button onclick="openBuyerRequest('starter')" class="w-full py-3 border-2 border-gray-200 text-gray-700 font-semibold rounded-xl hover:border-blue-500 hover:text-blue-600 transition-colors">
                  Request Buyers
                </button>
              </div>
            </div>
            
            <!-- Growth Package -->
            <div class="bg-white rounded-2xl border-2 border-blue-500 overflow-hidden shadow-xl relative">
              <div class="absolute top-0 left-0 right-0 bg-blue-500 text-white text-xs font-bold text-center py-1.5 uppercase tracking-wide">Most Popular</div>
              <div class="p-8 pt-12">
                <div class="flex items-center justify-between mb-4">
                  <h3 class="text-lg font-bold text-gray-900">Growth</h3>
                  <span class="text-xs font-medium text-blue-600 bg-blue-50 px-2 py-1 rounded">Premium Listings</span>
                </div>
                <div class="mb-6">
                  <span class="text-4xl font-bold text-gray-900">$2,000</span>
                  <span class="text-gray-500 ml-1">â€“ $3,000</span>
                </div>
                <p class="text-gray-600 text-sm mb-6 leading-relaxed">Higher-intent buyers with deeper qualification. Ideal for premium properties or small projects.</p>
                
                <ul class="space-y-3 mb-8">
                  <li class="flex items-start space-x-3 text-sm">
                    <svg class="w-5 h-5 text-blue-500 mt-0.5 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/></svg>
                    <span class="text-gray-700">15â€“25 qualified buyers</span>
                  </li>
                  <li class="flex items-start space-x-3 text-sm">
                    <svg class="w-5 h-5 text-blue-500 mt-0.5 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/></svg>
                    <span class="text-gray-700">Deep qualification</span>
                  </li>
                  <li class="flex items-start space-x-3 text-sm">
                    <svg class="w-5 h-5 text-blue-500 mt-0.5 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/></svg>
                    <span class="text-gray-700">Budget + timeframe confirmed</span>
                  </li>
                  <li class="flex items-start space-x-3 text-sm">
                    <svg class="w-5 h-5 text-blue-500 mt-0.5 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/></svg>
                    <span class="text-gray-700">Finance status captured</span>
                  </li>
                  <li class="flex items-start space-x-3 text-sm">
                    <svg class="w-5 h-5 text-blue-500 mt-0.5 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/></svg>
                    <span class="text-gray-700">5â€“10 day delivery</span>
                  </li>
                </ul>
                
                <button onclick="openBuyerRequest('growth')" class="w-full py-3 bg-blue-600 text-white font-semibold rounded-xl hover:bg-blue-700 transition-colors shadow-lg shadow-blue-600/20">
                  Request Buyers
                </button>
              </div>
            </div>
            
            <!-- Premium Package -->
            <div class="bg-gradient-to-br from-slate-800 to-slate-900 rounded-2xl overflow-hidden shadow-xl text-white">
              <div class="p-8">
                <div class="flex items-center justify-between mb-4">
                  <h3 class="text-lg font-bold text-white">Premium</h3>
                  <span class="text-xs font-medium text-amber-300 bg-amber-400/20 px-2 py-1 rounded">High-Value Deals</span>
                </div>
                <div class="mb-6">
                  <span class="text-4xl font-bold text-white">$5,000</span>
                  <span class="text-slate-400 ml-1">+</span>
                </div>
                <p class="text-slate-300 text-sm mb-6 leading-relaxed">Hand-selected buyer demand with manual screening. Ideal for off-the-plan, land, or high-ticket property.</p>
                
                <ul class="space-y-3 mb-8">
                  <li class="flex items-start space-x-3 text-sm">
                    <svg class="w-5 h-5 text-amber-400 mt-0.5 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/></svg>
                    <span class="text-slate-200">30â€“50+ qualified buyers</span>
                  </li>
                  <li class="flex items-start space-x-3 text-sm">
                    <svg class="w-5 h-5 text-amber-400 mt-0.5 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/></svg>
                    <span class="text-slate-200">Manual screening</span>
                  </li>
                  <li class="flex items-start space-x-3 text-sm">
                    <svg class="w-5 h-5 text-amber-400 mt-0.5 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/></svg>
                    <span class="text-slate-200">Investor or high-value buyers</span>
                  </li>
                  <li class="flex items-start space-x-3 text-sm">
                    <svg class="w-5 h-5 text-amber-400 mt-0.5 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/></svg>
                    <span class="text-slate-200">Project-level support</span>
                  </li>
                  <li class="flex items-start space-x-3 text-sm">
                    <svg class="w-5 h-5 text-amber-400 mt-0.5 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/></svg>
                    <span class="text-slate-200">Dedicated campaign manager</span>
                  </li>
                </ul>
                
                <button onclick="openBuyerRequest('premium')" class="w-full py-3 bg-white text-gray-900 font-semibold rounded-xl hover:bg-gray-100 transition-colors">
                  Request Buyers
                </button>
              </div>
            </div>
          </div>
          
          <p class="text-center text-sm text-gray-500 mt-8">All packages include exclusive buyersâ€”never shared with other agents.</p>
        </div>
        
        <!-- How Qualification Works Section -->
        <div class="bg-slate-50 py-24">
          <div class="max-w-5xl mx-auto px-8">
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-16 items-center">
              <div>
                <h2 class="text-3xl font-bold text-gray-900 mb-6">How we qualify buyers</h2>
                <p class="text-lg text-gray-600 mb-8 leading-relaxed">
                  We don't just collect names. Every buyer goes through a structured qualification process before they reach you.
                </p>
                
                <div class="space-y-6">
                  <div class="flex items-start space-x-4">
                    <div class="w-10 h-10 bg-blue-100 rounded-xl flex items-center justify-center flex-shrink-0">
                      <span class="text-blue-600 font-bold">1</span>
                    </div>
                    <div>
                      <h3 class="font-semibold text-gray-900 mb-1">Intent Captured</h3>
                      <p class="text-gray-600 text-sm">Buyers engage through targeted property funnels. We capture why they're looking, what they need, and when they want to buy.</p>
                    </div>
                  </div>
                  
                  <div class="flex items-start space-x-4">
                    <div class="w-10 h-10 bg-blue-100 rounded-xl flex items-center justify-center flex-shrink-0">
                      <span class="text-blue-600 font-bold">2</span>
                    </div>
                    <div>
                      <h3 class="font-semibold text-gray-900 mb-1">Budget Verified</h3>
                      <p class="text-gray-600 text-sm">Price range is confirmed. For Growth and Premium packages, we also capture finance status and deposit readiness.</p>
                    </div>
                  </div>
                  
                  <div class="flex items-start space-x-4">
                    <div class="w-10 h-10 bg-blue-100 rounded-xl flex items-center justify-center flex-shrink-0">
                      <span class="text-blue-600 font-bold">3</span>
                    </div>
                    <div>
                      <h3 class="font-semibold text-gray-900 mb-1">Property Matched</h3>
                      <p class="text-gray-600 text-sm">Buyers are matched to your listing or project based on type, location, bedrooms, and budget alignment.</p>
                    </div>
                  </div>
                  
                  <div class="flex items-start space-x-4">
                    <div class="w-10 h-10 bg-blue-100 rounded-xl flex items-center justify-center flex-shrink-0">
                      <span class="text-blue-600 font-bold">4</span>
                    </div>
                    <div>
                      <h3 class="font-semibold text-gray-900 mb-1">Filtered & Delivered</h3>
                      <p class="text-gray-600 text-sm">Only qualified buyers are delivered to you. No tyre-kickers. No cold leads. Just people ready to inspect.</p>
                    </div>
                  </div>
                </div>
              </div>
              
              <div class="bg-white rounded-2xl p-8 border border-gray-200 shadow-sm">
                <h3 class="text-lg font-semibold text-gray-900 mb-6">Sample buyer profile</h3>
                
                <div class="space-y-4">
                  <div class="flex items-center justify-between py-3 border-b border-gray-100">
                    <span class="text-gray-500 text-sm">Buyer Type</span>
                    <span class="font-medium text-gray-900">Owner-Occupier</span>
                  </div>
                  <div class="flex items-center justify-between py-3 border-b border-gray-100">
                    <span class="text-gray-500 text-sm">Budget Range</span>
                    <span class="font-medium text-gray-900">$1.2M â€“ $1.5M</span>
                  </div>
                  <div class="flex items-center justify-between py-3 border-b border-gray-100">
                    <span class="text-gray-500 text-sm">Timeframe</span>
                    <span class="font-medium text-gray-900">Within 60 days</span>
                  </div>
                  <div class="flex items-center justify-between py-3 border-b border-gray-100">
                    <span class="text-gray-500 text-sm">Property Type</span>
                    <span class="font-medium text-gray-900">3â€“4 bed house</span>
                  </div>
                  <div class="flex items-center justify-between py-3 border-b border-gray-100">
                    <span class="text-gray-500 text-sm">Location</span>
                    <span class="font-medium text-gray-900">Neutral Bay, Mosman</span>
                  </div>
                  <div class="flex items-center justify-between py-3">
                    <span class="text-gray-500 text-sm">Finance Status</span>
                    <span class="font-medium text-green-600">Pre-approved</span>
                  </div>
                </div>
                
                <div class="mt-6 pt-6 border-t border-gray-100">
                  <div class="flex items-center space-x-2 text-sm text-gray-500">
                    <svg class="w-4 h-4 text-blue-500" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/></svg>
                    <span>This buyer would be matched to premium listings in the Lower North Shore.</span>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        
        <!-- When This Makes Sense Section -->
        <div class="max-w-5xl mx-auto px-8 py-24">
          <div class="text-center mb-16">
            <h2 class="text-3xl font-bold text-gray-900 mb-4">When buyer demand makes sense</h2>
            <p class="text-lg text-gray-600 max-w-2xl mx-auto">This isn't for every listing. It's for deals where buyer pressure makes a measurable difference.</p>
          </div>
          
          <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <div class="bg-white rounded-2xl p-6 border border-gray-100 hover:border-blue-200 transition-all flex items-start space-x-4">
              <div class="w-10 h-10 bg-blue-50 rounded-xl flex items-center justify-center flex-shrink-0">
                <svg class="w-5 h-5 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>
              </div>
              <div>
                <h3 class="font-semibold text-gray-900 mb-1">Hard-to-sell listings</h3>
                <p class="text-sm text-gray-600">Properties that need more buyer interest to move. Inject fresh demand without price reductions.</p>
              </div>
            </div>
            
            <div class="bg-white rounded-2xl p-6 border border-gray-100 hover:border-blue-200 transition-all flex items-start space-x-4">
              <div class="w-10 h-10 bg-blue-50 rounded-xl flex items-center justify-center flex-shrink-0">
                <svg class="w-5 h-5 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"/></svg>
              </div>
              <div>
                <h3 class="font-semibold text-gray-900 mb-1">Price defence</h3>
                <p class="text-sm text-gray-600">When you need more competition to hold or increase the sale price. Buyers create urgency.</p>
              </div>
            </div>
            
            <div class="bg-white rounded-2xl p-6 border border-gray-100 hover:border-blue-200 transition-all flex items-start space-x-4">
              <div class="w-10 h-10 bg-blue-50 rounded-xl flex items-center justify-center flex-shrink-0">
                <svg class="w-5 h-5 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"/></svg>
              </div>
              <div>
                <h3 class="font-semibold text-gray-900 mb-1">New project launches</h3>
                <p class="text-sm text-gray-600">Fill early release stages with qualified buyers. Prove velocity to developers and secure future stages.</p>
              </div>
            </div>
            
            <div class="bg-white rounded-2xl p-6 border border-gray-100 hover:border-blue-200 transition-all flex items-start space-x-4">
              <div class="w-10 h-10 bg-blue-50 rounded-xl flex items-center justify-center flex-shrink-0">
                <svg class="w-5 h-5 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"/></svg>
              </div>
              <div>
                <h3 class="font-semibold text-gray-900 mb-1">Pre-construction validation</h3>
                <p class="text-sm text-gray-600">Prove demand before building. Use buyer registrations to de-risk development decisions.</p>
              </div>
            </div>
          </div>
        </div>
        
        <!-- Final CTA Section -->
        <div id="buyer-request" class="bg-gradient-to-br from-blue-600 via-blue-700 to-blue-800 py-24">
          <div class="max-w-4xl mx-auto px-8 text-center">
            <h2 class="text-4xl font-bold text-white mb-6">Get qualified buyers for your next listing</h2>
            <p class="text-xl text-blue-100 max-w-2xl mx-auto mb-10 leading-relaxed">
              Tell us about your property. We'll match it with buyers who are ready to inspect.
            </p>
            
            <div class="flex flex-col sm:flex-row items-center justify-center space-y-4 sm:space-y-0 sm:space-x-4 mb-12">
              <button onclick="openBuyerRequest('general')" class="px-10 py-5 bg-white text-blue-700 font-semibold rounded-xl hover:bg-blue-50 transition-colors shadow-xl text-lg">
                Request Buyer Demand
              </button>
              <button onclick="openBuyerCall()" class="px-10 py-5 border-2 border-white/30 text-white font-semibold rounded-xl hover:border-white/50 hover:bg-white/10 transition-colors text-lg">
                Talk to Our Team
              </button>
            </div>
            
            <div class="flex items-center justify-center space-x-8 text-sm text-blue-200">
              <div class="flex items-center space-x-2">
                <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/></svg>
                <span>Not instantâ€”buyers are matched and verified</span>
              </div>
              <div class="flex items-center space-x-2">
                <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/></svg>
                <span>Exclusive to youâ€”never shared</span>
              </div>
            </div>
          </div>
        </div>
        
        <!-- Footer -->
        <div class="border-t border-gray-200 bg-gray-50">
          <div class="max-w-5xl mx-auto px-8 py-8">
            <div class="flex items-center justify-between">
              <div class="flex items-center space-x-3">
                <div class="w-8 h-8 bg-blue-600 rounded-lg flex items-center justify-center">
                  <svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0z"/>
                  </svg>
                </div>
                <span class="font-semibold text-gray-900">Get Listings Buyer Demand</span>
              </div>
              <p class="text-sm text-gray-500">Questions? Email <a href="mailto:buyers@getlistings.com.au" class="text-gray-700 hover:text-gray-900 underline">buyers@getlistings.com.au</a></p>
            </div>
          </div>
        </div>
        
      </div>
      <!-- END BUYER DEMAND PAGE -->
      
      <!-- TALENT EXCHANGE PAGE -->
      <div id="page-talent" class="page hidden flex-1 overflow-auto bg-white">
        
        <!-- Hero Section -->
        <div class="bg-gradient-to-br from-slate-900 via-slate-800 to-violet-900 text-white">
          <div class="max-w-5xl mx-auto px-8 py-20">
            <div class="flex items-center space-x-2 mb-6">
              <div class="w-2 h-2 bg-violet-400 rounded-full"></div>
              <span class="text-violet-300 text-sm font-medium tracking-wide uppercase">Private Talent Marketplace</span>
            </div>
            
            <h1 class="text-5xl font-bold mb-6 leading-tight">
              The quiet market for<br>
              <span class="bg-gradient-to-r from-violet-400 to-purple-400 bg-clip-text text-transparent">exceptional talent.</span>
            </h1>
            
            <p class="text-xl text-slate-300 mb-10 max-w-2xl leading-relaxed">
              Hire or be hired â€” discreetly, professionally, and based on real performance. No recruiters. No cold calls. No public profiles.
            </p>
            
            <div class="flex items-center space-x-4">
              <button onclick="openTalentModal('post')" class="px-8 py-4 bg-white text-slate-900 rounded-xl font-semibold hover:bg-gray-100 transition-colors shadow-lg">
                Post an Opportunity
              </button>
              <button onclick="scrollToTalentSection('talent-opportunities')" class="px-8 py-4 border border-white/30 text-white rounded-xl font-medium hover:bg-white/10 transition-colors">
                Explore Opportunities
              </button>
            </div>
            
            <div class="mt-12 pt-8 border-t border-white/10">
              <p class="text-slate-400 text-sm mb-4">Trusted by principals and top performers across Australia</p>
              <div class="flex items-center space-x-8 text-slate-500">
                <div class="flex items-center space-x-2">
                  <svg class="w-5 h-5 text-violet-400" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/></svg>
                  <span class="text-slate-300 text-sm">47 placements this quarter</span>
                </div>
                <div class="flex items-center space-x-2">
                  <svg class="w-5 h-5 text-violet-400" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/></svg>
                  <span class="text-slate-300 text-sm">$2.4M avg. first-year GCI</span>
                </div>
                <div class="flex items-center space-x-2">
                  <svg class="w-5 h-5 text-violet-400" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/></svg>
                  <span class="text-slate-300 text-sm">100% discretion guaranteed</span>
                </div>
              </div>
            </div>
          </div>
        </div>
        
        <!-- What You Can Post Section -->
        <div class="bg-slate-50 py-20">
          <div class="max-w-5xl mx-auto px-8">
            <div class="text-center mb-12">
              <h2 class="text-3xl font-bold text-gray-900 mb-4">Roles worth moving for</h2>
              <p class="text-gray-600 max-w-2xl mx-auto">This isn't a job board. It's a private exchange for high-calibre opportunities â€” roles that justify a serious career move.</p>
            </div>
            
            <div class="grid grid-cols-5 gap-4">
              
              <div class="bg-white rounded-2xl p-6 border border-gray-200 hover:border-violet-300 hover:shadow-lg transition-all text-center group">
                <div class="w-14 h-14 bg-violet-100 rounded-xl flex items-center justify-center mx-auto mb-4 group-hover:bg-violet-200 transition-colors">
                  <svg class="w-7 h-7 text-violet-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"/></svg>
                </div>
                <h3 class="font-semibold text-gray-900 mb-1">Sales Agents</h3>
                <p class="text-sm text-gray-500">Listing & selling specialists</p>
              </div>
              
              <div class="bg-white rounded-2xl p-6 border border-gray-200 hover:border-violet-300 hover:shadow-lg transition-all text-center group">
                <div class="w-14 h-14 bg-blue-100 rounded-xl flex items-center justify-center mx-auto mb-4 group-hover:bg-blue-200 transition-colors">
                  <svg class="w-7 h-7 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0z"/></svg>
                </div>
                <h3 class="font-semibold text-gray-900 mb-1">Buyer's Agents</h3>
                <p class="text-sm text-gray-500">Acquisition specialists</p>
              </div>
              
              <div class="bg-white rounded-2xl p-6 border border-gray-200 hover:border-violet-300 hover:shadow-lg transition-all text-center group">
                <div class="w-14 h-14 bg-amber-100 rounded-xl flex items-center justify-center mx-auto mb-4 group-hover:bg-amber-200 transition-colors">
                  <svg class="w-7 h-7 text-amber-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z"/></svg>
                </div>
                <h3 class="font-semibold text-gray-900 mb-1">Team Leaders</h3>
                <p class="text-sm text-gray-500">Sales team management</p>
              </div>
              
              <div class="bg-white rounded-2xl p-6 border border-gray-200 hover:border-violet-300 hover:shadow-lg transition-all text-center group">
                <div class="w-14 h-14 bg-green-100 rounded-xl flex items-center justify-center mx-auto mb-4 group-hover:bg-green-200 transition-colors">
                  <svg class="w-7 h-7 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"/><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/></svg>
                </div>
                <h3 class="font-semibold text-gray-900 mb-1">Operations</h3>
                <p class="text-sm text-gray-500">Business operations</p>
              </div>
              
              <div class="bg-white rounded-2xl p-6 border border-gray-200 hover:border-violet-300 hover:shadow-lg transition-all text-center group">
                <div class="w-14 h-14 bg-rose-100 rounded-xl flex items-center justify-center mx-auto mb-4 group-hover:bg-rose-200 transition-colors">
                  <svg class="w-7 h-7 text-rose-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 3.055A9.001 9.001 0 1020.945 13H11V3.055z"/><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.488 9H15V3.512A9.025 9.025 0 0120.488 9z"/></svg>
                </div>
                <h3 class="font-semibold text-gray-900 mb-1">Marketing</h3>
                <p class="text-sm text-gray-500">Growth & brand roles</p>
              </div>
              
            </div>
            
            <div class="mt-8 text-center">
              <p class="text-sm text-gray-500">
                <svg class="w-4 h-4 inline-block mr-1 text-amber-500" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd"/></svg>
                Entry-level and casual roles are not accepted. This marketplace is for revenue-producing positions only.
              </p>
            </div>
          </div>
        </div>
        
        <!-- Posting Options Section -->
        <div class="bg-white py-20">
          <div class="max-w-5xl mx-auto px-8">
            <div class="text-center mb-12">
              <h2 class="text-3xl font-bold text-gray-900 mb-4">You control the visibility</h2>
              <p class="text-gray-600 max-w-2xl mx-auto">Every opportunity can be tailored to your comfort level. Discretion is built into every layer.</p>
            </div>
            
            <div class="grid grid-cols-3 gap-6">
              
              <!-- Public -->
              <div class="bg-white rounded-2xl border-2 border-gray-200 p-8 hover:border-violet-300 transition-colors">
                <div class="w-12 h-12 bg-green-100 rounded-xl flex items-center justify-center mb-6">
                  <svg class="w-6 h-6 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3.055 11H5a2 2 0 012 2v1a2 2 0 002 2 2 2 0 012 2v2.945M8 3.935V5.5A2.5 2.5 0 0010.5 8h.5a2 2 0 012 2 2 2 0 104 0 2 2 0 012-2h1.064M15 20.488V18a2 2 0 012-2h3.064M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>
                </div>
                <h3 class="text-xl font-bold text-gray-900 mb-2">Public</h3>
                <p class="text-gray-600 mb-4">Visible to all Get Listings users. Your brand and opportunity are front and centre.</p>
                <ul class="space-y-2 text-sm text-gray-600">
                  <li class="flex items-center"><svg class="w-4 h-4 text-green-500 mr-2" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/></svg>Full agency branding</li>
                  <li class="flex items-center"><svg class="w-4 h-4 text-green-500 mr-2" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/></svg>Maximum reach</li>
                  <li class="flex items-center"><svg class="w-4 h-4 text-green-500 mr-2" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/></svg>Instant applications</li>
                </ul>
              </div>
              
              <!-- Anonymous -->
              <div class="bg-gradient-to-br from-slate-800 to-slate-900 rounded-2xl p-8 text-white relative overflow-hidden">
                <div class="absolute top-4 right-4 px-2 py-1 bg-violet-500 text-white text-xs font-bold rounded">POPULAR</div>
                <div class="w-12 h-12 bg-white/10 rounded-xl flex items-center justify-center mb-6">
                  <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>
                </div>
                <h3 class="text-xl font-bold text-white mb-2">Anonymous</h3>
                <p class="text-slate-300 mb-4">Role details visible, but your identity is hidden until mutual interest is confirmed.</p>
                <ul class="space-y-2 text-sm text-slate-300">
                  <li class="flex items-center"><svg class="w-4 h-4 text-violet-400 mr-2" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/></svg>Identity protected</li>
                  <li class="flex items-center"><svg class="w-4 h-4 text-violet-400 mr-2" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/></svg>Reveal on your terms</li>
                  <li class="flex items-center"><svg class="w-4 h-4 text-violet-400 mr-2" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/></svg>Avoid market speculation</li>
                </ul>
              </div>
              
              <!-- Private -->
              <div class="bg-white rounded-2xl border-2 border-gray-200 p-8 hover:border-violet-300 transition-colors">
                <div class="w-12 h-12 bg-slate-100 rounded-xl flex items-center justify-center mb-6">
                  <svg class="w-6 h-6 text-slate-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"/></svg>
                </div>
                <h3 class="text-xl font-bold text-gray-900 mb-2">Private</h3>
                <p class="text-gray-600 mb-4">Visible only to candidates you shortlist or those we vet on your behalf.</p>
                <ul class="space-y-2 text-sm text-gray-600">
                  <li class="flex items-center"><svg class="w-4 h-4 text-green-500 mr-2" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/></svg>Invite-only access</li>
                  <li class="flex items-center"><svg class="w-4 h-4 text-green-500 mr-2" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/></svg>Executive-level discretion</li>
                  <li class="flex items-center"><svg class="w-4 h-4 text-green-500 mr-2" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/></svg>Pre-qualified candidates</li>
                </ul>
              </div>
              
            </div>
          </div>
        </div>
        
        <!-- How Matching Works -->
        <div class="bg-slate-50 py-20">
          <div class="max-w-5xl mx-auto px-8">
            <div class="text-center mb-12">
              <h2 class="text-3xl font-bold text-gray-900 mb-4">How introductions work</h2>
              <p class="text-gray-600 max-w-2xl mx-auto">No cold outreach. No spam. Just qualified connections when both parties are ready.</p>
            </div>
            
            <div class="grid grid-cols-4 gap-6">
              
              <div class="text-center">
                <div class="w-16 h-16 bg-white border-2 border-violet-200 rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-sm">
                  <span class="text-2xl font-bold text-violet-600">1</span>
                </div>
                <h3 class="font-semibold text-gray-900 mb-2">Post opportunity</h3>
                <p class="text-sm text-gray-600">Share role details, compensation structure, and what you're looking for.</p>
              </div>
              
              <div class="text-center">
                <div class="w-16 h-16 bg-white border-2 border-violet-200 rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-sm">
                  <span class="text-2xl font-bold text-violet-600">2</span>
                </div>
                <h3 class="font-semibold text-gray-900 mb-2">Candidates apply</h3>
                <p class="text-sm text-gray-600">Interested professionals express interest with a brief note.</p>
              </div>
              
              <div class="text-center">
                <div class="w-16 h-16 bg-white border-2 border-violet-200 rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-sm">
                  <span class="text-2xl font-bold text-violet-600">3</span>
                </div>
                <h3 class="font-semibold text-gray-900 mb-2">We facilitate</h3>
                <p class="text-sm text-gray-600">Get Listings reviews fit and facilitates warm introductions.</p>
              </div>
              
              <div class="text-center">
                <div class="w-16 h-16 bg-white border-2 border-violet-200 rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-sm">
                  <span class="text-2xl font-bold text-violet-600">4</span>
                </div>
                <h3 class="font-semibold text-gray-900 mb-2">Connect directly</h3>
                <p class="text-sm text-gray-600">Once approved, you connect directly to explore further.</p>
              </div>
              
            </div>
            
            <div class="mt-12 bg-white rounded-2xl border border-gray-200 p-6 flex items-center justify-between">
              <div class="flex items-center space-x-4">
                <div class="w-12 h-12 bg-violet-100 rounded-xl flex items-center justify-center">
                  <svg class="w-6 h-6 text-violet-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"/></svg>
                </div>
                <div>
                  <h4 class="font-semibold text-gray-900">No direct messaging until approved</h4>
                  <p class="text-sm text-gray-600">Both parties must agree before any contact details are shared.</p>
                </div>
              </div>
              <span class="px-4 py-2 bg-violet-100 text-violet-700 text-sm font-medium rounded-full">Privacy Protected</span>
            </div>
          </div>
        </div>
        
        <!-- Pricing Section -->
        <div class="bg-white py-20">
          <div class="max-w-5xl mx-auto px-8">
            <div class="text-center mb-12">
              <h2 class="text-3xl font-bold text-gray-900 mb-4">Aligned incentives. Fair pricing.</h2>
              <p class="text-gray-600 max-w-2xl mx-auto">We only succeed when you make a great hire. Simple, transparent, and results-focused.</p>
            </div>
            
            <div class="max-w-3xl mx-auto">
              <div class="bg-gradient-to-br from-slate-800 to-slate-900 rounded-3xl p-10 text-white">
                <div class="grid grid-cols-2 gap-10">
                  
                  <div class="border-r border-white/10 pr-10">
                    <p class="text-slate-400 text-sm font-medium mb-2">PLACEMENT FEE</p>
                    <p class="text-5xl font-bold mb-2">$7,500</p>
                    <p class="text-slate-400">Paid when you post the role</p>
                    <ul class="mt-6 space-y-2 text-sm text-slate-300">
                      <li class="flex items-center"><svg class="w-4 h-4 text-violet-400 mr-2" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/></svg>90-day active listing</li>
                      <li class="flex items-center"><svg class="w-4 h-4 text-violet-400 mr-2" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/></svg>Candidate screening</li>
                      <li class="flex items-center"><svg class="w-4 h-4 text-violet-400 mr-2" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/></svg>Introduction facilitation</li>
                    </ul>
                  </div>
                  
                  <div class="pl-10">
                    <p class="text-slate-400 text-sm font-medium mb-2">SUCCESS FEE</p>
                    <p class="text-5xl font-bold mb-2">5%</p>
                    <p class="text-slate-400">Of first year's gross commission</p>
                    <ul class="mt-6 space-y-2 text-sm text-slate-300">
                      <li class="flex items-center"><svg class="w-4 h-4 text-violet-400 mr-2" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/></svg>Only if hire is made</li>
                      <li class="flex items-center"><svg class="w-4 h-4 text-violet-400 mr-2" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/></svg>Capped at $50,000</li>
                      <li class="flex items-center"><svg class="w-4 h-4 text-violet-400 mr-2" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/></svg>Paid over 12 months</li>
                    </ul>
                  </div>
                  
                </div>
                
                <div class="mt-10 pt-8 border-t border-white/10">
                  <div class="flex items-center justify-between">
                    <div>
                      <p class="text-white font-medium">Example: Hire an agent who bills $400K in year one</p>
                      <p class="text-slate-400 text-sm">Total cost: $7,500 + $20,000 = <span class="text-white font-semibold">$27,500</span> (6.9% of GCI)</p>
                    </div>
                    <div class="text-right">
                      <p class="text-xs text-slate-500">vs typical recruiter</p>
                      <p class="text-slate-400 text-sm line-through">$40,000 â€“ $80,000</p>
                    </div>
                  </div>
                </div>
              </div>
              
              <div class="mt-6 grid grid-cols-3 gap-4">
                <div class="bg-green-50 border border-green-100 rounded-xl p-4 text-center">
                  <p class="text-green-700 font-semibold">No lock-in</p>
                  <p class="text-sm text-green-600">Cancel anytime</p>
                </div>
                <div class="bg-green-50 border border-green-100 rounded-xl p-4 text-center">
                  <p class="text-green-700 font-semibold">No retainers</p>
                  <p class="text-sm text-green-600">Pay per placement</p>
                </div>
                <div class="bg-green-50 border border-green-100 rounded-xl p-4 text-center">
                  <p class="text-green-700 font-semibold">No exclusivity</p>
                  <p class="text-sm text-green-600">Use any channels</p>
                </div>
              </div>
            </div>
          </div>
        </div>
        
        <!-- Why Better Than Recruiters -->
        <div class="bg-slate-50 py-20">
          <div class="max-w-5xl mx-auto px-8">
            <div class="text-center mb-12">
              <h2 class="text-3xl font-bold text-gray-900 mb-4">A different approach to talent</h2>
              <p class="text-gray-600 max-w-2xl mx-auto">Traditional recruitment wasn't built for real estate. This was.</p>
            </div>
            
            <div class="grid grid-cols-2 gap-8">
              
              <div class="bg-white rounded-2xl border border-gray-200 p-8">
                <div class="flex items-center space-x-3 mb-6">
                  <div class="w-10 h-10 bg-violet-100 rounded-lg flex items-center justify-center">
                    <svg class="w-5 h-5 text-violet-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M18.364 5.636l-3.536 3.536m0 5.656l3.536 3.536M9.172 9.172L5.636 5.636m3.536 9.192l-3.536 3.536M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-5 0a4 4 0 11-8 0 4 4 0 018 0z"/></svg>
                  </div>
                  <h3 class="text-lg font-semibold text-gray-900">No cold outreach</h3>
                </div>
                <p class="text-gray-600">Candidates come to you. No one is hounded on LinkedIn or ambushed at open homes. Interest is genuine.</p>
              </div>
              
              <div class="bg-white rounded-2xl border border-gray-200 p-8">
                <div class="flex items-center space-x-3 mb-6">
                  <div class="w-10 h-10 bg-violet-100 rounded-lg flex items-center justify-center">
                    <svg class="w-5 h-5 text-violet-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0z"/></svg>
                  </div>
                  <h3 class="text-lg font-semibold text-gray-900">Better cultural fit</h3>
                </div>
                <p class="text-gray-600">Both sides are already part of the Get Listings ecosystem. Shared context means better alignment.</p>
              </div>
              
              <div class="bg-white rounded-2xl border border-gray-200 p-8">
                <div class="flex items-center space-x-3 mb-6">
                  <div class="w-10 h-10 bg-violet-100 rounded-lg flex items-center justify-center">
                    <svg class="w-5 h-5 text-violet-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"/></svg>
                  </div>
                  <h3 class="text-lg font-semibold text-gray-900">Real performance context</h3>
                </div>
                <p class="text-gray-600">We see leaderboard rankings, listing activity, and engagement signals. Not just a polished resume.</p>
              </div>
              
              <div class="bg-white rounded-2xl border border-gray-200 p-8">
                <div class="flex items-center space-x-3 mb-6">
                  <div class="w-10 h-10 bg-violet-100 rounded-lg flex items-center justify-center">
                    <svg class="w-5 h-5 text-violet-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9c1.657 0 3-4.03 3-9s-1.343-9-3-9m0 18c-1.657 0-3-4.03-3-9s1.343-9 3-9m-9 9a9 9 0 019-9"/></svg>
                  </div>
                  <h3 class="text-lg font-semibold text-gray-900">Industry-specific network</h3>
                </div>
                <p class="text-gray-600">Everyone here is in real estate. No generalist recruiters guessing what "BDM" means.</p>
              </div>
              
            </div>
          </div>
        </div>
        
        <!-- Sample Opportunities Section -->
        <section id="talent-opportunities" class="bg-white py-20">
          <div class="max-w-5xl mx-auto px-8">
            <div class="text-center mb-12">
              <h2 class="text-3xl font-bold text-gray-900 mb-4">Current opportunities</h2>
              <p class="text-gray-600 max-w-2xl mx-auto">A sample of active roles. Log in to see all opportunities matching your profile.</p>
            </div>
            
            <div class="space-y-4 mb-8">
              
              <!-- Sample Opportunity 1 -->
              <div class="bg-white rounded-xl border border-gray-200 p-6 hover:border-violet-300 hover:shadow-md transition-all cursor-pointer" onclick="showTalentOpportunityDetail('1')">
                <div class="flex items-start justify-between">
                  <div class="flex items-start space-x-4">
                    <div class="w-12 h-12 bg-gradient-to-br from-violet-500 to-purple-600 rounded-xl flex items-center justify-center text-white font-bold text-lg">?</div>
                    <div>
                      <div class="flex items-center space-x-2 mb-1">
                        <h3 class="font-semibold text-gray-900">Senior Sales Agent</h3>
                        <span class="px-2 py-0.5 bg-slate-100 text-slate-600 text-xs font-medium rounded">Anonymous</span>
                      </div>
                      <p class="text-sm text-gray-600 mb-2">Eastern Suburbs, Sydney â€¢ High-end residential â€¢ Team of 12</p>
                      <div class="flex items-center space-x-4 text-xs text-gray-500">
                        <span class="flex items-center"><svg class="w-3.5 h-3.5 mr-1" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"/></svg>Posted 3 days ago</span>
                        <span class="flex items-center"><svg class="w-3.5 h-3.5 mr-1" fill="currentColor" viewBox="0 0 20 20"><path d="M9 6a3 3 0 11-6 0 3 3 0 016 0zM17 6a3 3 0 11-6 0 3 3 0 016 0zM12.93 17c.046-.327.07-.66.07-1a6.97 6.97 0 00-1.5-4.33A5 5 0 0119 16v1h-6.07zM6 11a5 5 0 015 5v1H1v-1a5 5 0 015-5z"/></svg>14 interested</span>
                      </div>
                    </div>
                  </div>
                  <div class="text-right">
                    <p class="text-lg font-bold text-gray-900">$500K+</p>
                    <p class="text-xs text-gray-500">target GCI</p>
                  </div>
                </div>
              </div>
              
              <!-- Sample Opportunity 2 -->
              <div class="bg-white rounded-xl border border-gray-200 p-6 hover:border-violet-300 hover:shadow-md transition-all cursor-pointer" onclick="showTalentOpportunityDetail('2')">
                <div class="flex items-start justify-between">
                  <div class="flex items-start space-x-4">
                    <div class="w-12 h-12 bg-blue-100 rounded-xl flex items-center justify-center">
                      <img src="https://ui-avatars.com/api/?name=Ray+White&background=0369a1&color=fff&size=48" alt="Ray White" class="w-full h-full rounded-xl">
                    </div>
                    <div>
                      <div class="flex items-center space-x-2 mb-1">
                        <h3 class="font-semibold text-gray-900">Team Leader â€“ New Projects</h3>
                        <span class="px-2 py-0.5 bg-green-100 text-green-600 text-xs font-medium rounded">Public</span>
                      </div>
                      <p class="text-sm text-gray-600 mb-2">Ray White Projects â€¢ Brisbane Inner City â€¢ Off-the-plan</p>
                      <div class="flex items-center space-x-4 text-xs text-gray-500">
                        <span class="flex items-center"><svg class="w-3.5 h-3.5 mr-1" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"/></svg>Posted 1 week ago</span>
                        <span class="flex items-center"><svg class="w-3.5 h-3.5 mr-1" fill="currentColor" viewBox="0 0 20 20"><path d="M9 6a3 3 0 11-6 0 3 3 0 016 0zM17 6a3 3 0 11-6 0 3 3 0 016 0zM12.93 17c.046-.327.07-.66.07-1a6.97 6.97 0 00-1.5-4.33A5 5 0 0119 16v1h-6.07zM6 11a5 5 0 015 5v1H1v-1a5 5 0 015-5z"/></svg>8 interested</span>
                      </div>
                    </div>
                  </div>
                  <div class="text-right">
                    <p class="text-lg font-bold text-gray-900">$800K+</p>
                    <p class="text-xs text-gray-500">target GCI</p>
                  </div>
                </div>
              </div>
              
              <!-- Sample Opportunity 3 -->
              <div class="bg-white rounded-xl border border-gray-200 p-6 hover:border-violet-300 hover:shadow-md transition-all cursor-pointer" onclick="showTalentOpportunityDetail('3')">
                <div class="flex items-start justify-between">
                  <div class="flex items-start space-x-4">
                    <div class="w-12 h-12 bg-gradient-to-br from-slate-600 to-slate-800 rounded-xl flex items-center justify-center text-white">
                      <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"/></svg>
                    </div>
                    <div>
                      <div class="flex items-center space-x-2 mb-1">
                        <h3 class="font-semibold text-gray-900">Principal â€“ Greenfield Office</h3>
                        <span class="px-2 py-0.5 bg-slate-100 text-slate-600 text-xs font-medium rounded">Private</span>
                      </div>
                      <p class="text-sm text-gray-600 mb-2">Confidential â€¢ Melbourne Growth Corridor â€¢ Equity opportunity</p>
                      <div class="flex items-center space-x-4 text-xs text-gray-500">
                        <span class="flex items-center"><svg class="w-3.5 h-3.5 mr-1" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"/></svg>Posted 2 weeks ago</span>
                        <span class="flex items-center"><svg class="w-3.5 h-3.5 mr-1" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z" clip-rule="evenodd"/></svg>Invite only</span>
                      </div>
                    </div>
                  </div>
                  <div class="text-right">
                    <p class="text-lg font-bold text-gray-900">$1M+</p>
                    <p class="text-xs text-gray-500">target GCI</p>
                  </div>
                </div>
              </div>
              
            </div>
            
            <div class="text-center">
              <button onclick="showToast('Log in to view all opportunities')" class="text-violet-600 font-medium hover:text-violet-700">View all 23 opportunities â†’</button>
            </div>
          </div>
        </section>
        
        <!-- Final CTA Section -->
        <div class="bg-gradient-to-br from-slate-900 via-slate-800 to-violet-900 py-20">
          <div class="max-w-3xl mx-auto px-8 text-center">
            <h2 class="text-4xl font-bold text-white mb-6">Ready to make a move?</h2>
            <p class="text-xl text-slate-300 mb-10">Whether you're hiring or exploring, this is the place for serious conversations.</p>
            
            <div class="flex items-center justify-center space-x-4 mb-10">
              <button onclick="openTalentModal('post')" class="px-8 py-4 bg-white text-slate-900 rounded-xl font-semibold hover:bg-gray-100 transition-colors shadow-lg">
                Post a Role
              </button>
              <button onclick="openTalentModal('intro')" class="px-8 py-4 border border-white/30 text-white rounded-xl font-medium hover:bg-white/10 transition-colors">
                Request Private Introduction
              </button>
            </div>
            
            <div class="bg-white/5 border border-white/10 rounded-xl p-6 inline-block">
              <p class="text-slate-400 text-sm">
                <svg class="w-4 h-4 inline-block mr-1 text-amber-400" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd"/></svg>
                Serious roles only. All postings are manually reviewed. Entry-level, casual, and admin roles are not accepted.
              </p>
            </div>
          </div>
        </div>
        
        <!-- Footer -->
        <div class="bg-slate-900 border-t border-slate-800">
          <div class="max-w-5xl mx-auto px-8 py-8">
            <div class="flex items-center justify-between">
              <div class="flex items-center space-x-3">
                <div class="w-8 h-8 bg-violet-600 rounded-lg flex items-center justify-center">
                  <svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 13.255A23.931 23.931 0 0112 15c-3.183 0-6.22-.62-9-1.745M16 6V4a2 2 0 00-2-2h-4a2 2 0 00-2 2v2m4 6h.01M5 20h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"/></svg>
                </div>
                <span class="font-semibold text-white">Get Listings Talent Exchange</span>
              </div>
              <p class="text-sm text-slate-500">Questions? Email <a href="mailto:talent@getlistings.com.au" class="text-slate-400 hover:text-white underline">talent@getlistings.com.au</a></p>
            </div>
          </div>
        </div>
        
      </div>
      <!-- END TALENT EXCHANGE PAGE -->
      
      <!-- HELP & SUPPORT PAGE -->
      <div id="page-help" class="page hidden flex-1 overflow-auto bg-white">
        
        <!-- Header -->
        <div class="bg-gradient-to-r from-green-600 to-emerald-600 text-white">
          <div class="max-w-4xl mx-auto px-8 py-12">
            <div class="flex items-center space-x-3 mb-4">
              <div class="w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center">
                <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>
              </div>
              <div>
                <h1 class="text-3xl font-bold">Help & Support Guide</h1>
                <p class="text-green-100">Everything you need to get the most from Get Listings</p>
              </div>
            </div>
          </div>
        </div>
        
        <!-- Quick Navigation -->
        <div class="border-b border-gray-200 bg-gray-50 sticky top-0 z-10">
          <div class="max-w-4xl mx-auto px-8">
            <div class="flex space-x-1 overflow-x-auto py-3 scrollbar-hide">
              <button onclick="scrollToHelpSection('help-welcome')" class="px-4 py-2 text-sm font-medium text-gray-600 hover:text-gray-900 hover:bg-white rounded-lg whitespace-nowrap transition-colors">Welcome</button>
              <button onclick="scrollToHelpSection('help-how-it-works')" class="px-4 py-2 text-sm font-medium text-gray-600 hover:text-gray-900 hover:bg-white rounded-lg whitespace-nowrap transition-colors">How It Works</button>
              <button onclick="scrollToHelpSection('help-getting-started')" class="px-4 py-2 text-sm font-medium text-gray-600 hover:text-gray-900 hover:bg-white rounded-lg whitespace-nowrap transition-colors">Getting Started</button>
              <button onclick="scrollToHelpSection('help-sections')" class="px-4 py-2 text-sm font-medium text-gray-600 hover:text-gray-900 hover:bg-white rounded-lg whitespace-nowrap transition-colors">App Sections</button>
              <button onclick="scrollToHelpSection('help-success')" class="px-4 py-2 text-sm font-medium text-gray-600 hover:text-gray-900 hover:bg-white rounded-lg whitespace-nowrap transition-colors">Using It Well</button>
              <button onclick="scrollToHelpSection('help-faq')" class="px-4 py-2 text-sm font-medium text-gray-600 hover:text-gray-900 hover:bg-white rounded-lg whitespace-nowrap transition-colors">Common Questions</button>
              <button onclick="scrollToHelpSection('help-non-tech')" class="px-4 py-2 text-sm font-medium text-gray-600 hover:text-gray-900 hover:bg-white rounded-lg whitespace-nowrap transition-colors">For Non-Tech Users</button>
              <button onclick="scrollToHelpSection('help-contact')" class="px-4 py-2 text-sm font-medium text-gray-600 hover:text-gray-900 hover:bg-white rounded-lg whitespace-nowrap transition-colors">Contact Support</button>
            </div>
          </div>
        </div>
        
        <!-- Content -->
        <div class="max-w-4xl mx-auto px-8 py-12">
          
          <!-- Section 1: Welcome -->
          <section id="help-welcome" class="mb-16">
            <div class="flex items-center space-x-3 mb-6">
              <div class="w-10 h-10 bg-green-100 rounded-xl flex items-center justify-center">
                <span class="text-green-600 font-bold text-lg">1</span>
              </div>
              <h2 class="text-2xl font-bold text-gray-900">Welcome to Get Listings</h2>
            </div>
            
            <div class="prose prose-gray max-w-none">
              <div class="bg-green-50 border border-green-100 rounded-2xl p-6 mb-8">
                <h3 class="text-lg font-semibold text-gray-900 mb-3 flex items-center">
                  <svg class="w-5 h-5 text-green-600 mr-2" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/></svg>
                  What is Get Listings?
                </h3>
                <p class="text-gray-700 leading-relaxed mb-0">
                  Get Listings helps you identify homeowners who may be thinking about selling â€” before they've listed with anyone. It's like having an early warning system for your suburbs, so you can reach out at the right time and be the first agent they speak to.
                </p>
              </div>
              
              <h3 class="text-lg font-semibold text-gray-900 mb-3">What problem does this solve?</h3>
              <p class="text-gray-600 leading-relaxed mb-6">
                Most agents find out about sellers too late â€” after they've already chosen an agent, or when the property is already on the market. Get Listings watches for signals that suggest someone might be ready to sell, and brings those opportunities to you earlier.
              </p>
              
              <h3 class="text-lg font-semibold text-gray-900 mb-3">Why does Get Listings exist?</h3>
              <p class="text-gray-600 leading-relaxed mb-6">
                We built this because great agents shouldn't have to rely on luck or door-knocking alone. You deserve better tools â€” ones that work in the background while you focus on relationships and selling.
              </p>
              
              <div class="bg-amber-50 border border-amber-100 rounded-2xl p-6">
                <h3 class="text-lg font-semibold text-gray-900 mb-3 flex items-center">
                  <svg class="w-5 h-5 text-amber-600 mr-2" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"/></svg>
                  A few things to keep in mind
                </h3>
                <ul class="space-y-2 text-gray-700 mb-0">
                  <li class="flex items-start">
                    <svg class="w-5 h-5 text-amber-500 mr-2 mt-0.5 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/></svg>
                    <span><strong>You can't break anything.</strong> Feel free to click around and explore. Nothing you do here is permanent or irreversible.</span>
                  </li>
                  <li class="flex items-start">
                    <svg class="w-5 h-5 text-amber-500 mr-2 mt-0.5 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/></svg>
                    <span><strong>You don't need to use every feature.</strong> Start with one or two things that make sense for you. You can explore more later.</span>
                  </li>
                  <li class="flex items-start">
                    <svg class="w-5 h-5 text-amber-500 mr-2 mt-0.5 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/></svg>
                    <span><strong>Small, consistent use works.</strong> Even checking in for 5 minutes a few times a week can make a real difference.</span>
                  </li>
                </ul>
              </div>
            </div>
          </section>
          
          <!-- Section 2: How It Works -->
          <section id="help-how-it-works" class="mb-16">
            <div class="flex items-center space-x-3 mb-6">
              <div class="w-10 h-10 bg-green-100 rounded-xl flex items-center justify-center">
                <span class="text-green-600 font-bold text-lg">2</span>
              </div>
              <h2 class="text-2xl font-bold text-gray-900">How Get Listings Works</h2>
            </div>
            
            <div class="prose prose-gray max-w-none">
              <p class="text-gray-600 leading-relaxed mb-6">
                Here's the simple version of what happens behind the scenes:
              </p>
              
              <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-8">
                <div class="bg-white border border-gray-200 rounded-xl p-5">
                  <div class="flex items-center space-x-3 mb-3">
                    <div class="w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center">
                      <span class="text-blue-600 font-bold">1</span>
                    </div>
                    <h4 class="font-semibold text-gray-900">We watch your suburbs</h4>
                  </div>
                  <p class="text-sm text-gray-600 mb-0">You tell us which suburbs you work in. We monitor those areas for activity that might indicate a seller.</p>
                </div>
                
                <div class="bg-white border border-gray-200 rounded-xl p-5">
                  <div class="flex items-center space-x-3 mb-3">
                    <div class="w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center">
                      <span class="text-blue-600 font-bold">2</span>
                    </div>
                    <h4 class="font-semibold text-gray-900">We spot the signals</h4>
                  </div>
                  <p class="text-sm text-gray-600 mb-0">Things like property searches, valuation requests, listing changes, and other behaviours that suggest someone might sell.</p>
                </div>
                
                <div class="bg-white border border-gray-200 rounded-xl p-5">
                  <div class="flex items-center space-x-3 mb-3">
                    <div class="w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center">
                      <span class="text-blue-600 font-bold">3</span>
                    </div>
                    <h4 class="font-semibold text-gray-900">Opportunities come to you</h4>
                  </div>
                  <p class="text-sm text-gray-600 mb-0">We show you the properties and people worth paying attention to â€” ranked by how likely they are to sell soon.</p>
                </div>
                
                <div class="bg-white border border-gray-200 rounded-xl p-5">
                  <div class="flex items-center space-x-3 mb-3">
                    <div class="w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center">
                      <span class="text-blue-600 font-bold">4</span>
                    </div>
                    <h4 class="font-semibold text-gray-900">You decide what to do</h4>
                  </div>
                  <p class="text-sm text-gray-600 mb-0">You choose which leads to reach out to, how to contact them, and when. Get Listings gives you the information â€” you make the call.</p>
                </div>
              </div>
              
              <div class="bg-slate-50 border border-slate-200 rounded-2xl p-6">
                <h4 class="font-semibold text-gray-900 mb-2">Think of it like this:</h4>
                <p class="text-gray-600 mb-0">
                  Imagine having a really good assistant who spends all day watching your suburbs, reading the signs, and handing you a list of "these people are worth a call." That's what Get Listings does â€” quietly, in the background, every day.
                </p>
              </div>
            </div>
          </section>
          
          <!-- Section 3: Getting Started -->
          <section id="help-getting-started" class="mb-16">
            <div class="flex items-center space-x-3 mb-6">
              <div class="w-10 h-10 bg-green-100 rounded-xl flex items-center justify-center">
                <span class="text-green-600 font-bold text-lg">3</span>
              </div>
              <h2 class="text-2xl font-bold text-gray-900">Getting Started</h2>
            </div>
            
            <div class="prose prose-gray max-w-none">
              <p class="text-gray-600 leading-relaxed mb-6">
                Here's what to do in your first few minutes with Get Listings.
              </p>
              
              <h3 class="text-lg font-semibold text-gray-900 mb-4">Step 1: Log in</h3>
              <div class="bg-white border border-gray-200 rounded-xl p-5 mb-6">
                <ol class="space-y-3 text-gray-600 mb-0">
                  <li class="flex items-start">
                    <span class="w-6 h-6 bg-gray-100 rounded-full flex items-center justify-center text-sm font-medium text-gray-600 mr-3 mt-0.5 flex-shrink-0">1</span>
                    <span>Open Get Listings in your web browser (on your computer or phone)</span>
                  </li>
                  <li class="flex items-start">
                    <span class="w-6 h-6 bg-gray-100 rounded-full flex items-center justify-center text-sm font-medium text-gray-600 mr-3 mt-0.5 flex-shrink-0">2</span>
                    <span>Enter your mobile number when prompted</span>
                  </li>
                  <li class="flex items-start">
                    <span class="w-6 h-6 bg-gray-100 rounded-full flex items-center justify-center text-sm font-medium text-gray-600 mr-3 mt-0.5 flex-shrink-0">3</span>
                    <span>You'll receive a code via SMS â€” enter it to log in</span>
                  </li>
                  <li class="flex items-start">
                    <span class="w-6 h-6 bg-gray-100 rounded-full flex items-center justify-center text-sm font-medium text-gray-600 mr-3 mt-0.5 flex-shrink-0">4</span>
                    <span>That's it â€” you're in. No password to remember.</span>
                  </li>
                </ol>
              </div>
              
              <h3 class="text-lg font-semibold text-gray-900 mb-4">Step 2: Look at your Dashboard</h3>
              <p class="text-gray-600 leading-relaxed mb-4">
                When you log in, you'll land on your <strong>Dashboard</strong>. This is your home base. It shows you:
              </p>
              <ul class="space-y-2 text-gray-600 mb-6">
                <li class="flex items-start">
                  <svg class="w-5 h-5 text-green-500 mr-2 mt-0.5 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/></svg>
                  <span>Your key numbers (leads unlocked, opportunities created, etc.)</span>
                </li>
                <li class="flex items-start">
                  <svg class="w-5 h-5 text-green-500 mr-2 mt-0.5 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/></svg>
                  <span>Your hottest leads â€” the ones most likely to sell soon</span>
                </li>
                <li class="flex items-start">
                  <svg class="w-5 h-5 text-green-500 mr-2 mt-0.5 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/></svg>
                  <span>Recent activity and listings about to expire</span>
                </li>
              </ul>
              
              <h3 class="text-lg font-semibold text-gray-900 mb-4">Step 3: Check your Seller Scores</h3>
              <p class="text-gray-600 leading-relaxed mb-4">
                Click on <strong>"Seller Scores"</strong> in the left menu. This is where you'll find a list of properties in your suburbs, ranked by how likely the owner is to sell.
              </p>
              <p class="text-gray-600 leading-relaxed mb-6">
                The higher the score, the more signals we've seen that suggest they might be ready to move.
              </p>
              
              <div class="bg-blue-50 border border-blue-100 rounded-2xl p-6 mb-6">
                <h4 class="font-semibold text-gray-900 mb-2 flex items-center">
                  <svg class="w-5 h-5 text-blue-600 mr-2" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"/></svg>
                  Your first 5â€“10 minutes
                </h4>
                <p class="text-gray-700 mb-3">
                  Don't try to learn everything at once. In your first session, just:
                </p>
                <ol class="space-y-1 text-gray-700 mb-0">
                  <li>1. Look at your Dashboard</li>
                  <li>2. Browse the Seller Scores list</li>
                  <li>3. Click on one or two leads to see what information is available</li>
                </ol>
              </div>
              
              <div class="bg-amber-50 border border-amber-100 rounded-2xl p-6">
                <h4 class="font-semibold text-gray-900 mb-2">What NOT to worry about right now:</h4>
                <ul class="space-y-1 text-gray-700 mb-0">
                  <li>â€¢ You don't need to set up anything complicated</li>
                  <li>â€¢ You don't need to connect other systems</li>
                  <li>â€¢ You don't need to change any settings</li>
                  <li>â€¢ Nothing is "locked in" â€” you can always adjust later</li>
                </ul>
              </div>
            </div>
          </section>
          
          <!-- Section 4: Main Sections -->
          <section id="help-sections" class="mb-16">
            <div class="flex items-center space-x-3 mb-6">
              <div class="w-10 h-10 bg-green-100 rounded-xl flex items-center justify-center">
                <span class="text-green-600 font-bold text-lg">4</span>
              </div>
              <h2 class="text-2xl font-bold text-gray-900">Understanding Each Section</h2>
            </div>
            
            <div class="prose prose-gray max-w-none">
              <p class="text-gray-600 leading-relaxed mb-8">
                Here's a plain-English explanation of each part of the app and what you can do with it.
              </p>
              
              <!-- Dashboard -->
              <div class="bg-white border border-gray-200 rounded-xl p-6 mb-6">
                <div class="flex items-start space-x-4">
                  <div class="w-10 h-10 bg-primary/10 rounded-xl flex items-center justify-center flex-shrink-0">
                    <svg class="w-5 h-5 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 5a1 1 0 011-1h14a1 1 0 011 1v2a1 1 0 01-1 1H5a1 1 0 01-1-1V5zM4 13a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H5a1 1 0 01-1-1v-6zM16 13a1 1 0 011-1h2a1 1 0 011 1v6a1 1 0 01-1 1h-2a1 1 0 01-1-1v-6z"/></svg>
                  </div>
                  <div class="flex-1">
                    <h3 class="text-lg font-semibold text-gray-900 mb-2">Dashboard</h3>
                    <p class="text-gray-600 mb-3"><strong>What it is:</strong> Your home screen. A quick overview of what's happening in your suburbs.</p>
                    <p class="text-gray-600 mb-3"><strong>Why it matters:</strong> It helps you see at a glance whether there's anything urgent to look at today.</p>
                    <p class="text-gray-600 mb-0"><strong>What to do:</strong> Check it when you log in. Look at your hottest leads and any expiring listings.</p>
                  </div>
                </div>
              </div>
              
              <!-- Seller Scores -->
              <div class="bg-white border border-gray-200 rounded-xl p-6 mb-6">
                <div class="flex items-start space-x-4">
                  <div class="w-10 h-10 bg-primary/10 rounded-xl flex items-center justify-center flex-shrink-0">
                    <svg class="w-5 h-5 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0z"/></svg>
                  </div>
                  <div class="flex-1">
                    <h3 class="text-lg font-semibold text-gray-900 mb-2">Seller Scores</h3>
                    <p class="text-gray-600 mb-3"><strong>What it is:</strong> A ranked list of properties in your suburbs, scored by how likely the owner is to sell.</p>
                    <p class="text-gray-600 mb-3"><strong>Why it matters:</strong> This is your prospecting list. Instead of guessing who to call, you can focus on the people showing real signs of intent.</p>
                    <p class="text-gray-600 mb-0"><strong>What to do:</strong> Review the top leads regularly. Click on any lead to see more details before reaching out.</p>
                  </div>
                </div>
              </div>
              
              <!-- Hottest Leads -->
              <div class="bg-white border border-gray-200 rounded-xl p-6 mb-6">
                <div class="flex items-start space-x-4">
                  <div class="w-10 h-10 bg-orange-100 rounded-xl flex items-center justify-center flex-shrink-0">
                    <svg class="w-5 h-5 text-orange-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 18.657A8 8 0 016.343 7.343S7 9 9 10c0-2 .5-5 2.986-7C14 5 16.09 5.777 17.656 7.343A7.975 7.975 0 0120 13a7.975 7.975 0 01-2.343 5.657z"/></svg>
                  </div>
                  <div class="flex-1">
                    <h3 class="text-lg font-semibold text-gray-900 mb-2">Hottest Leads</h3>
                    <p class="text-gray-600 mb-3"><strong>What it is:</strong> The leads showing the strongest signals right now â€” the ones worth prioritising.</p>
                    <p class="text-gray-600 mb-3"><strong>Why it matters:</strong> If you only have time to reach out to a few people, these are the ones to focus on.</p>
                    <p class="text-gray-600 mb-0"><strong>What to do:</strong> Check this list regularly. These are your highest-priority opportunities.</p>
                  </div>
                </div>
              </div>
              
              <!-- Expiring Listings -->
              <div class="bg-white border border-gray-200 rounded-xl p-6 mb-6">
                <div class="flex items-start space-x-4">
                  <div class="w-10 h-10 bg-red-100 rounded-xl flex items-center justify-center flex-shrink-0">
                    <svg class="w-5 h-5 text-red-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>
                  </div>
                  <div class="flex-1">
                    <h3 class="text-lg font-semibold text-gray-900 mb-2">Expiring Listings</h3>
                    <p class="text-gray-600 mb-3"><strong>What it is:</strong> Properties currently on the market with another agent, where the listing period is about to end.</p>
                    <p class="text-gray-600 mb-3"><strong>Why it matters:</strong> These sellers have already committed to selling â€” they just haven't sold yet. They may be open to a fresh approach.</p>
                    <p class="text-gray-600 mb-0"><strong>What to do:</strong> Review these leads and consider a respectful, professional outreach.</p>
                  </div>
                </div>
              </div>
              
              <!-- Valuation Requests -->
              <div class="bg-white border border-gray-200 rounded-xl p-6 mb-6">
                <div class="flex items-start space-x-4">
                  <div class="w-10 h-10 bg-yellow-100 rounded-xl flex items-center justify-center flex-shrink-0">
                    <svg class="w-5 h-5 text-yellow-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"/></svg>
                  </div>
                  <div class="flex-1">
                    <h3 class="text-lg font-semibold text-gray-900 mb-2">Valuation Requests (PRO)</h3>
                    <p class="text-gray-600 mb-3"><strong>What it is:</strong> Homeowners who have actively requested a property valuation or appraisal.</p>
                    <p class="text-gray-600 mb-3"><strong>Why it matters:</strong> These people have raised their hand. They're not just thinking about selling â€” they're actively seeking information.</p>
                    <p class="text-gray-600 mb-0"><strong>What to do:</strong> Follow up quickly. These are warm leads who expect to hear from an agent.</p>
                  </div>
                </div>
              </div>
              
              <!-- Lead Pipeline -->
              <div class="bg-white border border-gray-200 rounded-xl p-6 mb-6">
                <div class="flex items-start space-x-4">
                  <div class="w-10 h-10 bg-purple-100 rounded-xl flex items-center justify-center flex-shrink-0">
                    <svg class="w-5 h-5 text-purple-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 17V7m0 10a2 2 0 01-2 2H5a2 2 0 01-2-2V7a2 2 0 012-2h2a2 2 0 012 2m0 10a2 2 0 002 2h2a2 2 0 002-2M9 7a2 2 0 012-2h2a2 2 0 012 2m0 10V7m0 10a2 2 0 002 2h2a2 2 0 002-2V7a2 2 0 00-2-2h-2a2 2 0 00-2 2"/></svg>
                  </div>
                  <div class="flex-1">
                    <h3 class="text-lg font-semibold text-gray-900 mb-2">Lead Pipeline</h3>
                    <p class="text-gray-600 mb-3"><strong>What it is:</strong> A visual way to track where each of your leads is in the process â€” from first contact to listing.</p>
                    <p class="text-gray-600 mb-3"><strong>Why it matters:</strong> It helps you stay organised and make sure no opportunity falls through the cracks.</p>
                    <p class="text-gray-600 mb-0"><strong>What to do:</strong> As you work with leads, move them through the stages to keep track of progress.</p>
                  </div>
                </div>
              </div>
              
              <!-- Settings -->
              <div class="bg-white border border-gray-200 rounded-xl p-6">
                <div class="flex items-start space-x-4">
                  <div class="w-10 h-10 bg-gray-100 rounded-xl flex items-center justify-center flex-shrink-0">
                    <svg class="w-5 h-5 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"/></svg>
                  </div>
                  <div class="flex-1">
                    <h3 class="text-lg font-semibold text-gray-900 mb-2">Settings</h3>
                    <p class="text-gray-600 mb-3"><strong>What it is:</strong> Where you manage your profile, suburbs, and account preferences.</p>
                    <p class="text-gray-600 mb-3"><strong>Why it matters:</strong> This is where you can update your contact details, change which suburbs you're subscribed to, and adjust your preferences.</p>
                    <p class="text-gray-600 mb-0"><strong>What to do:</strong> Check this if you need to update anything. Otherwise, you can leave it alone.</p>
                  </div>
                </div>
              </div>
            </div>
          </section>
          
          <!-- Section 5: Using It Successfully -->
          <section id="help-success" class="mb-16">
            <div class="flex items-center space-x-3 mb-6">
              <div class="w-10 h-10 bg-green-100 rounded-xl flex items-center justify-center">
                <span class="text-green-600 font-bold text-lg">5</span>
              </div>
              <h2 class="text-2xl font-bold text-gray-900">How to Use This Successfully</h2>
            </div>
            
            <div class="prose prose-gray max-w-none">
              <p class="text-gray-600 leading-relaxed mb-6">
                You don't need to be a power user to get results. Here's a simple routine that works.
              </p>
              
              <div class="bg-green-50 border border-green-100 rounded-2xl p-6 mb-8">
                <h3 class="text-lg font-semibold text-gray-900 mb-4">A simple weekly routine</h3>
                
                <div class="space-y-4">
                  <div class="flex items-start space-x-4">
                    <div class="w-8 h-8 bg-white rounded-lg flex items-center justify-center flex-shrink-0 shadow-sm">
                      <span class="text-green-600 font-bold">M</span>
                    </div>
                    <div>
                      <h4 class="font-medium text-gray-900">Monday â€” Review your dashboard</h4>
                      <p class="text-sm text-gray-600 mb-0">Check what's new. Look at your hottest leads and any expiring listings.</p>
                    </div>
                  </div>
                  
                  <div class="flex items-start space-x-4">
                    <div class="w-8 h-8 bg-white rounded-lg flex items-center justify-center flex-shrink-0 shadow-sm">
                      <span class="text-green-600 font-bold">W</span>
                    </div>
                    <div>
                      <h4 class="font-medium text-gray-900">Wednesday â€” Take action on 2â€“3 leads</h4>
                      <p class="text-sm text-gray-600 mb-0">Pick a few high-scoring leads and reach out. A call, a letter, or a door knock.</p>
                    </div>
                  </div>
                  
                  <div class="flex items-start space-x-4">
                    <div class="w-8 h-8 bg-white rounded-lg flex items-center justify-center flex-shrink-0 shadow-sm">
                      <span class="text-green-600 font-bold">F</span>
                    </div>
                    <div>
                      <h4 class="font-medium text-gray-900">Friday â€” Update your pipeline</h4>
                      <p class="text-sm text-gray-600 mb-0">Move any leads you've contacted through the stages. Note any progress or next steps.</p>
                    </div>
                  </div>
                </div>
              </div>
              
              <h3 class="text-lg font-semibold text-gray-900 mb-4">What successful agents do</h3>
              <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-8">
                <div class="bg-white border border-gray-200 rounded-xl p-4">
                  <div class="flex items-center space-x-2 mb-2">
                    <svg class="w-5 h-5 text-green-500" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/></svg>
                    <h4 class="font-medium text-gray-900">They check in regularly</h4>
                  </div>
                  <p class="text-sm text-gray-600 mb-0">Even 5 minutes, 3 times a week is enough to stay on top of new opportunities.</p>
                </div>
                
                <div class="bg-white border border-gray-200 rounded-xl p-4">
                  <div class="flex items-center space-x-2 mb-2">
                    <svg class="w-5 h-5 text-green-500" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/></svg>
                    <h4 class="font-medium text-gray-900">They take action</h4>
                  </div>
                  <p class="text-sm text-gray-600 mb-0">The information is only valuable if you use it. Even one call per week adds up.</p>
                </div>
                
                <div class="bg-white border border-gray-200 rounded-xl p-4">
                  <div class="flex items-center space-x-2 mb-2">
                    <svg class="w-5 h-5 text-green-500" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/></svg>
                    <h4 class="font-medium text-gray-900">They focus, not scatter</h4>
                  </div>
                  <p class="text-sm text-gray-600 mb-0">They don't try to contact 50 people. They focus on the best 5â€“10 leads each week.</p>
                </div>
                
                <div class="bg-white border border-gray-200 rounded-xl p-4">
                  <div class="flex items-center space-x-2 mb-2">
                    <svg class="w-5 h-5 text-green-500" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/></svg>
                    <h4 class="font-medium text-gray-900">They stay consistent</h4>
                  </div>
                  <p class="text-sm text-gray-600 mb-0">Results come from doing the right things repeatedly, not from one big effort.</p>
                </div>
              </div>
              
              <div class="bg-slate-50 border border-slate-200 rounded-2xl p-6">
                <h4 class="font-semibold text-gray-900 mb-2">Remember:</h4>
                <p class="text-gray-700 mb-0">
                  <strong>Consistency beats complexity.</strong> You don't need to use every feature. You don't need to be perfect. Just check in, take action, and repeat.
                </p>
              </div>
            </div>
          </section>
          
          <!-- Section 6: FAQ -->
          <section id="help-faq" class="mb-16">
            <div class="flex items-center space-x-3 mb-6">
              <div class="w-10 h-10 bg-green-100 rounded-xl flex items-center justify-center">
                <span class="text-green-600 font-bold text-lg">6</span>
              </div>
              <h2 class="text-2xl font-bold text-gray-900">Common Questions</h2>
            </div>
            
            <div class="space-y-4">
              <!-- FAQ 1 -->
              <div class="bg-white border border-gray-200 rounded-xl overflow-hidden">
                <details class="group">
                  <summary class="flex items-center justify-between p-5 cursor-pointer hover:bg-gray-50">
                    <span class="font-medium text-gray-900">Can I change my suburbs?</span>
                    <svg class="w-5 h-5 text-gray-400 group-open:rotate-180 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/></svg>
                  </summary>
                  <div class="px-5 pb-5 text-gray-600">
                    <p class="mb-0">Yes. You can update your suburb preferences in the Settings area. Depending on your plan, you may have a limit on how many suburbs you can monitor at once, but you can swap them whenever you need to.</p>
                  </div>
                </details>
              </div>
              
              <!-- FAQ 2 -->
              <div class="bg-white border border-gray-200 rounded-xl overflow-hidden">
                <details class="group">
                  <summary class="flex items-center justify-between p-5 cursor-pointer hover:bg-gray-50">
                    <span class="font-medium text-gray-900">How often can I change my suburbs?</span>
                    <svg class="w-5 h-5 text-gray-400 group-open:rotate-180 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/></svg>
                  </summary>
                  <div class="px-5 pb-5 text-gray-600">
                    <p class="mb-0">You can change them as often as you like. There's no lock-in or waiting period. Just go to Settings and update your list.</p>
                  </div>
                </details>
              </div>
              
              <!-- FAQ 3 -->
              <div class="bg-white border border-gray-200 rounded-xl overflow-hidden">
                <details class="group">
                  <summary class="flex items-center justify-between p-5 cursor-pointer hover:bg-gray-50">
                    <span class="font-medium text-gray-900">How do I update my contact details?</span>
                    <svg class="w-5 h-5 text-gray-400 group-open:rotate-180 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/></svg>
                  </summary>
                  <div class="px-5 pb-5 text-gray-600">
                    <p class="mb-0">Go to Settings (in the left menu), then click on "Edit Profile." You can update your name, email, phone number, and profile photo there.</p>
                  </div>
                </details>
              </div>
              
              <!-- FAQ 4 -->
              <div class="bg-white border border-gray-200 rounded-xl overflow-hidden">
                <details class="group">
                  <summary class="flex items-center justify-between p-5 cursor-pointer hover:bg-gray-50">
                    <span class="font-medium text-gray-900">What if I make a mistake?</span>
                    <svg class="w-5 h-5 text-gray-400 group-open:rotate-180 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/></svg>
                  </summary>
                  <div class="px-5 pb-5 text-gray-600">
                    <p class="mb-0">Don't worry â€” there's very little you can do that can't be undone. If you move a lead to the wrong stage, just move it back. If you unlock the wrong lead, it's not a problem. And if you're ever unsure, just contact support.</p>
                  </div>
                </details>
              </div>
              
              <!-- FAQ 5 -->
              <div class="bg-white border border-gray-200 rounded-xl overflow-hidden">
                <details class="group">
                  <summary class="flex items-center justify-between p-5 cursor-pointer hover:bg-gray-50">
                    <span class="font-medium text-gray-900">What if I forget my password?</span>
                    <svg class="w-5 h-5 text-gray-400 group-open:rotate-180 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/></svg>
                  </summary>
                  <div class="px-5 pb-5 text-gray-600">
                    <p class="mb-0">You don't have a password to remember. Get Listings uses your mobile phone number to log you in. Just enter your number, and we'll send you a code via SMS. Easy.</p>
                  </div>
                </details>
              </div>
              
              <!-- FAQ 6 -->
              <div class="bg-white border border-gray-200 rounded-xl overflow-hidden">
                <details class="group">
                  <summary class="flex items-center justify-between p-5 cursor-pointer hover:bg-gray-50">
                    <span class="font-medium text-gray-900">Do I need to check this every day?</span>
                    <svg class="w-5 h-5 text-gray-400 group-open:rotate-180 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/></svg>
                  </summary>
                  <div class="px-5 pb-5 text-gray-600">
                    <p class="mb-0">No. Checking 2â€“3 times per week is plenty for most agents. Some people prefer a quick daily check (5 minutes in the morning), but it's not required. Find a rhythm that works for you.</p>
                  </div>
                </details>
              </div>
              
              <!-- FAQ 7 -->
              <div class="bg-white border border-gray-200 rounded-xl overflow-hidden">
                <details class="group">
                  <summary class="flex items-center justify-between p-5 cursor-pointer hover:bg-gray-50">
                    <span class="font-medium text-gray-900">Will this replace my CRM?</span>
                    <svg class="w-5 h-5 text-gray-400 group-open:rotate-180 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/></svg>
                  </summary>
                  <div class="px-5 pb-5 text-gray-600">
                    <p class="mb-0">Not necessarily. Get Listings is designed to find new opportunities â€” people who might be ready to sell. If you already use a CRM (a system for managing your contacts and deals), you can use both. Get Listings feeds you leads; your CRM helps you manage them.</p>
                  </div>
                </details>
              </div>
              
              <!-- FAQ 8 -->
              <div class="bg-white border border-gray-200 rounded-xl overflow-hidden">
                <details class="group">
                  <summary class="flex items-center justify-between p-5 cursor-pointer hover:bg-gray-50">
                    <span class="font-medium text-gray-900">Can other agents see my leads?</span>
                    <svg class="w-5 h-5 text-gray-400 group-open:rotate-180 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/></svg>
                  </summary>
                  <div class="px-5 pb-5 text-gray-600">
                    <p class="mb-0">No. Your account is private. Other agents cannot see which leads you've unlocked, which suburbs you're watching, or any of your activity. Everything you do in Get Listings is confidential to you.</p>
                  </div>
                </details>
              </div>
              
              <!-- FAQ 9 -->
              <div class="bg-white border border-gray-200 rounded-xl overflow-hidden">
                <details class="group">
                  <summary class="flex items-center justify-between p-5 cursor-pointer hover:bg-gray-50">
                    <span class="font-medium text-gray-900">How long before I see results?</span>
                    <svg class="w-5 h-5 text-gray-400 group-open:rotate-180 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/></svg>
                  </summary>
                  <div class="px-5 pb-5 text-gray-600">
                    <p class="mb-0">It depends on your market and how often you take action. Some agents get appraisals within the first few weeks. For others, it takes a month or two. The key is consistency â€” checking in regularly and reaching out to leads. The more you use it, the more opportunities you'll find.</p>
                  </div>
                </details>
              </div>
            </div>
          </section>
          
          <!-- Section 7: For Non-Tech Users -->
          <section id="help-non-tech" class="mb-16">
            <div class="flex items-center space-x-3 mb-6">
              <div class="w-10 h-10 bg-green-100 rounded-xl flex items-center justify-center">
                <span class="text-green-600 font-bold text-lg">7</span>
              </div>
              <h2 class="text-2xl font-bold text-gray-900">For Agents Who "Don't Like Technology"</h2>
            </div>
            
            <div class="prose prose-gray max-w-none">
              <div class="bg-blue-50 border border-blue-100 rounded-2xl p-6 mb-8">
                <p class="text-lg text-gray-700 mb-0">
                  If you've made it this far and you're thinking <em>"This sounds good, but I'm not great with technology"</em> â€” this section is for you.
                </p>
              </div>
              
              <h3 class="text-lg font-semibold text-gray-900 mb-4">First, let's be clear:</h3>
              <p class="text-gray-600 leading-relaxed mb-6">
                You don't need to be tech-savvy to use Get Listings. If you can check email and browse the internet, you already have the skills you need.
              </p>
              
              <h3 class="text-lg font-semibold text-gray-900 mb-4">This is not a complicated system.</h3>
              <p class="text-gray-600 leading-relaxed mb-6">
                There are no integrations to set up. No data to import. No complicated settings to configure. You log in, you look at the leads, you decide who to call. That's it.
              </p>
              
              <div class="bg-white border border-gray-200 rounded-xl p-6 mb-8">
                <h3 class="text-lg font-semibold text-gray-900 mb-4">If technology stresses you out, try this:</h3>
                <ol class="space-y-4 text-gray-700 mb-0">
                  <li class="flex items-start">
                    <span class="w-7 h-7 bg-green-100 rounded-full flex items-center justify-center text-sm font-bold text-green-600 mr-3 mt-0.5 flex-shrink-0">1</span>
                    <div>
                      <strong>Pick ONE feature to start with.</strong>
                      <p class="text-sm text-gray-600 mb-0">We suggest Seller Scores. Just look at that list once or twice a week.</p>
                    </div>
                  </li>
                  <li class="flex items-start">
                    <span class="w-7 h-7 bg-green-100 rounded-full flex items-center justify-center text-sm font-bold text-green-600 mr-3 mt-0.5 flex-shrink-0">2</span>
                    <div>
                      <strong>Ignore everything else for now.</strong>
                      <p class="text-sm text-gray-600 mb-0">The other features will still be there when you're ready. No rush.</p>
                    </div>
                  </li>
                  <li class="flex items-start">
                    <span class="w-7 h-7 bg-green-100 rounded-full flex items-center justify-center text-sm font-bold text-green-600 mr-3 mt-0.5 flex-shrink-0">3</span>
                    <div>
                      <strong>Set a reminder.</strong>
                      <p class="text-sm text-gray-600 mb-0">Put a recurring reminder in your calendar: "Check Get Listings" â€” Monday, Wednesday, Friday. 5 minutes each.</p>
                    </div>
                  </li>
                  <li class="flex items-start">
                    <span class="w-7 h-7 bg-green-100 rounded-full flex items-center justify-center text-sm font-bold text-green-600 mr-3 mt-0.5 flex-shrink-0">4</span>
                    <div>
                      <strong>Ask for help if you need it.</strong>
                      <p class="text-sm text-gray-600 mb-0">Our support team is patient and friendly. You won't be judged. We're here to help.</p>
                    </div>
                  </li>
                </ol>
              </div>
              
              <div class="bg-amber-50 border border-amber-100 rounded-2xl p-6 mb-8">
                <h4 class="font-semibold text-gray-900 mb-2 flex items-center">
                  <svg class="w-5 h-5 text-amber-600 mr-2" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"/></svg>
                  What Get Listings replaces:
                </h4>
                <p class="text-gray-700 mb-0">
                  Think of this as replacing guesswork with clarity. Instead of wondering "who should I call today?" â€” you now have a list of people worth calling, based on real signals. That's not technology. That's just better information.
                </p>
              </div>
              
              <p class="text-gray-600 leading-relaxed">
                You've spent years building experience and relationships. This tool is here to support that â€” not replace it. Your instincts still matter. We just help you point them in the right direction.
              </p>
            </div>
          </section>
          
          <!-- Section 8: Contact Support -->
          <section id="help-contact" class="mb-8">
            <div class="flex items-center space-x-3 mb-6">
              <div class="w-10 h-10 bg-green-100 rounded-xl flex items-center justify-center">
                <span class="text-green-600 font-bold text-lg">8</span>
              </div>
              <h2 class="text-2xl font-bold text-gray-900">Getting Help & Support</h2>
            </div>
            
            <div class="prose prose-gray max-w-none">
              <p class="text-gray-600 leading-relaxed mb-6">
                If you ever get stuck, confused, or just want to ask a question â€” we're here for you.
              </p>
              
              <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
                <div class="bg-white border border-gray-200 rounded-xl p-6">
                  <div class="w-12 h-12 bg-green-100 rounded-xl flex items-center justify-center mb-4">
                    <svg class="w-6 h-6 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"/></svg>
                  </div>
                  <h3 class="text-lg font-semibold text-gray-900 mb-2">Email Support</h3>
                  <p class="text-gray-600 text-sm mb-3">For general questions, feedback, or help with your account.</p>
                  <a href="mailto:support@getlistings.com.au" class="text-green-600 font-medium hover:text-green-700">support@getlistings.com.au</a>
                </div>
                
                <div class="bg-white border border-gray-200 rounded-xl p-6">
                  <div class="w-12 h-12 bg-blue-100 rounded-xl flex items-center justify-center mb-4">
                    <svg class="w-6 h-6 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"/></svg>
                  </div>
                  <h3 class="text-lg font-semibold text-gray-900 mb-2">Phone Support</h3>
                  <p class="text-gray-600 text-sm mb-3">For urgent issues or if you'd prefer to talk to a real person.</p>
                  <a href="tel:1300123456" class="text-blue-600 font-medium hover:text-blue-700">1300 123 456</a>
                  <p class="text-xs text-gray-500 mt-1">Monâ€“Fri, 9amâ€“5pm AEST</p>
                </div>
              </div>
              
              <h3 class="text-lg font-semibold text-gray-900 mb-4">When should you reach out?</h3>
              <ul class="space-y-2 text-gray-600 mb-8">
                <li class="flex items-start">
                  <svg class="w-5 h-5 text-green-500 mr-2 mt-0.5 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/></svg>
                  <span>If something isn't working the way you expect</span>
                </li>
                <li class="flex items-start">
                  <svg class="w-5 h-5 text-green-500 mr-2 mt-0.5 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/></svg>
                  <span>If you're confused about a feature or how to use it</span>
                </li>
                <li class="flex items-start">
                  <svg class="w-5 h-5 text-green-500 mr-2 mt-0.5 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/></svg>
                  <span>If you have a suggestion or feedback</span>
                </li>
                <li class="flex items-start">
                  <svg class="w-5 h-5 text-green-500 mr-2 mt-0.5 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/></svg>
                  <span>If you need help with your account or billing</span>
                </li>
                <li class="flex items-start">
                  <svg class="w-5 h-5 text-green-500 mr-2 mt-0.5 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/></svg>
                  <span>If you just want to ask a question â€” any question</span>
                </li>
              </ul>
              
              <div class="bg-green-50 border border-green-100 rounded-2xl p-6">
                <h4 class="font-semibold text-gray-900 mb-2 flex items-center">
                  <svg class="w-5 h-5 text-green-600 mr-2" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/></svg>
                  One last thing:
                </h4>
                <p class="text-gray-700 mb-0">
                  <strong>You're not expected to figure everything out on your own.</strong> We want you to succeed, and we're genuinely happy to help. Don't hesitate to reach out â€” even for small things.
                </p>
              </div>
            </div>
          </section>
          
        </div>
        
        <!-- Footer -->
        <div class="border-t border-gray-200 bg-gray-50">
          <div class="max-w-4xl mx-auto px-8 py-8">
            <div class="flex items-center justify-between">
              <div class="flex items-center space-x-3">
                <div class="w-8 h-8 bg-green-600 rounded-lg flex items-center justify-center">
                  <svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>
                </div>
                <span class="font-semibold text-gray-900">Get Listings Help Centre</span>
              </div>
              <p class="text-sm text-gray-500">Last updated: January 2026</p>
            </div>
          </div>
        </div>
        
      </div>
      <!-- END HELP & SUPPORT PAGE -->
      
    </main>
  </div>
  
  <!-- Settings Detail Panels (outside #app for proper z-index) -->
  
  <!-- API Connection Panel -->
  <div id="settings-detail-api" class="settings-detail hidden fixed inset-0 bg-gray-50 z-50 overflow-auto">
    <div class="bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between">
      <div class="flex items-center">
        <button onclick="hideSettingsDetail()" class="p-2 hover:bg-gray-100 rounded-lg mr-3">
          <svg class="w-5 h-5 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/></svg>
        </button>
        <h1 class="text-xl font-bold text-gray-900">API Connection</h1>
      </div>
      <button onclick="saveApiSettings()" class="px-4 py-2 bg-primary text-white rounded-lg hover:bg-red-700 font-medium">Save & Connect</button>
    </div>
    <div class="p-6 max-w-4xl mx-auto">
      <div id="api-status-card" class="bg-white rounded-xl border border-gray-200 p-6 mb-6">
        <div class="flex items-center justify-between">
          <div class="flex items-center space-x-3">
            <div id="api-status-icon" class="w-10 h-10 bg-gray-100 rounded-full flex items-center justify-center">
              <svg class="w-5 h-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.111 16.404a5.5 5.5 0 017.778 0M12 20h.01m-7.08-7.071c3.904-3.905 10.236-3.905 14.141 0M1.394 9.393c5.857-5.857 15.355-5.857 21.213 0"/></svg>
            </div>
            <div>
              <p class="font-semibold text-gray-900" id="api-status-text">Not Connected</p>
              <p class="text-sm text-gray-500" id="api-status-detail">Enter your credentials to connect</p>
            </div>
          </div>
          <button onclick="testApiConnection()" class="px-3 py-1.5 text-sm border border-gray-300 rounded-lg hover:bg-gray-50">Test Connection</button>
        </div>
      </div>
      <div class="bg-white rounded-xl border border-gray-200 p-6 mb-6">
        <h3 class="font-semibold text-gray-900 mb-2">Login with Phone</h3>
        <p class="text-sm text-gray-500 mb-4">Enter your phone number to receive a one-time password via SMS</p>
        <div class="space-y-4">
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-1">Phone Number</label>
            <div class="flex space-x-2">
              <input type="tel" id="api-phone" class="flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary" placeholder="+61 412 345 678">
              <button onclick="sendOTP()" id="btn-send-otp" class="px-4 py-2 bg-primary text-white rounded-lg hover:bg-red-700 font-medium whitespace-nowrap">Send OTP</button>
            </div>
          </div>
          <div id="otp-section" class="hidden">
            <label class="block text-sm font-medium text-gray-700 mb-1">Enter OTP Code</label>
            <div class="flex space-x-2">
              <input type="text" id="api-otp" class="flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary text-center text-2xl tracking-widest" placeholder="------" maxlength="6">
              <button onclick="verifyOTP()" class="px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 font-medium">Verify</button>
            </div>
            <p class="text-xs text-gray-500 mt-2">Enter the 6-digit code sent to your phone</p>
          </div>
        </div>
      </div>
      <div class="bg-white rounded-xl border border-gray-200 p-6 mb-6">
        <div class="flex items-center justify-between mb-2">
          <h3 class="font-semibold text-gray-900">Manual Token (Advanced)</h3>
          <button onclick="toggleManualToken()" class="text-sm text-primary hover:underline">Show</button>
        </div>
        <p class="text-sm text-gray-500 mb-4">For developers: paste a JWT token directly</p>
        <div id="manual-token-section" class="hidden">
          <textarea id="api-token" rows="3" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary font-mono text-xs" placeholder="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."></textarea>
        </div>
      </div>
      <div class="bg-slate-50 rounded-xl border border-slate-200 p-6 mb-6">
        <h3 class="font-semibold text-slate-700 mb-3">Available API Endpoints</h3>
        <div class="space-y-2 text-sm">
          <div class="flex items-center space-x-2"><span class="w-2 h-2 bg-green-500 rounded-full"></span><span class="text-slate-600">Get All My Leads</span></div>
          <div class="flex items-center space-x-2"><span class="w-2 h-2 bg-green-500 rounded-full"></span><span class="text-slate-600">Get Inbox / Chat Data</span></div>
          <div class="flex items-center space-x-2"><span class="w-2 h-2 bg-green-500 rounded-full"></span><span class="text-slate-600">Get Expired Listings</span></div>
          <div class="flex items-center space-x-2"><span class="w-2 h-2 bg-green-500 rounded-full"></span><span class="text-slate-600">Dashboard Metrics</span></div>
          <div class="flex items-center space-x-2"><span class="w-2 h-2 bg-green-500 rounded-full"></span><span class="text-slate-600">User Analytics</span></div>
          <div class="flex items-center space-x-2"><span class="w-2 h-2 bg-green-500 rounded-full"></span><span class="text-slate-600">My Suburbs List</span></div>
        </div>
      </div>
      
      <!-- Test API Section -->
      <div class="bg-white rounded-xl border border-gray-200 p-6">
        <h3 class="font-semibold text-gray-900 mb-3">Test API Endpoints</h3>
        <p class="text-sm text-gray-500 mb-4">Click a button to fetch real data from the API</p>
        <div class="grid grid-cols-3 gap-3 mb-4">
          <button onclick="testApiEndpoint('leads')" class="px-3 py-2 bg-blue-50 text-blue-700 rounded-lg text-sm font-medium hover:bg-blue-100">ðŸ“‹ Get Leads</button>
          <button onclick="testApiEndpoint('inbox')" class="px-3 py-2 bg-purple-50 text-purple-700 rounded-lg text-sm font-medium hover:bg-purple-100">ðŸ’¬ Get Inbox</button>
          <button onclick="testApiEndpoint('expired')" class="px-3 py-2 bg-orange-50 text-orange-700 rounded-lg text-sm font-medium hover:bg-orange-100">â° Expired Listings</button>
          <button onclick="testApiEndpoint('dashboard')" class="px-3 py-2 bg-green-50 text-green-700 rounded-lg text-sm font-medium hover:bg-green-100">ðŸ“Š Dashboard</button>
          <button onclick="testApiEndpoint('analytics')" class="px-3 py-2 bg-pink-50 text-pink-700 rounded-lg text-sm font-medium hover:bg-pink-100">ðŸ“ˆ Analytics</button>
          <button onclick="testApiEndpoint('suburbs')" class="px-3 py-2 bg-amber-50 text-amber-700 rounded-lg text-sm font-medium hover:bg-amber-100">ðŸ˜ï¸ My Suburbs</button>
        </div>
        <div id="api-test-result" class="hidden">
          <div class="flex items-center justify-between mb-2">
            <span class="text-sm font-medium text-gray-700">Response:</span>
            <button onclick="document.getElementById('api-test-result').classList.add('hidden')" class="text-xs text-gray-400 hover:text-gray-600">Clear</button>
          </div>
          <pre id="api-test-output" class="bg-gray-900 text-green-400 p-4 rounded-lg text-xs overflow-auto max-h-64 font-mono"></pre>
        </div>
      </div>
    </div>
  </div>
  
  <!-- Agent Persona Panel -->
  <div id="settings-detail-persona" class="settings-detail hidden fixed inset-0 bg-gray-50 z-50 overflow-auto">
    <div class="bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between">
      <div class="flex items-center">
        <button onclick="hideSettingsDetail()" class="p-2 hover:bg-gray-100 rounded-lg mr-3">
          <svg class="w-5 h-5 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/></svg>
        </button>
        <h1 class="text-xl font-bold text-gray-900">Agent Persona</h1>
      </div>
      <button onclick="saveAgentPersona()" class="px-4 py-2 bg-primary text-white rounded-lg hover:bg-red-700 font-medium">Save Changes</button>
    </div>
    <div class="p-6 max-w-4xl mx-auto">
      <div class="bg-white rounded-xl border border-gray-200 p-6 mb-6">
        <h3 class="font-semibold text-gray-900 mb-4">Your Details</h3>
        <div class="space-y-4">
          <div class="grid grid-cols-2 gap-4">
            <div><label class="block text-sm font-medium text-gray-700 mb-1">First Name</label><input type="text" id="persona-first-name" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary" placeholder="John"></div>
            <div><label class="block text-sm font-medium text-gray-700 mb-1">Last Name</label><input type="text" id="persona-last-name" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary" placeholder="Smith"></div>
          </div>
          <div><label class="block text-sm font-medium text-gray-700 mb-1">Mobile Number</label><input type="tel" id="persona-mobile" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary" placeholder="0412 345 678"></div>
          <div><label class="block text-sm font-medium text-gray-700 mb-1">Email</label><input type="email" id="persona-email" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary" placeholder="john@agency.com.au"></div>
        </div>
      </div>
      <div class="bg-white rounded-xl border border-gray-200 p-6 mb-6">
        <h3 class="font-semibold text-gray-900 mb-4">Agency Details</h3>
        <div class="space-y-4">
          <div><label class="block text-sm font-medium text-gray-700 mb-1">Agency Name</label><input type="text" id="persona-agency" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary" placeholder="Ray White Springfield"></div>
          <div><label class="block text-sm font-medium text-gray-700 mb-1">Position / Title</label><input type="text" id="persona-title" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary" placeholder="Sales Agent"></div>
        </div>
      </div>
      <div class="bg-white rounded-xl border border-gray-200 p-6 mb-6">
        <h3 class="font-semibold text-gray-900 mb-4">Online Profiles</h3>
        <div class="space-y-4">
          <div><label class="block text-sm font-medium text-gray-700 mb-1">RealEstate.com.au Profile URL</label><input type="url" id="persona-rea-url" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary" placeholder="https://www.realestate.com.au/agent/john-smith-123456"></div>
          <div><label class="block text-sm font-medium text-gray-700 mb-1">Domain.com.au Profile URL</label><input type="url" id="persona-domain-url" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary" placeholder="https://www.domain.com.au/real-estate-agent/john-smith-123456"></div>
          <div><label class="block text-sm font-medium text-gray-700 mb-1">Personal Website (optional)</label><input type="url" id="persona-website" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary" placeholder="https://www.johnsmithrealestate.com.au"></div>
        </div>
      </div>
      <div class="bg-white rounded-xl border border-gray-200 p-6 mb-6">
        <h3 class="font-semibold text-gray-900 mb-2">Communication Personality</h3>
        <p class="text-sm text-gray-500 mb-4">Choose how you want your scripts and responses to sound</p>
        <div class="grid grid-cols-2 gap-3">
          <label class="relative cursor-pointer"><input type="radio" name="persona-style" value="professional" class="peer sr-only" checked><div class="p-4 border-2 border-gray-200 rounded-xl peer-checked:border-primary peer-checked:bg-primary/5 hover:bg-gray-50 transition-colors"><div class="flex items-center space-x-3 mb-2"><span class="text-2xl">ðŸ‘”</span><span class="font-semibold text-gray-900">Professional</span></div><p class="text-sm text-gray-500">Formal, polished, and business-focused language</p></div></label>
          <label class="relative cursor-pointer"><input type="radio" name="persona-style" value="friendly" class="peer sr-only"><div class="p-4 border-2 border-gray-200 rounded-xl peer-checked:border-primary peer-checked:bg-primary/5 hover:bg-gray-50 transition-colors"><div class="flex items-center space-x-3 mb-2"><span class="text-2xl">ðŸ˜Š</span><span class="font-semibold text-gray-900">Friendly</span></div><p class="text-sm text-gray-500">Warm, approachable, and conversational tone</p></div></label>
          <label class="relative cursor-pointer"><input type="radio" name="persona-style" value="casual" class="peer sr-only"><div class="p-4 border-2 border-gray-200 rounded-xl peer-checked:border-primary peer-checked:bg-primary/5 hover:bg-gray-50 transition-colors"><div class="flex items-center space-x-3 mb-2"><span class="text-2xl">ðŸ¤™</span><span class="font-semibold text-gray-900">Casual</span></div><p class="text-sm text-gray-500">Relaxed, down-to-earth, and easygoing</p></div></label>
          <label class="relative cursor-pointer"><input type="radio" name="persona-style" value="energetic" class="peer sr-only"><div class="p-4 border-2 border-gray-200 rounded-xl peer-checked:border-primary peer-checked:bg-primary/5 hover:bg-gray-50 transition-colors"><div class="flex items-center space-x-3 mb-2"><span class="text-2xl">âš¡</span><span class="font-semibold text-gray-900">Energetic</span></div><p class="text-sm text-gray-500">Enthusiastic, upbeat, and high-energy</p></div></label>
        </div>
      </div>
      <div class="bg-white rounded-xl border border-gray-200 p-6 mb-6">
        <h3 class="font-semibold text-gray-900 mb-2">About You</h3>
        <p class="text-sm text-gray-500 mb-4">A short bio that can be used in communications</p>
        <textarea id="persona-bio" rows="4" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary" placeholder="I'm a local real estate agent with 10 years of experience..."></textarea>
      </div>
    </div>
  </div>
  
  <!-- Personal Details Panel -->
  <div id="settings-detail-profile" class="settings-detail hidden fixed inset-0 bg-gray-50 z-50 overflow-auto">
    <div class="bg-white border-b border-gray-200 px-6 py-4 flex items-center">
      <button onclick="hideSettingsDetail()" class="p-2 hover:bg-gray-100 rounded-lg mr-3">
        <svg class="w-5 h-5 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/></svg>
      </button>
      <h1 class="text-xl font-bold text-gray-900">Personal Details</h1>
    </div>
    <div class="p-6 max-w-4xl mx-auto">
      <div class="bg-white rounded-xl border border-gray-200 p-6 mb-6">
        <div class="flex items-center space-x-6">
          <div class="relative">
            <div class="w-24 h-24 bg-primary rounded-full flex items-center justify-center text-white text-3xl font-bold">JD</div>
          </div>
          <div class="flex-1">
            <h2 class="text-xl font-bold text-gray-900">John Davidson</h2>
            <p class="text-gray-500">Senior Agent â€¢ Sydney Office</p>
            <div class="flex items-center space-x-4 mt-3">
              <span class="px-3 py-1 bg-green-100 text-green-700 text-sm font-medium rounded-full">PRO Member</span>
              <span class="text-sm text-gray-500">Member since Jan 2024</span>
            </div>
          </div>
        </div>
      </div>
      <div class="grid grid-cols-3 gap-4 mb-6">
        <div class="bg-white rounded-xl border border-gray-200 p-4 text-center"><p class="text-3xl font-bold text-primary">127</p><p class="text-sm text-gray-500 mt-1">Leads Unlocked</p></div>
        <div class="bg-white rounded-xl border border-gray-200 p-4 text-center"><p class="text-3xl font-bold text-primary">23</p><p class="text-sm text-gray-500 mt-1">Listings Won</p></div>
        <div class="bg-white rounded-xl border border-gray-200 p-4 text-center"><p class="text-3xl font-bold text-primary">#12</p><p class="text-sm text-gray-500 mt-1">Your Ranking</p></div>
      </div>
      <div class="bg-white rounded-xl border border-gray-200 p-6">
        <h3 class="font-semibold text-gray-900 mb-4">Account Details</h3>
        <div class="space-y-4">
          <div class="grid grid-cols-2 gap-4">
            <div><label class="block text-sm text-gray-500 mb-1">First Name</label><input type="text" value="John" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-primary"></div>
            <div><label class="block text-sm text-gray-500 mb-1">Last Name</label><input type="text" value="Davidson" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-primary"></div>
          </div>
          <div><label class="block text-sm text-gray-500 mb-1">Email</label><input type="email" value="john.davidson@agency.com.au" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-primary"></div>
          <div><label class="block text-sm text-gray-500 mb-1">Phone</label><input type="tel" value="0412 345 678" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-primary"></div>
          <div><label class="block text-sm text-gray-500 mb-1">Agency</label><input type="text" value="Sydney Premium Real Estate" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-primary"></div>
        </div>
        <button class="mt-6 w-full py-3 bg-primary text-white rounded-xl font-medium hover:bg-primary-dark transition-colors">Save Changes</button>
      </div>
    </div>
  </div>
  
  <!-- Time Zone Panel -->
  <div id="settings-detail-timezone" class="settings-detail hidden fixed inset-0 bg-gray-50 z-50 overflow-auto">
    <div class="bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between">
      <div class="flex items-center">
        <button onclick="hideSettingsDetail()" class="p-2 hover:bg-gray-100 rounded-lg mr-3">
          <svg class="w-5 h-5 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/></svg>
        </button>
        <h1 class="text-xl font-bold text-gray-900">Time Zone Settings</h1>
      </div>
      <button onclick="saveTimezone()" class="px-4 py-2 bg-primary text-white rounded-lg hover:bg-red-700 font-medium">Save Changes</button>
    </div>
    <div class="p-6 max-w-2xl mx-auto">
      <div class="bg-white rounded-xl border border-gray-200 p-6 mb-6">
        <h3 class="font-semibold text-gray-900 mb-2">Your Time Zone</h3>
        <p class="text-sm text-gray-500 mb-4">This affects when you receive notifications and how times are displayed.</p>
        
        <div class="space-y-4">
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-2">Select Time Zone</label>
            <select id="timezone-select" class="w-full px-3 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary text-gray-900">
              <optgroup label="Australia">
                <option value="Australia/Sydney">Sydney, Melbourne, Canberra (AEST/AEDT)</option>
                <option value="Australia/Brisbane">Brisbane (AEST)</option>
                <option value="Australia/Adelaide">Adelaide (ACST/ACDT)</option>
                <option value="Australia/Darwin">Darwin (ACST)</option>
                <option value="Australia/Perth">Perth (AWST)</option>
                <option value="Australia/Hobart">Hobart (AEST/AEDT)</option>
              </optgroup>
              <optgroup label="New Zealand">
                <option value="Pacific/Auckland">Auckland, Wellington (NZST/NZDT)</option>
              </optgroup>
              <optgroup label="Asia">
                <option value="Asia/Singapore">Singapore (SGT)</option>
                <option value="Asia/Hong_Kong">Hong Kong (HKT)</option>
                <option value="Asia/Tokyo">Tokyo (JST)</option>
                <option value="Asia/Shanghai">Shanghai, Beijing (CST)</option>
                <option value="Asia/Dubai">Dubai (GST)</option>
              </optgroup>
              <optgroup label="Europe">
                <option value="Europe/London">London (GMT/BST)</option>
                <option value="Europe/Paris">Paris, Berlin, Rome (CET/CEST)</option>
              </optgroup>
              <optgroup label="Americas">
                <option value="America/New_York">New York (EST/EDT)</option>
                <option value="America/Los_Angeles">Los Angeles (PST/PDT)</option>
                <option value="America/Chicago">Chicago (CST/CDT)</option>
              </optgroup>
            </select>
          </div>
          
          <div class="bg-sky-50 border border-sky-200 rounded-lg p-4">
            <div class="flex items-center space-x-3">
              <svg class="w-5 h-5 text-sky-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>
              <div>
                <p class="text-sm font-medium text-sky-900">Current time in selected zone</p>
                <p class="text-lg font-bold text-sky-700" id="timezone-current-time">--:-- --</p>
              </div>
            </div>
          </div>
        </div>
      </div>
      
      <div class="bg-white rounded-xl border border-gray-200 p-6">
        <h3 class="font-semibold text-gray-900 mb-2">How this affects you</h3>
        <ul class="text-sm text-gray-600 space-y-2">
          <li class="flex items-start space-x-2">
            <svg class="w-4 h-4 text-green-500 mt-0.5 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/></svg>
            <span>Notifications will be sent during appropriate hours in your timezone</span>
          </li>
          <li class="flex items-start space-x-2">
            <svg class="w-4 h-4 text-green-500 mt-0.5 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/></svg>
            <span>Lead activity times will display in your local time</span>
          </li>
          <li class="flex items-start space-x-2">
            <svg class="w-4 h-4 text-green-500 mt-0.5 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/></svg>
            <span>SMS and email campaigns will be scheduled according to your timezone</span>
          </li>
        </ul>
      </div>
    </div>
  </div>
  
  <!-- Subscription Panel -->
  <div id="settings-detail-subscription" class="settings-detail hidden fixed inset-0 bg-gray-50 z-50 overflow-auto">
    <div class="bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between">
      <div class="flex items-center">
        <button onclick="hideSettingsDetail()" class="p-2 hover:bg-gray-100 rounded-lg mr-3">
          <svg class="w-5 h-5 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/></svg>
        </button>
        <h1 class="text-xl font-bold text-gray-900">Billing & Subscription</h1>
      </div>
      <div class="flex items-center space-x-2">
        <span id="billing-toggle-label" class="text-sm text-gray-600">Monthly</span>
        <button onclick="toggleBillingCycle()" id="billing-toggle" class="relative w-12 h-6 bg-gray-200 rounded-full transition-colors">
          <span id="billing-toggle-dot" class="absolute left-1 top-1 w-4 h-4 bg-white rounded-full shadow transition-transform"></span>
        </button>
        <span class="text-sm font-medium text-green-600">Annual <span class="text-xs">(save 20%)</span></span>
      </div>
    </div>
    
    <div class="p-6 max-w-6xl mx-auto">
      
      <!-- Current Plan Status Bar -->
      <div class="bg-gradient-to-r from-green-600 to-emerald-600 rounded-2xl p-6 text-white mb-8">
        <div class="flex items-center justify-between">
          <div class="flex items-center space-x-4">
            <div class="w-14 h-14 bg-white/20 rounded-xl flex items-center justify-center">
              <svg class="w-7 h-7 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z"/></svg>
            </div>
            <div>
              <p class="text-sm text-green-100">Your Current Plan</p>
              <p class="text-2xl font-bold">Professional</p>
              <p class="text-sm text-green-100 mt-1">Billed monthly â€¢ Next billing: Feb 9, 2026</p>
            </div>
          </div>
          <div class="text-right">
            <p class="text-4xl font-bold">$349</p>
            <p class="text-sm text-green-100">/month</p>
            <p class="text-xs text-green-200 mt-1">or $279/mo billed annually</p>
          </div>
        </div>
        
        <!-- Usage Stats -->
        <div class="grid grid-cols-4 gap-4 mt-6 pt-6 border-t border-white/20">
          <div>
            <p class="text-sm text-green-100">Suburbs</p>
            <p class="text-xl font-bold">4 <span class="text-sm font-normal text-green-200">/ 5</span></p>
            <div class="w-full bg-white/20 rounded-full h-1.5 mt-1"><div class="bg-white rounded-full h-1.5" style="width: 80%"></div></div>
          </div>
          <div>
            <p class="text-sm text-green-100">Lead Unlocks</p>
            <p class="text-xl font-bold">52 <span class="text-sm font-normal text-green-200">/ 75</span></p>
            <div class="w-full bg-white/20 rounded-full h-1.5 mt-1"><div class="bg-white rounded-full h-1.5" style="width: 69%"></div></div>
          </div>
          <div>
            <p class="text-sm text-green-100">SMS Credits</p>
            <p class="text-xl font-bold">67 <span class="text-sm font-normal text-green-200">/ 100</span></p>
            <div class="w-full bg-white/20 rounded-full h-1.5 mt-1"><div class="bg-white rounded-full h-1.5" style="width: 67%"></div></div>
          </div>
          <div>
            <p class="text-sm text-green-100">Email Credits</p>
            <p class="text-xl font-bold">312 <span class="text-sm font-normal text-green-200">/ 500</span></p>
            <div class="w-full bg-white/20 rounded-full h-1.5 mt-1"><div class="bg-white rounded-full h-1.5" style="width: 62%"></div></div>
          </div>
        </div>
      </div>
      
      <!-- ROI Callout -->
      <div class="bg-amber-50 border border-amber-200 rounded-xl p-4 mb-8 flex items-center justify-between">
        <div class="flex items-center space-x-3">
          <div class="w-10 h-10 bg-amber-100 rounded-lg flex items-center justify-center">
            <svg class="w-5 h-5 text-amber-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"/></svg>
          </div>
          <div>
            <p class="font-semibold text-gray-900">You've won 3 listings this quarter using Get Listings</p>
            <p class="text-sm text-gray-600">That's approximately <strong>$67,500</strong> in commission vs <strong>$1,047</strong> subscription cost. <span class="text-green-600 font-medium">64x ROI</span></p>
          </div>
        </div>
        <button class="text-sm text-amber-700 hover:text-amber-800 font-medium">View Activity â†’</button>
      </div>
      
      <!-- Plans Section -->
      <h2 class="text-xl font-bold text-gray-900 mb-2">Choose Your Plan</h2>
      <p class="text-gray-600 mb-6">All plans include access to Seller Scores, Hottest Leads, and Pipeline management.</p>
      
      <div class="grid grid-cols-4 gap-5 mb-10">
        
        <!-- Starter Plan -->
        <div class="bg-white rounded-2xl border border-gray-200 p-6 relative">
          <div class="mb-4">
            <h3 class="text-lg font-bold text-gray-900">Starter</h3>
            <p class="text-sm text-gray-500">For agents getting started</p>
          </div>
          <div class="mb-6">
            <span class="text-3xl font-bold text-gray-900" data-monthly="149" data-annual="119">$149</span>
            <span class="text-gray-500">/month</span>
          </div>
          <ul class="space-y-3 mb-6 text-sm">
            <li class="flex items-center space-x-2"><svg class="w-4 h-4 text-green-500 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/></svg><span class="text-gray-700"><strong>2</strong> suburbs</span></li>
            <li class="flex items-center space-x-2"><svg class="w-4 h-4 text-green-500 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/></svg><span class="text-gray-700"><strong>50</strong> Seller Score leads/mo</span></li>
            <li class="flex items-center space-x-2"><svg class="w-4 h-4 text-green-500 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/></svg><span class="text-gray-700"><strong>10</strong> Hottest Leads/mo</span></li>
            <li class="flex items-center space-x-2"><svg class="w-4 h-4 text-green-500 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/></svg><span class="text-gray-700"><strong>20</strong> lead unlocks/mo</span></li>
            <li class="flex items-center space-x-2"><svg class="w-4 h-4 text-gray-300 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"/></svg><span class="text-gray-400">No SMS/Email credits</span></li>
            <li class="flex items-center space-x-2"><svg class="w-4 h-4 text-green-500 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/></svg><span class="text-gray-700">Email support</span></li>
          </ul>
          <button onclick="selectPlan('starter')" class="w-full py-3 border border-gray-300 text-gray-700 rounded-xl font-medium hover:bg-gray-50 transition-colors">Downgrade</button>
        </div>
        
        <!-- Professional Plan (Current) -->
        <div class="bg-white rounded-2xl border-2 border-green-500 p-6 relative shadow-lg">
          <div class="absolute -top-3 left-1/2 -translate-x-1/2 px-3 py-1 bg-green-500 text-white text-xs font-bold rounded-full">CURRENT PLAN</div>
          <div class="mb-4">
            <h3 class="text-lg font-bold text-gray-900">Professional</h3>
            <p class="text-sm text-gray-500">For serious agents</p>
          </div>
          <div class="mb-6">
            <span class="text-3xl font-bold text-gray-900" data-monthly="349" data-annual="279">$349</span>
            <span class="text-gray-500">/month</span>
          </div>
          <ul class="space-y-3 mb-6 text-sm">
            <li class="flex items-center space-x-2"><svg class="w-4 h-4 text-green-500 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/></svg><span class="text-gray-700"><strong>5</strong> suburbs</span></li>
            <li class="flex items-center space-x-2"><svg class="w-4 h-4 text-green-500 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/></svg><span class="text-gray-700"><strong>Unlimited</strong> Seller Scores</span></li>
            <li class="flex items-center space-x-2"><svg class="w-4 h-4 text-green-500 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/></svg><span class="text-gray-700"><strong>50</strong> Hottest Leads/mo</span></li>
            <li class="flex items-center space-x-2"><svg class="w-4 h-4 text-green-500 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/></svg><span class="text-gray-700"><strong>75</strong> lead unlocks/mo</span></li>
            <li class="flex items-center space-x-2"><svg class="w-4 h-4 text-green-500 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/></svg><span class="text-gray-700"><strong>100</strong> SMS + <strong>500</strong> emails</span></li>
            <li class="flex items-center space-x-2"><svg class="w-4 h-4 text-green-500 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/></svg><span class="text-gray-700">Priority support + chat</span></li>
            <li class="flex items-center space-x-2"><svg class="w-4 h-4 text-green-500 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/></svg><span class="text-gray-700">Monthly strategy call</span></li>
          </ul>
          <button disabled class="w-full py-3 bg-green-100 text-green-700 rounded-xl font-medium cursor-default">Current Plan</button>
        </div>
        
        <!-- Growth Plan -->
        <div class="bg-white rounded-2xl border border-gray-200 p-6 relative">
          <div class="absolute -top-3 left-1/2 -translate-x-1/2 px-3 py-1 bg-blue-500 text-white text-xs font-bold rounded-full">RECOMMENDED</div>
          <div class="mb-4">
            <h3 class="text-lg font-bold text-gray-900">Growth</h3>
            <p class="text-sm text-gray-500">For top producers & teams</p>
          </div>
          <div class="mb-6">
            <span class="text-3xl font-bold text-gray-900" data-monthly="599" data-annual="479">$599</span>
            <span class="text-gray-500">/month</span>
          </div>
          <ul class="space-y-3 mb-6 text-sm">
            <li class="flex items-center space-x-2"><svg class="w-4 h-4 text-green-500 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/></svg><span class="text-gray-700"><strong>12</strong> suburbs</span></li>
            <li class="flex items-center space-x-2"><svg class="w-4 h-4 text-green-500 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/></svg><span class="text-gray-700"><strong>Unlimited</strong> everything</span></li>
            <li class="flex items-center space-x-2"><svg class="w-4 h-4 text-green-500 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/></svg><span class="text-gray-700"><strong>200</strong> lead unlocks/mo</span></li>
            <li class="flex items-center space-x-2"><svg class="w-4 h-4 text-green-500 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/></svg><span class="text-gray-700"><strong>300</strong> SMS + <strong>2,000</strong> emails</span></li>
            <li class="flex items-center space-x-2"><svg class="w-4 h-4 text-green-500 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/></svg><span class="text-gray-700"><strong>Up to 3</strong> team seats</span></li>
            <li class="flex items-center space-x-2"><svg class="w-4 h-4 text-green-500 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/></svg><span class="text-gray-700">Phone + priority support</span></li>
            <li class="flex items-center space-x-2"><svg class="w-4 h-4 text-green-500 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/></svg><span class="text-gray-700">Quarterly strategy review</span></li>
          </ul>
          <button onclick="selectPlan('growth')" class="w-full py-3 bg-blue-600 text-white rounded-xl font-medium hover:bg-blue-700 transition-colors">Upgrade â†’</button>
        </div>
        
        <!-- Agency Plan -->
        <div class="bg-gradient-to-br from-slate-800 to-slate-900 rounded-2xl p-6 relative text-white">
          <div class="mb-4">
            <h3 class="text-lg font-bold text-white">Agency</h3>
            <p class="text-sm text-slate-400">For offices & teams</p>
          </div>
          <div class="mb-6">
            <span class="text-3xl font-bold text-white" data-monthly="1499" data-annual="1199">$1,499</span>
            <span class="text-slate-400">/month</span>
          </div>
          <ul class="space-y-3 mb-6 text-sm">
            <li class="flex items-center space-x-2"><svg class="w-4 h-4 text-green-400 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/></svg><span class="text-slate-200"><strong>30</strong> suburbs</span></li>
            <li class="flex items-center space-x-2"><svg class="w-4 h-4 text-green-400 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/></svg><span class="text-slate-200"><strong>500</strong> lead unlocks/mo</span></li>
            <li class="flex items-center space-x-2"><svg class="w-4 h-4 text-green-400 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/></svg><span class="text-slate-200"><strong>1,000</strong> SMS + <strong>10,000</strong> emails</span></li>
            <li class="flex items-center space-x-2"><svg class="w-4 h-4 text-green-400 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/></svg><span class="text-slate-200"><strong>Up to 10</strong> team seats</span></li>
            <li class="flex items-center space-x-2"><svg class="w-4 h-4 text-green-400 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/></svg><span class="text-slate-200">Admin dashboard</span></li>
            <li class="flex items-center space-x-2"><svg class="w-4 h-4 text-green-400 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/></svg><span class="text-slate-200">Lead assignment & reporting</span></li>
            <li class="flex items-center space-x-2"><svg class="w-4 h-4 text-green-400 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/></svg><span class="text-slate-200">Dedicated account manager</span></li>
          </ul>
          <button onclick="selectPlan('agency')" class="w-full py-3 bg-white text-slate-900 rounded-xl font-medium hover:bg-gray-100 transition-colors">Contact Sales</button>
        </div>
        
      </div>
      
      <!-- Add-Ons Section -->
      <h2 class="text-xl font-bold text-gray-900 mb-2">Add-Ons & Extras</h2>
      <p class="text-gray-600 mb-6">Boost your plan with additional features. Add-ons can be added or removed at any time.</p>
      
      <div class="grid grid-cols-3 gap-5 mb-10">
        
        <!-- Extra Suburbs -->
        <div class="bg-white rounded-xl border border-gray-200 p-5">
          <div class="flex items-start justify-between mb-3">
            <div class="w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center">
              <svg class="w-5 h-5 text-purple-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"/></svg>
            </div>
            <span class="text-lg font-bold text-gray-900">$25<span class="text-sm font-normal text-gray-500">/suburb/mo</span></span>
          </div>
          <h3 class="font-semibold text-gray-900 mb-1">Extra Suburbs</h3>
          <p class="text-sm text-gray-600 mb-4">Expand your coverage beyond your plan limit. Bulk discount at 10+.</p>
          <button onclick="addAddon('suburbs')" class="w-full py-2.5 border border-gray-300 text-gray-700 rounded-lg text-sm font-medium hover:bg-gray-50 transition-colors">Add Suburbs</button>
        </div>
        
        <!-- Extra Unlocks -->
        <div class="bg-white rounded-xl border border-gray-200 p-5">
          <div class="flex items-start justify-between mb-3">
            <div class="w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center">
              <svg class="w-5 h-5 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 11V7a4 4 0 118 0m-4 8v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2z"/></svg>
            </div>
            <span class="text-lg font-bold text-gray-900">$49<span class="text-sm font-normal text-gray-500">/50 unlocks</span></span>
          </div>
          <h3 class="font-semibold text-gray-900 mb-1">Extra Unlocks</h3>
          <p class="text-sm text-gray-600 mb-4">Top up your lead unlocks. Credits never expire.</p>
          <button onclick="addAddon('unlocks')" class="w-full py-2.5 border border-gray-300 text-gray-700 rounded-lg text-sm font-medium hover:bg-gray-50 transition-colors">Buy Unlocks</button>
        </div>
        
        <!-- Extra SMS -->
        <div class="bg-white rounded-xl border border-gray-200 p-5">
          <div class="flex items-start justify-between mb-3">
            <div class="w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center">
              <svg class="w-5 h-5 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"/></svg>
            </div>
            <span class="text-lg font-bold text-gray-900">$29<span class="text-sm font-normal text-gray-500">/100 SMS</span></span>
          </div>
          <h3 class="font-semibold text-gray-900 mb-1">Extra SMS Credits</h3>
          <p class="text-sm text-gray-600 mb-4">Additional SMS credits for outreach. Never expire.</p>
          <button onclick="addAddon('sms')" class="w-full py-2.5 border border-gray-300 text-gray-700 rounded-lg text-sm font-medium hover:bg-gray-50 transition-colors">Buy SMS</button>
        </div>
        
        <!-- Exclusive Suburb -->
        <div class="bg-white rounded-xl border-2 border-amber-300 p-5 relative">
          <div class="absolute -top-2 right-4 px-2 py-0.5 bg-amber-400 text-amber-900 text-xs font-bold rounded">PREMIUM</div>
          <div class="flex items-start justify-between mb-3">
            <div class="w-10 h-10 bg-amber-100 rounded-lg flex items-center justify-center">
              <svg class="w-5 h-5 text-amber-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"/></svg>
            </div>
            <span class="text-lg font-bold text-gray-900">$299<span class="text-sm font-normal text-gray-500">/suburb/mo</span></span>
          </div>
          <h3 class="font-semibold text-gray-900 mb-1">Exclusive Suburb Lockout</h3>
          <p class="text-sm text-gray-600 mb-4">Lock out other agents. Only you receive leads from this suburb.</p>
          <button onclick="addAddon('exclusive')" class="w-full py-2.5 bg-amber-500 text-white rounded-lg text-sm font-medium hover:bg-amber-600 transition-colors">Request Exclusivity</button>
        </div>
        
        <!-- CRM Integration -->
        <div class="bg-white rounded-xl border border-gray-200 p-5">
          <div class="flex items-start justify-between mb-3">
            <div class="w-10 h-10 bg-indigo-100 rounded-lg flex items-center justify-center">
              <svg class="w-5 h-5 text-indigo-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4"/></svg>
            </div>
            <span class="text-lg font-bold text-gray-900">$99<span class="text-sm font-normal text-gray-500">/month</span></span>
          </div>
          <h3 class="font-semibold text-gray-900 mb-1">CRM Integration</h3>
          <p class="text-sm text-gray-600 mb-4">Zapier access + API. Push leads directly to your CRM.</p>
          <button onclick="addAddon('crm')" class="w-full py-2.5 border border-gray-300 text-gray-700 rounded-lg text-sm font-medium hover:bg-gray-50 transition-colors">Enable Integration</button>
        </div>
        
        <!-- White Label -->
        <div class="bg-white rounded-xl border border-gray-200 p-5">
          <div class="flex items-start justify-between mb-3">
            <div class="w-10 h-10 bg-slate-100 rounded-lg flex items-center justify-center">
              <svg class="w-5 h-5 text-slate-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01"/></svg>
            </div>
            <span class="text-lg font-bold text-gray-900">$499<span class="text-sm font-normal text-gray-500">/month</span></span>
          </div>
          <h3 class="font-semibold text-gray-900 mb-1">White Label Portal</h3>
          <p class="text-sm text-gray-600 mb-4">Your branding, your domain. For agencies & franchises.</p>
          <button onclick="addAddon('whitelabel')" class="w-full py-2.5 border border-gray-300 text-gray-700 rounded-lg text-sm font-medium hover:bg-gray-50 transition-colors">Contact Sales</button>
        </div>
        
      </div>
      
      <!-- Premium Done-For-You Section -->
      <div class="bg-gradient-to-r from-slate-800 to-slate-900 rounded-2xl p-8 mb-10">
        <div class="flex items-start justify-between">
          <div>
            <p class="text-slate-400 text-sm font-medium mb-2">PREMIUM DONE-FOR-YOU</p>
            <h2 class="text-2xl font-bold text-white mb-2">Want us to build your whole operation?</h2>
            <p class="text-slate-300 mb-4 max-w-xl">Launchpad is our agency-in-a-box program. We build your brand, website, funnels, and ad campaigns â€” and manage everything for you. Perfect for agents ready to go independent or scale to the next level.</p>
            <div class="flex items-center space-x-4">
              <button onclick="showPage('launchpad'); hideSettingsDetail();" class="px-6 py-3 bg-white text-slate-900 rounded-xl font-medium hover:bg-gray-100 transition-colors">Learn About Launchpad â†’</button>
              <button onclick="showPage('buyers'); hideSettingsDetail();" class="px-6 py-3 border border-white/30 text-white rounded-xl font-medium hover:bg-white/10 transition-colors">Buyer Demand Engine</button>
            </div>
          </div>
          <div class="text-right">
            <p class="text-slate-400 text-sm">Starting at</p>
            <p class="text-3xl font-bold text-white">$50,000</p>
            <p class="text-slate-400 text-sm">setup + management</p>
          </div>
        </div>
      </div>
      
      <!-- Billing & Payment Section -->
      <div class="grid grid-cols-2 gap-6 mb-10">
        
        <!-- Payment Method -->
        <div class="bg-white rounded-xl border border-gray-200 p-6">
          <h3 class="font-semibold text-gray-900 mb-4">Payment Method</h3>
          <div class="flex items-center justify-between p-4 bg-gray-50 rounded-lg mb-4">
            <div class="flex items-center space-x-3">
              <div class="w-12 h-8 bg-blue-600 rounded flex items-center justify-center">
                <span class="text-white text-xs font-bold">VISA</span>
              </div>
              <div>
                <p class="font-medium text-gray-900">â€¢â€¢â€¢â€¢ â€¢â€¢â€¢â€¢ â€¢â€¢â€¢â€¢ 4242</p>
                <p class="text-sm text-gray-500">Expires 12/27</p>
              </div>
            </div>
            <span class="text-xs bg-green-100 text-green-700 px-2 py-1 rounded-full font-medium">Default</span>
          </div>
          <button onclick="updatePaymentMethod()" class="w-full py-2.5 border border-gray-300 text-gray-700 rounded-lg text-sm font-medium hover:bg-gray-50 transition-colors">Update Payment Method</button>
        </div>
        
        <!-- Billing History -->
        <div class="bg-white rounded-xl border border-gray-200 p-6">
          <div class="flex items-center justify-between mb-4">
            <h3 class="font-semibold text-gray-900">Recent Invoices</h3>
            <button class="text-sm text-primary hover:underline">View All</button>
          </div>
          <div class="space-y-3">
            <div class="flex items-center justify-between py-2 border-b border-gray-100">
              <div>
                <p class="font-medium text-gray-900">Jan 9, 2026</p>
                <p class="text-sm text-gray-500">Professional Plan</p>
              </div>
              <div class="text-right">
                <p class="font-medium text-gray-900">$349.00</p>
                <span class="text-xs bg-green-100 text-green-700 px-2 py-0.5 rounded-full">Paid</span>
              </div>
            </div>
            <div class="flex items-center justify-between py-2 border-b border-gray-100">
              <div>
                <p class="font-medium text-gray-900">Dec 9, 2025</p>
                <p class="text-sm text-gray-500">Professional Plan</p>
              </div>
              <div class="text-right">
                <p class="font-medium text-gray-900">$349.00</p>
                <span class="text-xs bg-green-100 text-green-700 px-2 py-0.5 rounded-full">Paid</span>
              </div>
            </div>
            <div class="flex items-center justify-between py-2">
              <div>
                <p class="font-medium text-gray-900">Nov 9, 2025</p>
                <p class="text-sm text-gray-500">Professional Plan</p>
              </div>
              <div class="text-right">
                <p class="font-medium text-gray-900">$349.00</p>
                <span class="text-xs bg-green-100 text-green-700 px-2 py-0.5 rounded-full">Paid</span>
              </div>
            </div>
          </div>
        </div>
        
      </div>
      
      <!-- Save with Annual -->
      <div class="bg-green-50 border border-green-200 rounded-xl p-6 mb-10">
        <div class="flex items-center justify-between">
          <div class="flex items-center space-x-4">
            <div class="w-12 h-12 bg-green-100 rounded-xl flex items-center justify-center">
              <svg class="w-6 h-6 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>
            </div>
            <div>
              <h3 class="font-semibold text-gray-900">Switch to Annual Billing & Save $840/year</h3>
              <p class="text-sm text-gray-600">Lock in your rate and save 20%. That's 2+ months free.</p>
            </div>
          </div>
          <button onclick="switchToAnnual()" class="px-6 py-3 bg-green-600 text-white rounded-xl font-medium hover:bg-green-700 transition-colors">Switch to Annual</button>
        </div>
      </div>
      
      <!-- Cancel Section -->
      <div class="border-t border-gray-200 pt-6">
        <div class="flex items-center justify-between">
          <div>
            <p class="text-gray-500 text-sm">Need to make changes?</p>
            <p class="text-gray-400 text-xs">Downgrade, pause, or cancel anytime. No lock-in contracts.</p>
          </div>
          <div class="flex items-center space-x-4">
            <button onclick="pauseSubscription()" class="text-sm text-gray-600 hover:text-gray-800">Pause Subscription</button>
            <button onclick="cancelSubscription()" class="text-sm text-red-600 hover:text-red-700">Cancel Subscription</button>
          </div>
        </div>
      </div>
      
    </div>
  </div>
  
  <!-- Suburbs Panel -->
  <div id="settings-detail-suburbs" class="settings-detail hidden fixed inset-0 bg-gray-50 z-50 overflow-auto">
    <div class="bg-white border-b border-gray-200 px-6 py-4 flex items-center">
      <button onclick="hideSettingsDetail()" class="p-2 hover:bg-gray-100 rounded-lg mr-3">
        <svg class="w-5 h-5 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/></svg>
      </button>
      <h1 class="text-xl font-bold text-gray-900">Suburb Subscription</h1>
    </div>
    <div class="p-6 max-w-4xl mx-auto">
      <div class="bg-white rounded-xl border border-gray-200 p-6 mb-6">
        <h3 class="font-semibold text-gray-900 mb-4">Your Subscribed Suburbs</h3>
        <div class="flex flex-wrap gap-2 mb-4">
          <span class="inline-flex items-center px-3 py-2 bg-primary/10 text-primary rounded-lg text-sm font-medium">Bondi, NSW <button class="ml-2 text-primary/60 hover:text-primary">Ã—</button></span>
          <span class="inline-flex items-center px-3 py-2 bg-primary/10 text-primary rounded-lg text-sm font-medium">Manly, NSW <button class="ml-2 text-primary/60 hover:text-primary">Ã—</button></span>
          <span class="inline-flex items-center px-3 py-2 bg-primary/10 text-primary rounded-lg text-sm font-medium">Mosman, NSW <button class="ml-2 text-primary/60 hover:text-primary">Ã—</button></span>
          <span class="inline-flex items-center px-3 py-2 bg-primary/10 text-primary rounded-lg text-sm font-medium">Double Bay, NSW <button class="ml-2 text-primary/60 hover:text-primary">Ã—</button></span>
        </div>
        <div class="relative">
          <input type="text" placeholder="Add suburb..." class="w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:border-primary">
          <svg class="w-5 h-5 text-gray-400 absolute right-4 top-1/2 -translate-y-1/2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/></svg>
        </div>
      </div>
      <div class="bg-amber-50 border border-amber-200 rounded-xl p-4">
        <div class="flex items-start space-x-3">
          <svg class="w-5 h-5 text-amber-500 mt-0.5" fill="currentColor" viewBox="0 0 24 24"><path d="M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"/></svg>
          <div>
            <p class="font-medium text-amber-800">PRO Subscription</p>
            <p class="text-sm text-amber-700 mt-1">You have unlimited suburb subscriptions with your PRO membership.</p>
          </div>
        </div>
      </div>
    </div>
  </div>
  
  <!-- Pipeline Panel -->
  <div id="settings-detail-pipeline" class="settings-detail hidden fixed inset-0 bg-gray-50 z-50 overflow-auto">
    <div class="bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between">
      <div class="flex items-center">
        <button onclick="hideSettingsDetail()" class="p-2 hover:bg-gray-100 rounded-lg mr-3">
          <svg class="w-5 h-5 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/></svg>
        </button>
        <h1 class="text-xl font-bold text-gray-900">Pipeline Stages</h1>
      </div>
      <div class="flex items-center space-x-3">
        <span id="pipeline-save-status" class="text-sm text-gray-500 hidden">âœ“ Saved</span>
        <button onclick="savePipelineSettings()" class="px-4 py-2 bg-primary text-white rounded-lg text-sm font-medium hover:bg-red-700">Save Changes</button>
      </div>
    </div>
    <div class="p-6 max-w-4xl mx-auto">
      <p class="text-sm text-gray-500 mb-4">Customise your pipeline stages. Drag to reorder, edit names and colours. Changes will sync to your Pipeline view.</p>
      <div id="pipeline-stages-list" class="bg-white rounded-xl border border-gray-200 overflow-hidden">
        <div class="divide-y divide-gray-100"></div>
      </div>
      <button onclick="addPipelineSettingsStage()" class="mt-4 w-full py-3 border-2 border-dashed border-gray-300 rounded-xl text-gray-500 hover:border-primary hover:text-primary transition-colors">+ Add Stage</button>
      <div class="mt-6 p-4 bg-blue-50 border border-blue-100 rounded-xl">
        <p class="text-sm text-blue-700"><strong>ðŸ’¡ Tip:</strong> You can also edit stages directly in the Pipeline view by clicking on stage names.</p>
      </div>
    </div>
  </div>
  
  <!-- SMS Preview Modal -->
  <div id="sms-preview-modal" class="fixed inset-0 bg-black/50 z-50 hidden flex items-center justify-center">
    <div class="bg-white rounded-2xl w-full max-w-sm overflow-hidden">
      <div class="flex items-center justify-between p-4 border-b border-gray-200">
        <h2 class="font-bold text-gray-900">SMS Preview</h2>
        <button onclick="hideSMSPreviewModal()" class="p-2 hover:bg-gray-100 rounded-lg">
          <svg class="w-5 h-5 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/></svg>
        </button>
      </div>
      <div class="p-4">
        <!-- Phone mockup -->
        <div class="bg-gray-900 rounded-3xl p-3">
          <div class="bg-gray-100 rounded-2xl p-4 space-y-3" id="sms-preview-messages">
            <!-- Preview messages will be rendered here -->
          </div>
        </div>
      </div>
    </div>
  </div>
  
  <!-- Nearby Upgrade Modal -->
  <div id="nearby-upgrade-modal" class="fixed inset-0 bg-black/50 z-50 hidden flex items-center justify-center">
    <div class="bg-white rounded-2xl w-full max-w-2xl max-h-[85vh] overflow-hidden flex flex-col">
      <div class="flex items-center justify-between p-5 border-b border-gray-200">
        <h2 class="text-lg font-bold text-gray-900">Expand Your Coverage</h2>
        <button onclick="hideNearbyUpgradeModal()" class="p-2 hover:bg-gray-100 rounded-lg">
          <svg class="w-5 h-5 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/></svg>
        </button>
      </div>
      <div class="flex-1 overflow-auto p-5">
        <p class="text-gray-600 mb-4">Select suburbs to add to your subscription:</p>
        <div class="space-y-3" id="upgrade-suburbs-list">
          <!-- Generated by JavaScript -->
        </div>
      </div>
      <div class="p-5 border-t border-gray-200 bg-gray-50">
        <div class="flex items-center justify-between">
          <div>
            <p class="text-sm text-gray-500">Selected: <span id="selected-suburbs-count" class="font-semibold text-gray-900">0 suburbs</span></p>
            <p class="text-lg font-bold text-gray-900">Total: <span id="selected-suburbs-price">$0</span>/month</p>
          </div>
          <button onclick="requestUpgrade()" class="px-6 py-3 bg-gradient-to-r from-amber-500 to-orange-500 text-white rounded-xl font-semibold hover:from-amber-600 hover:to-orange-600 disabled:opacity-50" id="upgrade-btn" disabled>
            Request Upgrade
          </button>
        </div>
      </div>
    </div>
  </div>
  
  <!-- Filter Modal -->
  <div id="filter-modal" class="fixed inset-0 bg-black/50 z-50 hidden flex items-end justify-center">
    <div class="bg-white rounded-t-3xl w-full max-w-lg max-h-[85vh] overflow-hidden flex flex-col animate-slide-up">
      <!-- Modal Header -->
      <div class="flex items-center justify-between p-5 border-b border-gray-200">
        <button onclick="toggleFilterModal()" class="p-2 hover:bg-gray-100 rounded-lg">
          <svg class="w-5 h-5 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/></svg>
        </button>
        <h2 class="text-lg font-bold text-gray-900">Filter</h2>
        <div class="w-9"></div>
      </div>
      
      <!-- Modal Content -->
      <div class="flex-1 overflow-auto p-5 space-y-6">
        <!-- Location -->
        <div>
          <h3 class="font-bold text-gray-900 mb-3">Location</h3>
          <div class="border border-gray-200 rounded-xl p-4">
            <div class="flex flex-wrap gap-2 mb-3">
              <span class="inline-flex items-center px-3 py-1.5 bg-gray-100 text-gray-700 rounded-lg text-sm">
                Ashgrove, QLD
                <button class="ml-2 text-gray-400 hover:text-gray-600">Ã—</button>
              </span>
              <span class="inline-flex items-center px-3 py-1.5 bg-gray-100 text-gray-700 rounded-lg text-sm">
                Port Douglas, QLD
                <button class="ml-2 text-gray-400 hover:text-gray-600">Ã—</button>
              </span>
              <span class="inline-flex items-center px-3 py-1.5 bg-gray-100 text-gray-700 rounded-lg text-sm">
                Lorne, VIC
                <button class="ml-2 text-gray-400 hover:text-gray-600">Ã—</button>
              </span>
              <span class="inline-flex items-center px-3 py-1.5 bg-gray-100 text-gray-700 rounded-lg text-sm">
                Port Macquarie, NSW
                <button class="ml-2 text-gray-400 hover:text-gray-600">Ã—</button>
              </span>
            </div>
            <div class="relative">
              <input type="text" placeholder="Target suburb" class="w-full px-4 py-2.5 border border-gray-200 rounded-lg text-gray-500 placeholder-gray-400 focus:outline-none focus:border-primary">
              <svg class="w-5 h-5 text-gray-400 absolute right-3 top-1/2 -translate-y-1/2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/></svg>
            </div>
          </div>
        </div>
        
        <!-- Selling Score -->
        <div>
          <h3 class="font-bold text-gray-900 mb-3">Selling Score</h3>
          <div class="flex items-center space-x-4">
            <div class="flex-1 relative">
              <select class="w-full px-4 py-3 bg-white border border-gray-200 rounded-xl appearance-none text-gray-500 focus:outline-none focus:border-primary">
                <option>0%</option>
                <option>10%</option>
                <option>20%</option>
                <option>30%</option>
                <option>40%</option>
                <option>50%</option>
              </select>
              <svg class="w-5 h-5 text-gray-400 absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/></svg>
            </div>
            <span class="text-gray-400">-</span>
            <div class="flex-1 relative">
              <select class="w-full px-4 py-3 bg-white border border-gray-200 rounded-xl appearance-none text-gray-500 focus:outline-none focus:border-primary">
                <option>100%</option>
                <option>90%</option>
                <option>80%</option>
                <option>70%</option>
                <option>60%</option>
                <option>50%</option>
              </select>
              <svg class="w-5 h-5 text-gray-400 absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/></svg>
            </div>
          </div>
        </div>
        
        <!-- Insight Type -->
        <div>
          <h3 class="font-bold text-gray-900 mb-3">Insight Type</h3>
          <div class="space-y-3">
            <label class="flex items-center justify-between py-2 cursor-pointer">
              <span class="text-gray-700">Garage Sale</span>
              <div class="w-11 h-6 bg-gray-200 rounded-full relative cursor-pointer filter-toggle">
                <div class="w-5 h-5 bg-white rounded-full absolute left-0.5 top-0.5 shadow transition-transform"></div>
              </div>
            </label>
            <label class="flex items-center justify-between py-2 cursor-pointer">
              <span class="text-gray-700">Tagged on Social Media</span>
              <div class="w-11 h-6 bg-gray-200 rounded-full relative cursor-pointer filter-toggle">
                <div class="w-5 h-5 bg-white rounded-full absolute left-0.5 top-0.5 shadow transition-transform"></div>
              </div>
            </label>
            <label class="flex items-center justify-between py-2 cursor-pointer">
              <span class="text-gray-700">Listed for Sale</span>
              <div class="w-11 h-6 bg-gray-200 rounded-full relative cursor-pointer filter-toggle">
                <div class="w-5 h-5 bg-white rounded-full absolute left-0.5 top-0.5 shadow transition-transform"></div>
              </div>
            </label>
            <label class="flex items-center justify-between py-2 cursor-pointer">
              <span class="text-gray-700">Neighbour Selling</span>
              <div class="w-11 h-6 bg-gray-200 rounded-full relative cursor-pointer filter-toggle">
                <div class="w-5 h-5 bg-white rounded-full absolute left-0.5 top-0.5 shadow transition-transform"></div>
              </div>
            </label>
            <label class="flex items-center justify-between py-2 cursor-pointer">
              <span class="text-gray-700">Listed for Rent</span>
              <div class="w-11 h-6 bg-gray-200 rounded-full relative cursor-pointer filter-toggle">
                <div class="w-5 h-5 bg-white rounded-full absolute left-0.5 top-0.5 shadow transition-transform"></div>
              </div>
            </label>
            <label class="flex items-center justify-between py-2 cursor-pointer">
              <span class="text-gray-700">Requested Valuation</span>
              <div class="w-11 h-6 bg-gray-200 rounded-full relative cursor-pointer filter-toggle">
                <div class="w-5 h-5 bg-white rounded-full absolute left-0.5 top-0.5 shadow transition-transform"></div>
              </div>
            </label>
            <label class="flex items-center justify-between py-2 cursor-pointer">
              <span class="text-gray-700">FSBO (For Sale By Owner)</span>
              <div class="w-11 h-6 bg-gray-200 rounded-full relative cursor-pointer filter-toggle">
                <div class="w-5 h-5 bg-white rounded-full absolute left-0.5 top-0.5 shadow transition-transform"></div>
              </div>
            </label>
            <label class="flex items-center justify-between py-2 cursor-pointer">
              <span class="text-gray-700">Recently Sold</span>
              <div class="w-11 h-6 bg-gray-200 rounded-full relative cursor-pointer filter-toggle">
                <div class="w-5 h-5 bg-white rounded-full absolute left-0.5 top-0.5 shadow transition-transform"></div>
              </div>
            </label>
          </div>
        </div>
      </div>
      
      <!-- Apply Button -->
      <div class="p-5 border-t border-gray-100">
        <button onclick="toggleFilterModal()" class="w-full py-4 bg-primary text-white font-bold rounded-xl hover:bg-primary-dark transition-colors">
          Apply
        </button>
      </div>
    </div>
  </div>

  <!-- Template Editor Modal -->
  <div id="template-editor-modal" class="fixed inset-0 z-50 hidden">
    <div class="absolute inset-0 bg-black/60 backdrop-blur-sm" onclick="closeTemplateEditor()"></div>
    <div class="absolute inset-4 md:inset-8 lg:inset-12 flex">
      <div class="bg-white rounded-2xl shadow-2xl w-full flex overflow-hidden">
        
        <!-- Left: Live Preview -->
        <div class="w-1/2 bg-gray-900 p-8 flex flex-col">
          <div class="flex items-center justify-between mb-6">
            <h3 class="text-white font-semibold">Live Preview</h3>
            <div class="flex items-center space-x-2">
              <button onclick="setPreviewSize('square')" class="preview-size-btn active px-3 py-1 text-xs rounded-lg bg-white/20 text-white hover:bg-white/30">1:1</button>
              <button onclick="setPreviewSize('story')" class="preview-size-btn px-3 py-1 text-xs rounded-lg bg-white/10 text-white/60 hover:bg-white/20">9:16</button>
              <button onclick="setPreviewSize('landscape')" class="preview-size-btn px-3 py-1 text-xs rounded-lg bg-white/10 text-white/60 hover:bg-white/20">16:9</button>
            </div>
          </div>
          <div class="flex-1 flex items-center justify-center">
            <div id="template-preview" class="relative bg-gray-800 rounded-xl overflow-hidden shadow-2xl" style="width: 400px; height: 400px;">
              <!-- Preview renders here -->
            </div>
          </div>
        </div>
        
        <!-- Right: Editor Panel -->
        <div class="w-1/2 flex flex-col">
          <!-- Header -->
          <div class="p-6 border-b border-gray-200 flex items-center justify-between">
            <div>
              <h2 class="text-xl font-bold text-gray-900" id="editor-template-name">Just Listed - Style 1</h2>
              <p class="text-sm text-gray-500">Customize your template</p>
            </div>
            <button onclick="closeTemplateEditor()" class="p-2 hover:bg-gray-100 rounded-lg">
              <svg class="w-6 h-6 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/></svg>
            </button>
          </div>
          
          <!-- Editor Content -->
          <div class="flex-1 overflow-auto p-6 space-y-6">
            
            <!-- Property Photo -->
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-2">Property Photo</label>
              <div id="photo-upload-area" class="border-2 border-dashed border-gray-300 rounded-xl p-6 text-center hover:border-primary hover:bg-primary/5 transition-colors cursor-pointer" onclick="document.getElementById('photo-input').click()">
                <input type="file" id="photo-input" accept="image/*" class="hidden" onchange="handlePhotoUpload(event)">
                <div id="photo-placeholder">
                  <svg class="w-12 h-12 text-gray-400 mx-auto mb-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"/></svg>
                  <p class="text-sm text-gray-600 font-medium">Click to upload photo</p>
                  <p class="text-xs text-gray-400 mt-1">or drag and drop</p>
                </div>
                <div id="photo-preview-container" class="hidden">
                  <img id="uploaded-photo-preview" class="w-24 h-24 object-cover rounded-lg mx-auto">
                  <p class="text-sm text-green-600 font-medium mt-2">âœ“ Photo uploaded</p>
                  <button onclick="event.stopPropagation(); removeUploadedPhoto()" class="text-xs text-primary hover:underline mt-1">Remove</button>
                </div>
              </div>
            </div>
            
            <!-- Property Details -->
            <div class="grid grid-cols-2 gap-4">
              <div class="col-span-2">
                <label class="block text-sm font-medium text-gray-700 mb-2">Street Address</label>
                <input type="text" id="editor-address" class="w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary" placeholder="42 Ocean View Drive" oninput="updatePreview()">
              </div>
              <div>
                <label class="block text-sm font-medium text-gray-700 mb-2">Suburb</label>
                <input type="text" id="editor-suburb" class="w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary" placeholder="Bondi" oninput="updatePreview()">
              </div>
              <div>
                <label class="block text-sm font-medium text-gray-700 mb-2">Price</label>
                <input type="text" id="editor-price" class="w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary" placeholder="$2,450,000" oninput="updatePreview()">
              </div>
            </div>
            
            <!-- Property Features -->
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-2">Property Features</label>
              <div class="grid grid-cols-3 gap-3">
                <div>
                  <label class="text-xs text-gray-500">Beds</label>
                  <select id="editor-beds" class="w-full mt-1 px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:border-primary" onchange="updatePreview()">
                    <option>1</option><option>2</option><option selected>3</option><option>4</option><option>5</option><option>6+</option>
                  </select>
                </div>
                <div>
                  <label class="text-xs text-gray-500">Baths</label>
                  <select id="editor-baths" class="w-full mt-1 px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:border-primary" onchange="updatePreview()">
                    <option>1</option><option selected>2</option><option>3</option><option>4</option><option>5+</option>
                  </select>
                </div>
                <div>
                  <label class="text-xs text-gray-500">Cars</label>
                  <select id="editor-cars" class="w-full mt-1 px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:border-primary" onchange="updatePreview()">
                    <option>0</option><option>1</option><option selected>2</option><option>3</option><option>4+</option>
                  </select>
                </div>
              </div>
            </div>
            
            <!-- Agent Branding -->
            <div class="pt-4 border-t border-gray-100">
              <label class="block text-sm font-medium text-gray-700 mb-3">Agent Branding</label>
              <div class="flex items-center space-x-4">
                <div class="relative">
                  <div class="w-16 h-16 bg-primary rounded-full flex items-center justify-center text-white text-xl font-bold">JD</div>
                  <button class="absolute -bottom-1 -right-1 w-6 h-6 bg-white border border-gray-200 rounded-full flex items-center justify-center shadow-sm hover:bg-gray-50">
                    <svg class="w-3 h-3 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"/></svg>
                  </button>
                </div>
                <div class="flex-1">
                  <input type="text" id="editor-agent-name" value="John Davidson" class="w-full px-3 py-2 border border-gray-200 rounded-lg text-sm focus:outline-none focus:border-primary" oninput="updatePreview()">
                  <input type="text" id="editor-agent-phone" value="0412 345 678" class="w-full mt-2 px-3 py-2 border border-gray-200 rounded-lg text-sm focus:outline-none focus:border-primary" oninput="updatePreview()">
                </div>
              </div>
            </div>
            
          </div>
          
          <!-- Footer Actions -->
          <div class="p-6 border-t border-gray-200 bg-gray-50">
            <div class="flex items-center justify-between mb-4">
              <span class="text-sm text-gray-500">Export as:</span>
              <div class="flex items-center space-x-2">
                <button class="export-format-btn active px-4 py-2 text-sm font-medium rounded-lg bg-primary text-white" data-format="png">PNG</button>
                <button class="export-format-btn px-4 py-2 text-sm font-medium rounded-lg bg-gray-100 text-gray-600 hover:bg-gray-200" data-format="jpg">JPG</button>
              </div>
            </div>
            <div class="grid grid-cols-3 gap-3">
              <button onclick="exportTemplate('download')" class="flex items-center justify-center space-x-2 px-4 py-3 bg-gray-900 text-white rounded-xl font-medium hover:bg-gray-800 transition-colors">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"/></svg>
                <span>Download</span>
              </button>
              <button onclick="exportTemplate('instagram')" class="flex items-center justify-center space-x-2 px-4 py-3 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-xl font-medium hover:from-purple-600 hover:to-pink-600 transition-colors">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24"><path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"/></svg>
                <span>Instagram</span>
              </button>
              <button onclick="exportTemplate('facebook')" class="flex items-center justify-center space-x-2 px-4 py-3 bg-blue-600 text-white rounded-xl font-medium hover:bg-blue-700 transition-colors">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24"><path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/></svg>
                <span>Facebook</span>
              </button>
            </div>
          </div>
          
        </div>
      </div>
    </div>
  </div>

  <!-- Onboarding Modal -->
  <div id="onboarding-modal" class="fixed inset-0 z-50 hidden">
    <div class="onboarding-overlay absolute inset-0"></div>
    <div class="absolute inset-0 flex items-center justify-center p-8">
      <div class="bg-white rounded-2xl shadow-2xl max-w-2xl w-full overflow-hidden">
        <!-- Step 1: Welcome -->
        <div class="onboarding-step active" data-step="1">
          <div class="bg-gradient-to-br from-primary to-red-700 p-12 text-white text-center">
            <div class="w-20 h-20 bg-white/20 rounded-2xl flex items-center justify-center mx-auto mb-6">
              <svg class="w-10 h-10 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"/></svg>
            </div>
            <h2 class="text-3xl font-bold mb-3">Welcome to Get Listings!</h2>
            <p class="text-white/80 text-lg">Let's get you set up to find and win more listings.</p>
          </div>
          <div class="p-8 text-center">
            <p class="text-gray-600 mb-6">This quick tour will show you how to use the platform effectively.</p>
            <div class="flex items-center justify-center space-x-3">
              <button onclick="nextOnboardingStep()" class="px-8 py-3 bg-primary text-white rounded-xl font-medium hover:bg-red-700 transition-colors">Get Started â†’</button>
            </div>
          </div>
        </div>
        
        <!-- Step 2: AI Seller Scores -->
        <div class="onboarding-step" data-step="2">
          <div class="bg-gradient-to-br from-blue-600 to-blue-800 p-8 text-white">
            <div class="flex items-center space-x-4">
              <div class="w-16 h-16 bg-white/20 rounded-xl flex items-center justify-center">
                <span class="text-4xl">ðŸ¤–</span>
              </div>
              <div>
                <h2 class="text-2xl font-bold">AI Seller Scores</h2>
                <p class="text-white/80">Know who's most likely to sell</p>
              </div>
            </div>
          </div>
          <div class="p-8">
            <div class="space-y-4 mb-6">
              <div class="flex items-start space-x-3">
                <div class="w-6 h-6 bg-green-100 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5"><svg class="w-4 h-4 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/></svg></div>
                <p class="text-gray-700">Our AI analyzes <strong>50+ data signals</strong> to predict seller likelihood</p>
              </div>
              <div class="flex items-start space-x-3">
                <div class="w-6 h-6 bg-green-100 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5"><svg class="w-4 h-4 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/></svg></div>
                <p class="text-gray-700">Scores range from <strong>0-100</strong> â€“ focus on 80+ for best results</p>
              </div>
              <div class="flex items-start space-x-3">
                <div class="w-6 h-6 bg-green-100 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5"><svg class="w-4 h-4 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/></svg></div>
                <p class="text-gray-700">Click any lead to see <strong>AI-generated talking points</strong></p>
              </div>
            </div>
            <div class="flex items-center justify-between">
              <button onclick="prevOnboardingStep()" class="px-6 py-2 text-gray-500 hover:text-gray-700">â† Back</button>
              <button onclick="nextOnboardingStep()" class="px-8 py-3 bg-primary text-white rounded-xl font-medium hover:bg-red-700 transition-colors">Next â†’</button>
            </div>
          </div>
        </div>
        
        <!-- Step 3: Pipeline -->
        <div class="onboarding-step" data-step="3">
          <div class="bg-gradient-to-br from-purple-600 to-purple-800 p-8 text-white">
            <div class="flex items-center space-x-4">
              <div class="w-16 h-16 bg-white/20 rounded-xl flex items-center justify-center">
                <span class="text-4xl">ðŸ“‹</span>
              </div>
              <div>
                <h2 class="text-2xl font-bold">Pipeline Management</h2>
                <p class="text-white/80">Track every opportunity</p>
              </div>
            </div>
          </div>
          <div class="p-8">
            <div class="space-y-4 mb-6">
              <div class="flex items-start space-x-3">
                <div class="w-6 h-6 bg-green-100 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5"><svg class="w-4 h-4 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/></svg></div>
                <p class="text-gray-700"><strong>Drag & drop cards</strong> between stages as deals progress</p>
              </div>
              <div class="flex items-start space-x-3">
                <div class="w-6 h-6 bg-green-100 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5"><svg class="w-4 h-4 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/></svg></div>
                <p class="text-gray-700">See your <strong>total pipeline value</strong> at a glance</p>
              </div>
              <div class="flex items-start space-x-3">
                <div class="w-6 h-6 bg-green-100 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5"><svg class="w-4 h-4 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/></svg></div>
                <p class="text-gray-700">Customise stages in <strong>Settings</strong> to match your workflow</p>
              </div>
            </div>
            <div class="flex items-center justify-between">
              <button onclick="prevOnboardingStep()" class="px-6 py-2 text-gray-500 hover:text-gray-700">â† Back</button>
              <button onclick="nextOnboardingStep()" class="px-8 py-3 bg-primary text-white rounded-xl font-medium hover:bg-red-700 transition-colors">Next â†’</button>
            </div>
          </div>
        </div>
        
        <!-- Step 4: Content Creation -->
        <div class="onboarding-step" data-step="4">
          <div class="bg-gradient-to-br from-amber-500 to-orange-600 p-8 text-white">
            <div class="flex items-center space-x-4">
              <div class="w-16 h-16 bg-white/20 rounded-xl flex items-center justify-center">
                <span class="text-4xl">ðŸŽ¨</span>
              </div>
              <div>
                <h2 class="text-2xl font-bold">Content Creation</h2>
                <p class="text-white/80">Create stunning social posts</p>
              </div>
            </div>
          </div>
          <div class="p-8">
            <div class="space-y-4 mb-6">
              <div class="flex items-start space-x-3">
                <div class="w-6 h-6 bg-green-100 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5"><svg class="w-4 h-4 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/></svg></div>
                <p class="text-gray-700">Choose from <strong>120+ professional templates</strong></p>
              </div>
              <div class="flex items-start space-x-3">
                <div class="w-6 h-6 bg-green-100 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5"><svg class="w-4 h-4 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/></svg></div>
                <p class="text-gray-700">Just Listed, Sold, Open Home, and more categories</p>
              </div>
              <div class="flex items-start space-x-3">
                <div class="w-6 h-6 bg-green-100 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5"><svg class="w-4 h-4 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/></svg></div>
                <p class="text-gray-700"><strong>One-click export</strong> for Instagram & Facebook</p>
              </div>
            </div>
            <div class="flex items-center justify-between">
              <button onclick="prevOnboardingStep()" class="px-6 py-2 text-gray-500 hover:text-gray-700">â† Back</button>
              <button onclick="nextOnboardingStep()" class="px-8 py-3 bg-primary text-white rounded-xl font-medium hover:bg-red-700 transition-colors">Next â†’</button>
            </div>
          </div>
        </div>
        
        <!-- Step 5: Ready to Go -->
        <div class="onboarding-step" data-step="5">
          <div class="bg-gradient-to-br from-green-600 to-emerald-700 p-12 text-white text-center">
            <div class="w-20 h-20 bg-white/20 rounded-full flex items-center justify-center mx-auto mb-6">
              <span class="text-5xl">ðŸš€</span>
            </div>
            <h2 class="text-3xl font-bold mb-3">You're All Set!</h2>
            <p class="text-white/80 text-lg">Time to find your next listing.</p>
          </div>
          <div class="p-8 text-center">
            <div class="bg-gray-50 rounded-xl p-6 mb-6">
              <p class="text-gray-600 mb-2">ðŸ’¡ <strong>Pro Tip:</strong></p>
              <p class="text-gray-600">Start with the <strong>"Today's Highest Value Lead"</strong> on your dashboard â€“ it's your best opportunity right now.</p>
            </div>
            <button onclick="closeOnboarding()" class="px-8 py-3 bg-primary text-white rounded-xl font-medium hover:bg-red-700 transition-colors">Start Prospecting â†’</button>
          </div>
        </div>
        
        <!-- Progress Dots -->
        <div class="bg-gray-100 px-8 py-4 flex items-center justify-center space-x-2">
          <div class="onboarding-dot active" data-dot="1"></div>
          <div class="onboarding-dot" data-dot="2"></div>
          <div class="onboarding-dot" data-dot="3"></div>
          <div class="onboarding-dot" data-dot="4"></div>
          <div class="onboarding-dot" data-dot="5"></div>
        </div>
      </div>
    </div>
  </div>

  <script>
    // ===== PROP.DEALS API INTEGRATION =====
    const API_BASE_URL = 'https://prop.deals/v1';
    
    // Get stored JWT token
    function getApiToken() {
      return localStorage.getItem('propdeals_jwt') || '';
    }
    
    // Set JWT token
    function setApiToken(token) {
      localStorage.setItem('propdeals_jwt', token);
    }
    
    // Check if connected
    function isApiConnected() {
      return !!getApiToken();
    }
    
    // API request helper
    async function apiRequest(endpoint, method = 'GET', body = null) {
      const token = getApiToken();
      if (!token) {
        throw new Error('Not authenticated. Please connect your account in Settings.');
      }
      
      const options = {
        method,
        headers: {
          'Content-Type': 'application/json',
          'Authorization': `Bearer ${token}`,
          'x-access-token': token
        }
      };
      
      if (body && method !== 'GET') {
        options.body = JSON.stringify(body);
      }
      
      console.log('API Request:', method, endpoint, 'Token:', token.substring(0, 30) + '...');
      
      const response = await fetch(`${API_BASE_URL}${endpoint}`, options);
      
      console.log('API Response:', response.status, endpoint);
      
      if (response.status === 401) {
        // Token expired or invalid
        const errorData = await response.json().catch(() => ({}));
        console.error('401 Error:', errorData);
        
        // Only clear token and show login if not already showing
        const token = localStorage.getItem('propdeals_jwt');
        if (token) {
          // Clear the invalid token
          localStorage.removeItem('propdeals_jwt');
          localStorage.removeItem('propdeals_refresh');
          updateApiStatusUI(false);
          
          // Show toast and open settings to re-authenticate (only once)
          showToast('âš ï¸ Session expired. Please log in again.');
          showSettingsDetail('api');
        }
        
        throw new Error('Session expired. Please log in again.');
      }
      
      if (!response.ok) {
        const errorData = await response.json().catch(() => ({}));
        throw new Error(errorData.message || `API error: ${response.status}`);
      }
      
      return await response.json();
    }
    
    // ===== API ENDPOINTS =====
    
    // Get All Leads
    async function apiGetAllLeads(options = {}) {
      const body = {
        page: options.page || 1,
        perPage: options.perPage || 20
      };
      
      // Optional: search query
      if (options.search) {
        body.search = options.search;
      }
      
      // Optional: location filter
      if (options.placeId) {
        body.placeId = options.placeId;
        body.distance = options.distance || 5000;
      }
      
      // Optional: suburbs filter (1-4 items)
      if (options.suburbs && options.suburbs.length > 0) {
        body.suburbs = options.suburbs.slice(0, 4);
      }
      
      // Optional: selling score range (0-100)
      if (options.sellingScore) {
        body.sellingScore = {
          min: options.sellingScore.min || 0,
          max: options.sellingScore.max || 100
        };
      }
      
      // Optional: insights filter
      if (options.insights) {
        body.insights = {
          garageSale: options.insights.garageSale || false,
          listedForSale: options.insights.listedForSale || false,
          listedForRent: options.insights.listedForRent || false,
          requested: options.insights.requested || false,
          neighbourSold: options.insights.neighbourSold || false,
          recentlySold: options.insights.recentlySold || false,
          socialTag: options.insights.socialTag || false,
          fsboListing: options.insights.fsboListing || false
        };
      }
      
      return await apiRequest('/lead/all', 'POST', body);
    }
    
    // Get Inbox / Chat Data
    async function apiGetInbox(options = {}) {
      const body = {
        page: options.page || 1,
        perPage: options.perPage || 20,
        isCompleted: options.isCompleted || false
      };
      return await apiRequest('/chat', 'POST', body);
    }
    
    // Branding Opportunities State
    let brandingData = { items: [], total: 0, page: 1, completedCount: 0, activeCategory: 'all' };
    
    // Filter branding by category tab
    function filterBrandingCategory(category) {
      brandingData.activeCategory = category;
      
      // Update tab styles
      document.querySelectorAll('.branding-tab').forEach(tab => {
        tab.classList.remove('active', 'border-primary', 'text-primary', 'bg-primary/5');
        tab.classList.add('border-transparent', 'text-gray-500');
      });
      event.target.classList.add('active', 'border-primary', 'text-primary', 'bg-primary/5');
      event.target.classList.remove('border-transparent', 'text-gray-500');
      
      renderBrandingOpportunities();
    }
    
    // Load Branding Opportunities
    async function loadBrandingOpportunities(page = 1) {
      const listEl = document.getElementById('branding-list');
      listEl.innerHTML = '<div class="flex items-center justify-center py-12"><div class="animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"></div><span class="ml-3 text-gray-500">Loading opportunities...</span></div>';
      
      try {
        const data = await apiGetInbox({ page, perPage: 20, isCompleted: false });
        brandingData.items = data.inboxData || [];
        brandingData.total = data.total || 0;
        brandingData.page = page;
        
        // Also get completed items
        const completedData = await apiGetInbox({ page: 1, perPage: 50, isCompleted: true });
        brandingData.completedItems = completedData.inboxData || [];
        brandingData.completedCount = completedData.total || 0;
        
        renderBrandingOpportunities();
      } catch (error) {
        listEl.innerHTML = `<div class="bg-red-50 text-red-700 p-4 rounded-lg">Failed to load opportunities: ${error.message}</div>`;
      }
    }
    
    // Render Branding Opportunities
    function renderBrandingOpportunities() {
      const listEl = document.getElementById('branding-list');
      const items = brandingData.items;
      const total = brandingData.total;
      const completed = brandingData.completedCount;
      
      // Update progress bar in header
      const progressText = document.querySelector('#page-branding .text-sm.text-gray-500');
      const progressBar = document.querySelector('#page-branding .bg-green-500');
      if (progressText) progressText.textContent = `${completed} of ${completed + total} completed`;
      if (progressBar) {
        const pct = total + completed > 0 ? (completed / (total + completed)) * 100 : 0;
        progressBar.style.width = pct + '%';
      }
      
      if (items.length === 0) {
        listEl.innerHTML = '<div class="bg-white rounded-lg shadow-sm p-8 text-center text-gray-500"><p class="text-lg font-medium">All caught up!</p><p class="text-sm mt-1">No pending marketing tips.</p></div>';
        return;
      }
      
      // Categorize items
      const categorized = categorizeBrandingItems(items);
      const activeCategory = brandingData.activeCategory || 'all';
      
      let html = '';
      
      const categoryMeta = {
        video: { label: 'Video & Media', icon: 'ðŸŽ¬' },
        social: { label: 'Social Media', icon: 'ðŸ“±' },
        profile: { label: 'Profile & Branding', icon: 'ðŸ‘¤' },
        content: { label: 'Content & Listings', icon: 'ðŸ“' },
        advertising: { label: 'Advertising', icon: 'ðŸ“¢' },
        other: { label: 'Other Tips', icon: 'ðŸ’¡' }
      };
      
      // Helper to render a single item
      function renderItem(item) {
        const date = new Date(item.scheduleTime || item.createdAt);
        const timeAgo = getTimeAgo(date);
        const title = extractBrandingTitle(item.text);
        const isFacebookAd = item.isFacebookAdAlert;
        
        return `
          <div class="bg-white rounded-lg border border-gray-200 hover:border-gray-300 hover:shadow-sm transition-all" id="branding-item-${item._id}">
            <div class="p-4">
              <div class="flex items-start space-x-3">
                <button onclick="toggleBrandingComplete('${item._id}')" class="mt-0.5 flex-shrink-0 w-5 h-5 rounded border-2 border-gray-300 hover:border-green-500 hover:bg-green-50 flex items-center justify-center transition-colors group" title="Mark as complete">
                  <svg class="w-3 h-3 text-transparent group-hover:text-green-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/></svg>
                </button>
                <div class="flex-1 min-w-0">
                  <div class="flex items-start justify-between mb-1">
                    <h4 class="text-sm font-medium text-gray-900">${title}</h4>
                    <span class="text-xs text-gray-400 flex-shrink-0 ml-2">${timeAgo}</span>
                  </div>
                  <p class="text-gray-600 text-sm leading-relaxed">${item.text}</p>
                </div>
              </div>
            </div>
          </div>
        `;
      }
      
      if (activeCategory === 'all') {
        // Show grouped by category
        const categoryOrder = ['video', 'social', 'profile', 'content', 'advertising', 'other'];
        
        categoryOrder.forEach(cat => {
          const catItems = categorized[cat];
          if (!catItems || catItems.length === 0) return;
          
          const meta = categoryMeta[cat];
          html += `
            <div class="mb-6">
              <div class="flex items-center space-x-2 mb-3">
                <span class="text-lg">${meta.icon}</span>
                <h3 class="text-sm font-semibold text-gray-700 uppercase tracking-wide">${meta.label}</h3>
                <span class="text-xs text-gray-400">(${catItems.length})</span>
              </div>
              <div class="space-y-2">
          `;
          
          catItems.forEach(item => {
            html += renderItem(item);
          });
          
          html += '</div></div>';
        });
      } else if (activeCategory === 'completed') {
        // Show completed items
        const completedItems = brandingData.completedItems || [];
        
        if (completedItems.length === 0) {
          html = `<div class="bg-white rounded-lg shadow-sm p-8 text-center text-gray-500"><p class="text-lg font-medium">No completed opportunities yet</p><p class="text-sm mt-1">Complete opportunities by clicking the checkbox on each item.</p></div>`;
        } else {
          html = `
            <div class="mb-4">
              <div class="flex items-center space-x-2 mb-3">
                <span class="text-lg">âœ“</span>
                <h3 class="text-sm font-semibold text-gray-700 uppercase tracking-wide">Completed Opportunities</h3>
                <span class="text-xs text-gray-400">(${completedItems.length})</span>
              </div>
            </div>
            <div class="space-y-2">
          `;
          
          completedItems.forEach(item => {
            const date = new Date(item.scheduleTime || item.createdAt);
            const timeAgo = getTimeAgo(date);
            const title = extractBrandingTitle(item.text);
            
            html += `
              <div class="bg-white rounded-lg border border-gray-200 opacity-75" id="branding-item-${item._id}">
                <div class="p-4">
                  <div class="flex items-start space-x-3">
                    <div class="mt-0.5 flex-shrink-0 w-5 h-5 rounded bg-green-500 flex items-center justify-center">
                      <svg class="w-3 h-3 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/></svg>
                    </div>
                    <div class="flex-1 min-w-0">
                      <div class="flex items-start justify-between mb-1">
                        <h4 class="text-sm font-medium text-gray-500 line-through">${title}</h4>
                        <span class="text-xs text-gray-400 flex-shrink-0 ml-2">${timeAgo}</span>
                      </div>
                      <p class="text-gray-400 text-sm leading-relaxed line-through">${item.text}</p>
                    </div>
                  </div>
                </div>
              </div>
            `;
          });
          
          html += '</div>';
        }
      } else {
        // Show single category as flat list
        const catItems = categorized[activeCategory] || [];
        const meta = categoryMeta[activeCategory];
        
        if (catItems.length === 0) {
          html = `<div class="bg-white rounded-lg shadow-sm p-8 text-center text-gray-500"><p class="text-lg font-medium">No ${meta?.label || 'tips'} available</p><p class="text-sm mt-1">Check back later for new opportunities.</p></div>`;
        } else {
          html = '<div class="space-y-2">';
          catItems.forEach(item => {
            html += renderItem(item);
          });
          html += '</div>';
        }
      }
      
      // Pagination (only for All view)
      if (activeCategory === 'all') {
        const totalPages = Math.ceil(total / 20);
        if (totalPages > 1) {
          html += `
            <div class="flex items-center justify-center space-x-2 mt-6">
              <button onclick="loadBrandingOpportunities(${brandingData.page - 1})" ${brandingData.page <= 1 ? 'disabled' : ''} class="px-3 py-1.5 rounded-lg text-sm font-medium ${brandingData.page <= 1 ? 'bg-gray-100 text-gray-400 cursor-not-allowed' : 'bg-white border border-gray-300 text-gray-700 hover:bg-gray-50'}">Previous</button>
              <span class="text-sm text-gray-600">Page ${brandingData.page} of ${totalPages}</span>
              <button onclick="loadBrandingOpportunities(${brandingData.page + 1})" ${brandingData.page >= totalPages ? 'disabled' : ''} class="px-3 py-1.5 rounded-lg text-sm font-medium ${brandingData.page >= totalPages ? 'bg-gray-100 text-gray-400 cursor-not-allowed' : 'bg-white border border-gray-300 text-gray-700 hover:bg-gray-50'}">Next</button>
            </div>
          `;
        }
      }
      
      listEl.innerHTML = html;
    }
    
    // Categorize branding items based on content keywords
    function categorizeBrandingItems(items) {
      const categories = {
        video: [],
        social: [],
        profile: [],
        content: [],
        advertising: [],
        other: []
      };
      
      items.forEach(item => {
        const text = item.text.toLowerCase();
        
        if (text.includes('video') || text.includes('film') || text.includes('ten sixty') || text.includes('footage') || text.includes('music')) {
          categories.video.push(item);
        } else if (text.includes('facebook') || text.includes('instagram') || text.includes('social') || text.includes('post') || text.includes('hashtag') || text.includes('#')) {
          categories.social.push(item);
        } else if (text.includes('profile') || text.includes('about me') || text.includes('bio') || text.includes('headshot') || text.includes('testimonial') || text.includes('agent')) {
          categories.profile.push(item);
        } else if (text.includes('listing') || text.includes('property') || text.includes('content') || text.includes('description') || text.includes('photos')) {
          categories.content.push(item);
        } else if (text.includes('ad') || text.includes('campaign') || text.includes('promote') || text.includes('boost') || item.isFacebookAdAlert) {
          categories.advertising.push(item);
        } else {
          categories.other.push(item);
        }
      });
      
      return categories;
    }
    
    // Extract a short title from the tip text
    function extractBrandingTitle(text) {
      // Try to extract action from start of text
      const actionWords = ['Create', 'Launch', 'Transform', 'Showcase', 'Mirror', 'Add', 'Update', 'Build', 'Share', 'Post', 'Use', 'Try', 'Start', 'Implement', 'Develop'];
      
      for (const word of actionWords) {
        if (text.startsWith(word)) {
          // Get first phrase up to a dash, comma, or after ~6 words
          const words = text.split(' ').slice(0, 7);
          let title = '';
          for (let i = 0; i < words.length; i++) {
            if (words[i].includes('-') || words[i].includes('â€“')) {
              title = words.slice(0, i).join(' ');
              break;
            }
            title = words.slice(0, i + 1).join(' ');
          }
          // Clean up and truncate
          title = title.replace(/[,;:]$/, '');
          if (title.length > 50) title = title.substring(0, 47) + '...';
          return title || text.substring(0, 40) + '...';
        }
      }
      
      // Fallback: first 6 words
      const words = text.split(' ').slice(0, 6).join(' ');
      return words.length < text.length ? words + '...' : words;
    }
    
    // Toggle branding item as complete
    async function toggleBrandingComplete(itemId) {
      const itemEl = document.getElementById('branding-item-' + itemId);
      if (!itemEl) return;
      
      // Animate out
      itemEl.style.transition = 'all 0.3s ease';
      itemEl.style.opacity = '0';
      itemEl.style.transform = 'translateX(20px)';
      
      // TODO: Replace with actual API endpoint when available
      // For now, just do optimistic local update
      showToast('âœ“ Marked as complete!');
      
      // Remove from list after animation
      setTimeout(() => {
        itemEl.remove();
        brandingData.completedCount++;
        brandingData.total--;
        // Update progress
        const progressText = document.querySelector('#page-branding .text-sm.text-gray-500');
        const progressBar = document.querySelector('#page-branding .bg-green-500');
        if (progressText) progressText.textContent = `${brandingData.completedCount} of ${brandingData.completedCount + brandingData.total} completed`;
        if (progressBar) {
          const pct = (brandingData.completedCount / (brandingData.total + brandingData.completedCount)) * 100;
          progressBar.style.width = pct + '%';
        }
      }, 300);
    }
    
    // =====================================
    // SUBSCRIBED SUBURBS CACHE
    // =====================================
    
    let cachedSubscribedSuburbs = null;
    
    // Fetch and cache user's subscribed suburbs
    async function getSubscribedSuburbs() {
      if (cachedSubscribedSuburbs) return cachedSubscribedSuburbs;
      
      try {
        const data = await apiGetMySuburbs();
        if (data && data.result) {
          cachedSubscribedSuburbs = data.result.map(s => ({
            suburb: s.suburb,
            state: s.state
          }));
          
          // Update UI with suburb count
          const suburbCountEl = document.getElementById('stat-suburbs-subscribed');
          if (suburbCountEl) {
            suburbCountEl.textContent = cachedSubscribedSuburbs.length;
          }
          
          return cachedSubscribedSuburbs;
        }
      } catch (error) {
        console.error('Failed to fetch subscribed suburbs:', error);
      }
      return [];
    }
    
    // Clear suburbs cache (call when user changes subscription)
    function clearSuburbsCache() {
      cachedSubscribedSuburbs = null;
    }

    // =====================================
    // HOTTEST LEADS FUNCTIONS
    // =====================================

    let hottestLeadsData = [];
    let hottestLeadsLoading = false;

    // Load Hottest Leads from API (top 10 by sellingScore)
    async function loadHottestLeads() {
      if (hottestLeadsLoading) return;
      hottestLeadsLoading = true;
      
      const listEl = document.getElementById('hottest-leads-list');
      const loadingEl = document.getElementById('hottest-loading');
      
      if (loadingEl) loadingEl.classList.remove('hidden');
      
      try {
        const token = localStorage.getItem('propdeals_jwt');
        if (!token) {
          throw new Error('Not authenticated');
        }
        
        // Get subscribed suburbs first
        const suburbs = await getSubscribedSuburbs();
        
        // Get top leads with high selling score (75-100) from subscribed suburbs
        const data = await apiGetAllLeads({
          page: 1,
          perPage: 10,
          sellingScore: { min: 75, max: 100 },
          suburbs: suburbs.length > 0 ? suburbs : undefined
        });
        
        if (data && data.leads) {
          hottestLeadsData = data.leads;
          
          // First render with existing data
          renderHottestLeads();
          
          // Then estimate values for leads without prices (async)
          const leadsNeedingEstimates = hottestLeadsData.filter(l => !l.salePrice || l.salePrice === '');
          if (leadsNeedingEstimates.length > 0) {
            estimateHottestLeadValues();
          }
        } else {
          throw new Error('No leads data returned');
        }
      } catch (error) {
        console.error('Failed to load hottest leads:', error);
        if (listEl) {
          listEl.innerHTML = `
            <div class="bg-red-50 border border-red-200 rounded-xl p-6 text-center">
              <p class="text-red-600 font-medium">Failed to load leads</p>
              <p class="text-red-500 text-sm mt-1">${error.message}</p>
              <button onclick="loadHottestLeads()" class="mt-3 px-4 py-2 bg-red-600 text-white rounded-lg text-sm hover:bg-red-700">Retry</button>
            </div>
          `;
        }
      } finally {
        hottestLeadsLoading = false;
        if (loadingEl) loadingEl.classList.add('hidden');
      }
    }
    
    // Render Hottest Leads
    function renderHottestLeads() {
      const listEl = document.getElementById('hottest-leads-list');
      if (!listEl) return;
      
      if (hottestLeadsData.length === 0) {
        listEl.innerHTML = `
          <div class="bg-gray-50 rounded-xl p-8 text-center">
            <p class="text-gray-600 font-medium">No hot leads found</p>
            <p class="text-gray-400 text-sm mt-1">Check back later for high-scoring leads</p>
          </div>
        `;
        return;
      }
      
      let html = '';
      
      hottestLeadsData.forEach((lead, index) => {
        const rank = index + 1;
        const score = lead.sellingScore || 0;
        
        // Determine styling based on score
        let borderColor, badgeColor, gradientFrom, gradientTo, emoji;
        if (score >= 95) {
          borderColor = 'border-orange-200 hover:border-orange-300';
          badgeColor = 'bg-orange-100 text-orange-700';
          gradientFrom = 'from-orange-500';
          gradientTo = 'to-red-500';
          emoji = 'ðŸ”¥';
        } else if (score >= 90) {
          borderColor = 'border-orange-100 hover:border-orange-200';
          badgeColor = 'bg-orange-100 text-orange-700';
          gradientFrom = 'from-orange-400';
          gradientTo = 'to-orange-600';
          emoji = 'ðŸ”¥';
        } else if (score >= 85) {
          borderColor = 'border-amber-100 hover:border-amber-200';
          badgeColor = 'bg-amber-100 text-amber-700';
          gradientFrom = 'from-amber-400';
          gradientTo = 'to-orange-500';
          emoji = 'ðŸ”¥';
        } else {
          borderColor = 'border-gray-200 hover:border-amber-200';
          badgeColor = 'bg-yellow-100 text-yellow-700';
          gradientFrom = 'from-yellow-400';
          gradientTo = 'to-amber-500';
          emoji = 'âš¡';
        }
        
        // Parse sale price or use estimated value
        let priceDisplay = 'N/A';
        let commission = '';
        let isEstimate = false;
        
        // First try actual sale price
        if (lead.salePrice && lead.salePrice !== '') {
          const priceStr = String(lead.salePrice).replace(/[$,]/g, '');
          const price = parseFloat(priceStr);
          if (!isNaN(price) && price > 0) {
            if (price >= 1000000) {
              priceDisplay = `$${(price / 1000000).toFixed(1)}M`;
              commission = `$${Math.round(price * 0.025 / 1000)}K commission`;
            } else if (price >= 1000) {
              priceDisplay = `$${Math.round(price / 1000)}K`;
              commission = `$${Math.round(price * 0.025 / 1000)}K commission`;
            }
          }
        }
        // Then try estimated value from Gemini
        else if (lead.estimatedValue) {
          const price = lead.estimatedValue;
          isEstimate = true;
          if (price >= 1000000) {
            priceDisplay = `~$${(price / 1000000).toFixed(1)}M`;
            commission = `~$${Math.round(price * 0.025 / 1000)}K est.`;
          } else if (price >= 1000) {
            priceDisplay = `~$${Math.round(price / 1000)}K`;
            commission = `~$${Math.round(price * 0.025 / 1000)}K est.`;
          }
        }
        // Show loading indicator if we're still estimating
        else if (lead._estimating) {
          priceDisplay = '<span class="inline-flex items-center"><span class="animate-pulse">Estimating...</span></span>';
        }
        
        // Build property details
        const details = [];
        if (lead.suburb) details.push(`${lead.suburb} ${lead.state || ''} ${lead.postCode || ''}`);
        if (lead.bed) details.push(`${lead.bed} bed`);
        if (lead.bath) details.push(`${lead.bath} bath`);
        if (lead.ownerType) details.push(lead.ownerType);
        
        const address = lead.streetAddress || lead.fullAddress || 'Unknown Address';
        const fullAddress = `${address}, ${lead.suburb || ''}`;
        
        html += `
          <div onclick="showLeadDetail('${fullAddress.replace(/'/g, "\\'")}', ${score})" class="bg-white rounded-xl border-2 ${borderColor} p-5 cursor-pointer hover:shadow-lg transition-all flex items-center">
            <div class="flex items-center justify-center w-10 h-10 bg-gradient-to-br ${gradientFrom} ${gradientTo} rounded-full text-white font-bold text-lg mr-4 flex-shrink-0">${rank}</div>
            <div class="flex-1 min-w-0">
              <div class="flex items-center space-x-3">
                <h3 class="font-semibold text-gray-900 truncate">${address}</h3>
                <span class="px-2.5 py-1 ${badgeColor} text-xs font-bold rounded-full flex-shrink-0">${emoji} ${score}</span>
              </div>
              <p class="text-sm text-gray-500 mt-0.5 truncate">${details.join(' â€¢ ')}</p>
            </div>
            <div class="text-right flex-shrink-0 ml-4">
              <p class="text-lg font-bold text-gray-900">${priceDisplay}</p>
              ${commission ? `<p class="text-xs text-green-600 font-medium">${commission}</p>` : ''}
            </div>
            <svg class="w-5 h-5 text-gray-300 ml-4 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/></svg>
          </div>
        `;
      });
      
      listEl.innerHTML = html;
    }
    
    // Estimate values for hottest leads that don't have prices
    async function estimateHottestLeadValues() {
      const leadsNeedingEstimates = hottestLeadsData.filter(l => !l.salePrice || l.salePrice === '');
      
      if (leadsNeedingEstimates.length === 0) {
        console.log('No leads need estimates - all have prices');
        return;
      }
      
      console.log(`ðŸ  Starting estimates for ${leadsNeedingEstimates.length} leads without prices...`);
      
      // Mark leads as estimating and re-render to show loading state
      leadsNeedingEstimates.forEach(l => l._estimating = true);
      renderHottestLeads();
      
      // Process leads one at a time to avoid rate limits
      for (const lead of leadsNeedingEstimates) {
        console.log(`ðŸ“ Estimating: ${lead.streetAddress}, ${lead.suburb} (${lead.bed}bed/${lead.bath}bath)`);
        try {
          const estimate = await estimatePropertyValue(lead);
          console.log(`ðŸ“Š Estimate result:`, estimate);
          if (estimate && estimate.estimatedValue) {
            lead.estimatedValue = estimate.estimatedValue;
            lead.valueConfidence = estimate.confidence;
            console.log(`âœ… Got estimate for ${lead.streetAddress}: $${estimate.estimatedValue.toLocaleString()}`);
          } else {
            console.log(`âŒ No valid estimate returned for ${lead.streetAddress}`);
          }
        } catch (error) {
          console.error(`âŒ Failed to estimate ${lead.streetAddress}:`, error);
        }
        lead._estimating = false;
        
        // Re-render after each estimate to show progress
        renderHottestLeads();
        
        // Small delay to avoid rate limiting
        await new Promise(resolve => setTimeout(resolve, 500));
      }
      
      console.log('ðŸ Finished estimating all lead values');
    }
    
    // =====================================
    // EXPIRING LISTINGS FUNCTIONS
    // =====================================
    
    // Expiring Listings State
    let expiringData = { listings: [], total: 0, page: 1, perPage: 20 };
    
    // Load Expiring Listings from API
    async function loadExpiringListings(page = 1) {
      const listEl = document.getElementById('expired-list');
      const loadingEl = document.getElementById('expired-loading');
      const emptyEl = document.getElementById('expired-empty');
      const paginationEl = document.getElementById('expired-pagination');
      
      // Show loading state
      if (loadingEl) loadingEl.classList.remove('hidden');
      if (emptyEl) emptyEl.classList.add('hidden');
      if (paginationEl) paginationEl.classList.add('hidden');
      
      try {
        const response = await apiGetExpiredListings({ page, perPage: 20 });
        
        if (loadingEl) loadingEl.classList.add('hidden');
        
        if (response && response.expiredLeads) {
          expiringData.listings = response.expiredLeads;
          expiringData.total = response.total || 0;
          expiringData.page = response.page || 1;
          
          // Update stats
          document.getElementById('expired-total').textContent = expiringData.total;
          
          // Count urgent (expiring this week) and soon (this month)
          const now = new Date();
          const weekFromNow = new Date(now.getTime() + 7 * 24 * 60 * 60 * 1000);
          const monthFromNow = new Date(now.getTime() + 30 * 24 * 60 * 60 * 1000);
          
          let urgentCount = 0;
          let soonCount = 0;
          expiringData.listings.forEach(listing => {
            const expDate = listing.expiryDate ? new Date(listing.expiryDate) : null;
            if (expDate) {
              if (expDate <= weekFromNow) urgentCount++;
              else if (expDate <= monthFromNow) soonCount++;
            }
          });
          
          document.getElementById('expired-urgent').textContent = urgentCount;
          document.getElementById('expired-soon').textContent = soonCount;
          
          if (expiringData.listings.length === 0) {
            // Show empty state
            if (emptyEl) emptyEl.classList.remove('hidden');
            if (listEl) listEl.innerHTML = '';
          } else {
            // Render listings
            renderExpiringListings();
            
            // Show pagination if needed
            const totalPages = Math.ceil(expiringData.total / expiringData.perPage);
            if (totalPages > 1 && paginationEl) {
              paginationEl.classList.remove('hidden');
              document.getElementById('expired-current-page').textContent = expiringData.page;
              document.getElementById('expired-total-pages').textContent = totalPages;
              document.getElementById('expired-prev').disabled = expiringData.page <= 1;
              document.getElementById('expired-next').disabled = expiringData.page >= totalPages;
            }
          }
        } else {
          // No data
          if (emptyEl) emptyEl.classList.remove('hidden');
          if (listEl) listEl.innerHTML = '';
        }
      } catch (error) {
        console.error('Error loading expiring listings:', error);
        if (loadingEl) loadingEl.classList.add('hidden');
        if (listEl) listEl.innerHTML = `
          <div class="bg-red-50 border border-red-200 rounded-lg p-4 text-center">
            <p class="text-red-600 font-medium">Failed to load expiring listings</p>
            <p class="text-red-500 text-sm mt-1">${error.message || 'Unknown error'}</p>
            <button onclick="loadExpiringListings(1)" class="mt-3 px-4 py-2 bg-red-100 text-red-700 rounded-lg text-sm font-medium hover:bg-red-200">
              Try Again
            </button>
          </div>
        `;
      }
    }
    
    // Render Expiring Listings
    function renderExpiringListings() {
      const listEl = document.getElementById('expired-list');
      if (!listEl) return;
      
      const listings = expiringData.listings;
      
      if (listings.length === 0) {
        listEl.innerHTML = '';
        return;
      }
      
      let html = '';
      
      listings.forEach(listing => {
        const address = listing.address || listing.propertyAddress || 'Unknown Address';
        const suburb = listing.suburb || '';
        const agentName = listing.agentName || listing.agent || 'Unknown Agent';
        const agencyName = listing.agencyName || listing.agency || '';
        const phone = listing.phone || listing.mobile || '';
        const email = listing.email || '';
        const price = listing.price || listing.listingPrice || '';
        const expiryDate = listing.expiryDate ? new Date(listing.expiryDate) : null;
        const listingDate = listing.listingDate || listing.listedDate ? new Date(listing.listingDate || listing.listedDate) : null;
        const propertyType = listing.propertyType || 'Property';
        const bedrooms = listing.bedrooms || '';
        const bathrooms = listing.bathrooms || '';
        
        // Calculate urgency
        const now = new Date();
        const daysUntilExpiry = expiryDate ? Math.ceil((expiryDate - now) / (1000 * 60 * 60 * 24)) : null;
        let urgencyClass = 'bg-amber-100 text-amber-700';
        let urgencyText = 'Expiring Soon';
        
        if (daysUntilExpiry !== null) {
          if (daysUntilExpiry <= 0) {
            urgencyClass = 'bg-red-100 text-red-700';
            urgencyText = 'Expired';
          } else if (daysUntilExpiry <= 7) {
            urgencyClass = 'bg-red-100 text-red-700';
            urgencyText = `${daysUntilExpiry} days left`;
          } else if (daysUntilExpiry <= 30) {
            urgencyClass = 'bg-amber-100 text-amber-700';
            urgencyText = `${daysUntilExpiry} days left`;
          } else {
            urgencyClass = 'bg-green-100 text-green-700';
            urgencyText = `${daysUntilExpiry} days left`;
          }
        }
        
        html += `
          <div class="bg-white rounded-xl shadow-sm border border-gray-100 p-4 hover:shadow-md transition-shadow">
            <div class="flex items-start justify-between">
              <div class="flex-1">
                <div class="flex items-center space-x-3 mb-2">
                  <h3 class="text-lg font-semibold text-gray-900">${address}</h3>
                  <span class="px-2 py-0.5 rounded-full text-xs font-medium ${urgencyClass}">${urgencyText}</span>
                </div>
                ${suburb ? `<p class="text-sm text-gray-500 mb-2">${suburb}</p>` : ''}
                
                <div class="flex items-center space-x-4 text-sm text-gray-600 mb-3">
                  ${propertyType ? `<span class="flex items-center space-x-1"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"/></svg><span>${propertyType}</span></span>` : ''}
                  ${bedrooms ? `<span>${bedrooms} bed</span>` : ''}
                  ${bathrooms ? `<span>${bathrooms} bath</span>` : ''}
                  ${price ? `<span class="font-semibold text-gray-900">${price}</span>` : ''}
                </div>
                
                <div class="flex items-center space-x-4 text-sm">
                  <div class="flex items-center space-x-2">
                    <div class="w-8 h-8 bg-gray-200 rounded-full flex items-center justify-center">
                      <svg class="w-4 h-4 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"/></svg>
                    </div>
                    <div>
                      <p class="font-medium text-gray-900">${agentName}</p>
                      ${agencyName ? `<p class="text-xs text-gray-500">${agencyName}</p>` : ''}
                    </div>
                  </div>
                </div>
              </div>
              
              <div class="flex flex-col items-end space-y-2">
                ${expiryDate ? `<p class="text-xs text-gray-500">Expires: ${expiryDate.toLocaleDateString()}</p>` : ''}
                ${listingDate ? `<p class="text-xs text-gray-400">Listed: ${listingDate.toLocaleDateString()}</p>` : ''}
                
                <div class="flex items-center space-x-2 mt-2">
                  ${phone ? `
                    <a href="tel:${phone}" class="p-2 bg-green-100 text-green-600 rounded-lg hover:bg-green-200 transition-colors" title="Call ${phone}">
                      <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"/></svg>
                    </a>
                  ` : ''}
                  ${email ? `
                    <a href="mailto:${email}" class="p-2 bg-blue-100 text-blue-600 rounded-lg hover:bg-blue-200 transition-colors" title="Email ${email}">
                      <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"/></svg>
                    </a>
                  ` : ''}
                  <button onclick="addToLeads('${listing.id || ''}')" class="p-2 bg-sky-100 text-sky-600 rounded-lg hover:bg-sky-200 transition-colors" title="Add to leads">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"/></svg>
                  </button>
                </div>
              </div>
            </div>
          </div>
        `;
      });
      
      listEl.innerHTML = html;
    }
    
    // Add expiring listing to leads (placeholder)
    function addToLeads(listingId) {
      showToast('ðŸ“¥ Added to your leads!');
    }
    
    // =====================================
    // END EXPIRING LISTINGS FUNCTIONS
    // =====================================
    
    // Helper: time ago
    function getTimeAgo(date) {
      const now = new Date();
      const diffMs = now - date;
      const diffMins = Math.floor(diffMs / 60000);
      const diffHours = Math.floor(diffMs / 3600000);
      const diffDays = Math.floor(diffMs / 86400000);
      
      if (diffMins < 1) return 'Just now';
      if (diffMins < 60) return diffMins + 'm ago';
      if (diffHours < 24) return diffHours + 'h ago';
      if (diffDays < 7) return diffDays + 'd ago';
      return date.toLocaleDateString();
    }
    
    // Get Expired Listings
    async function apiGetExpiredListings(options = {}) {
      const body = {
        page: options.page || 1,
        perPage: options.perPage || 20
      };
      return await apiRequest('/lead/expired-listings', 'POST', body);
    }
    
    // Get Dashboard Metrics
    async function apiGetDashboardMetrics() {
      return await apiRequest('/lead/dashboard-matrix?isDepricated=false', 'GET');
    }
    
    // Get User Analytics
    async function apiGetUserAnalytics() {
      return await apiRequest('/user/analytics', 'GET');
    }
    
    // Get My Suburbs List
    async function apiGetMySuburbs() {
      return await apiRequest('/lead/my-suburbs-list', 'GET');
    }
    
    // Get Leaderboard
    async function apiGetLeaderboard(options = {}) {
      const body = {
        page: options.page || 1,
        perPage: options.perPage || 20
      };
      return await apiRequest('/user/leaderboard', 'POST', body);
    }
    
    // =====================================
    // LEADERBOARD FUNCTIONS
    // =====================================
    
    let leaderboardData = { results: [], page: 1, total: 0, perPage: 50 };
    let leaderboardCurrentPage = 1;
    const LEADERBOARD_PER_PAGE = 50;
    
    // Load leaderboard from API
    async function loadLeaderboard(page = 1) {
      const rowsContainer = document.getElementById('leaderboard-rows');
      
      // Show loading state
      if (page === 1) {
        rowsContainer.innerHTML = `
          <div class="px-6 py-8 text-center text-gray-500">
            <div class="animate-pulse">Loading leaderboard...</div>
          </div>
        `;
      }
      
      try {
        const data = await apiGetLeaderboard({ page: page, perPage: LEADERBOARD_PER_PAGE });
        
        if (data && data.results) {
          leaderboardData = data;
          leaderboardCurrentPage = page;
          
          // Update podium only on first page load
          if (page === 1) {
            updateLeaderboardPodium(data.results.slice(0, 3));
          }
          
          // Render the table
          renderLeaderboard(data.results, page);
          
          // Update pagination
          updateLeaderboardPagination(data);
        }
      } catch (error) {
        console.error('Failed to load leaderboard:', error);
        rowsContainer.innerHTML = `
          <div class="px-6 py-8 text-center text-red-500">
            Failed to load leaderboard. <button onclick="loadLeaderboard(${page})" class="text-primary underline">Retry</button>
          </div>
        `;
      }
    }
    
    // Load specific page
    function loadLeaderboardPage(direction) {
      const totalPages = Math.ceil(leaderboardData.total / LEADERBOARD_PER_PAGE);
      let newPage = leaderboardCurrentPage;
      
      if (direction === 'next' && leaderboardCurrentPage < totalPages) {
        newPage = leaderboardCurrentPage + 1;
      } else if (direction === 'prev' && leaderboardCurrentPage > 1) {
        newPage = leaderboardCurrentPage - 1;
      }
      
      if (newPage !== leaderboardCurrentPage) {
        loadLeaderboard(newPage);
      }
    }
    
    // Update pagination controls
    function updateLeaderboardPagination(data) {
      const paginationDiv = document.getElementById('leaderboard-pagination');
      const showingEl = document.getElementById('leaderboard-showing');
      const totalEl = document.getElementById('leaderboard-total');
      const pageInfoEl = document.getElementById('leaderboard-page-info');
      const prevBtn = document.getElementById('leaderboard-prev-btn');
      const nextBtn = document.getElementById('leaderboard-next-btn');
      
      if (!paginationDiv) return;
      
      const total = data.total || 0;
      const page = data.page || 1;
      const perPage = LEADERBOARD_PER_PAGE;
      const totalPages = Math.ceil(total / perPage);
      const startItem = ((page - 1) * perPage) + 1;
      const endItem = Math.min(page * perPage, total);
      
      // Show pagination if there's more than one page
      if (total > perPage) {
        paginationDiv.classList.remove('hidden');
      } else {
        paginationDiv.classList.add('hidden');
      }
      
      // Update text
      if (showingEl) showingEl.textContent = `${startItem}-${endItem}`;
      if (totalEl) totalEl.textContent = total.toLocaleString();
      if (pageInfoEl) pageInfoEl.textContent = `Page ${page} of ${totalPages}`;
      
      // Update button states
      if (prevBtn) {
        prevBtn.disabled = page <= 1;
      }
      if (nextBtn) {
        nextBtn.disabled = page >= totalPages;
      }
    }
    
    // Render leaderboard table rows (positions 4+)
    function renderLeaderboard(results, page = 1) {
      const container = document.getElementById('leaderboard-rows');
      if (!container) return;
      
      // On page 1, skip top 3 (shown in podium), show rest in table
      // On other pages, show all results
      const tableRows = page === 1 ? results.slice(3) : results;
      
      if (tableRows.length === 0) {
        container.innerHTML = `<div class="px-6 py-8 text-center text-gray-500">No more agents to show</div>`;
        return;
      }
      
      let html = '';
      
      tableRows.forEach(agent => {
        const name = `${agent.firstName || ''} ${agent.lastName || ''}`.trim() || 'Unknown';
        const photo = agent.profilePicture || `https://ui-avatars.com/api/?name=${encodeURIComponent(name)}&background=random`;
        const points = agent.totalPoints || 0;
        const position = agent.position || 0;
        
        // Highlight current user (if we know their ID)
        const isCurrentUser = agent.isCurrentUser || false;
        const rowClass = isCurrentUser ? 'bg-amber-50 border-l-4 border-l-amber-400' : 'hover:bg-gray-50';
        
        // Medal icons for top 3 (only shown on page 1)
        let rankDisplay = '';
        if (position === 1) {
          rankDisplay = '<span class="w-8 h-8 bg-amber-400 rounded-full flex items-center justify-center text-white text-sm font-bold">ðŸ¥‡</span>';
        } else if (position === 2) {
          rankDisplay = '<span class="w-8 h-8 bg-gray-300 rounded-full flex items-center justify-center text-white text-sm font-bold">ðŸ¥ˆ</span>';
        } else if (position === 3) {
          rankDisplay = '<span class="w-8 h-8 bg-amber-600 rounded-full flex items-center justify-center text-white text-sm font-bold">ðŸ¥‰</span>';
        } else {
          rankDisplay = `<span class="w-8 h-8 bg-gray-100 rounded-full flex items-center justify-center text-gray-600 text-sm font-bold">${position}</span>`;
        }
        
        html += `
          <div class="px-6 py-4 grid grid-cols-12 gap-4 items-center border-b border-gray-100 ${rowClass} transition-colors">
            <div class="col-span-1">
              ${rankDisplay}
            </div>
            <div class="col-span-9 flex items-center space-x-3">
              <img src="${photo}" alt="${name}" class="w-10 h-10 rounded-full object-cover" onerror="this.src='https://ui-avatars.com/api/?name=${encodeURIComponent(name)}&background=random'">
              <div>
                <span class="font-medium text-gray-900">${name}</span>
                ${isCurrentUser ? '<span class="ml-2 text-xs bg-amber-100 text-amber-700 px-2 py-0.5 rounded-full">You</span>' : ''}
              </div>
            </div>
            <div class="col-span-2 text-right">
              <span class="font-bold text-gray-900">${points.toLocaleString()}</span>
              <span class="text-xs text-gray-500 ml-1">pts</span>
            </div>
          </div>
        `;
      });
      
      container.innerHTML = html;
    }
    
    // Update podium with top 3
    async function updateLeaderboardPodium(top3) {
      if (top3.length < 3) return;
      
      // 1st place
      const first = top3[0];
      const firstPhoto = document.querySelector('#page-leaderboard .w-28.h-28 img');
      const firstNameEl = document.querySelector('#page-leaderboard .text-xl.font-bold');
      const firstPointsEl = document.querySelector('#page-leaderboard .text-5xl');
      
      if (firstPhoto) firstPhoto.src = first.profilePicture || `https://ui-avatars.com/api/?name=${first.firstName}&background=random`;
      if (firstNameEl) firstNameEl.textContent = `${first.firstName} ${first.lastName}`;
      if (firstPointsEl) firstPointsEl.textContent = first.totalPoints?.toLocaleString() || '0';
      
      // 2nd place (first in flex order)
      const secondContainer = document.querySelector('#page-leaderboard .flex.items-end > div:first-child');
      if (secondContainer) {
        const photo = secondContainer.querySelector('img');
        const nameEl = secondContainer.querySelector('.font-semibold');
        const pointsEl = secondContainer.querySelector('.text-3xl');
        if (photo) photo.src = top3[1].profilePicture || `https://ui-avatars.com/api/?name=${top3[1].firstName}&background=random`;
        if (nameEl) nameEl.textContent = `${top3[1].firstName} ${top3[1].lastName}`;
        if (pointsEl) pointsEl.textContent = top3[1].totalPoints?.toLocaleString() || '0';
      }
      
      // 3rd place (last in flex order)
      const thirdContainer = document.querySelector('#page-leaderboard .flex.items-end > div:last-child');
      if (thirdContainer) {
        const photo = thirdContainer.querySelector('img');
        const nameEl = thirdContainer.querySelector('.font-semibold');
        const pointsEl = thirdContainer.querySelector('.text-3xl');
        if (photo) photo.src = top3[2].profilePicture || `https://ui-avatars.com/api/?name=${top3[2].firstName}&background=random`;
        if (nameEl) nameEl.textContent = `${top3[2].firstName} ${top3[2].lastName}`;
        if (pointsEl) pointsEl.textContent = top3[2].totalPoints?.toLocaleString() || '0';
      }
      
      // Also fetch and update user's rank from dashboard metrics
      try {
        const metrics = await apiGetDashboardMetrics();
        if (metrics) {
          const rankEl = document.getElementById('leaderboard-your-rank');
          if (rankEl) rankEl.textContent = `#${metrics.rank || '-'}`;
          
          const totalUsersEl = document.getElementById('leaderboard-total-agents');
          if (totalUsersEl) totalUsersEl.textContent = (metrics.totalUsers || 0).toLocaleString();
        }
      } catch (e) {
        console.error('Failed to get user rank:', e);
      }
    }

    // Test API Endpoint and display result
    async function testApiEndpoint(type) {
      const resultDiv = document.getElementById('api-test-result');
      const outputPre = document.getElementById('api-test-output');
      
      resultDiv.classList.remove('hidden');
      outputPre.textContent = 'Loading...';
      
      try {
        let data;
        switch(type) {
          case 'leads':
            data = await apiGetAllLeads({ perPage: 5 });
            break;
          case 'inbox':
            data = await apiGetInbox({ perPage: 5 });
            break;
          case 'expired':
            data = await apiGetExpiredListings({ perPage: 5 });
            break;
          case 'dashboard':
            data = await apiGetDashboardMetrics();
            break;
          case 'analytics':
            data = await apiGetUserAnalytics();
            break;
          case 'suburbs':
            data = await apiGetMySuburbs();
            break;
          default:
            data = { error: 'Unknown endpoint' };
        }
        outputPre.textContent = JSON.stringify(data, null, 2);
        showToast('âœ“ API call successful!');
      } catch (error) {
        outputPre.textContent = 'Error: ' + error.message;
        showToast('âœ— API call failed: ' + error.message);
      }
    }
    
    // ===== AUTH FUNCTIONS =====
    
    // ===== AUTH FUNCTIONS =====
    async function sendOTP() {
      const phone = document.getElementById('api-phone').value.trim();
      if (!phone) {
        showToast('Please enter your phone number');
        return;
      }
      
      // Format phone number (remove + and leading 0, ensure country code)
      let formattedPhone = phone.replace(/\s+/g, '').replace(/^\+/, '');
      if (formattedPhone.startsWith('0')) {
        formattedPhone = '61' + formattedPhone.substring(1);
      }
      if (!formattedPhone.startsWith('61')) {
        formattedPhone = '61' + formattedPhone;
      }
      
      try {
        showToast('Sending OTP...');
        
        const response = await fetch(`${API_BASE_URL}/auth/get-code-VBAjxKD7`, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ phoneNumber: formattedPhone })
        });
        
        if (!response.ok) {
          const error = await response.json().catch(() => ({}));
          throw new Error(error.message || 'Failed to send OTP');
        }
        
        // Store formatted phone for login
        document.getElementById('api-phone').value = formattedPhone;
        
        // Show the OTP input section
        document.getElementById('otp-section').classList.remove('hidden');
        document.getElementById('btn-send-otp').textContent = 'Resend OTP';
        showToast('âœ“ OTP sent! Check your phone for the code');
        
      } catch (error) {
        console.error('Send OTP error:', error);
        showToast('âœ— Failed to send OTP: ' + error.message);
      }
    }
    
    async function verifyOTP() {
      let phoneNumber = document.getElementById('api-phone').value.trim();
      const code = document.getElementById('api-otp').value.trim();
      
      if (!code || code.length !== 6) {
        showToast('Please enter the 6-digit OTP');
        return;
      }
      
      // Ensure phone format matches what sendOTP used (no + prefix)
      phoneNumber = phoneNumber.replace(/\s+/g, '').replace(/^\+/, '');
      if (phoneNumber.startsWith('0')) {
        phoneNumber = '61' + phoneNumber.substring(1);
      }
      if (!phoneNumber.startsWith('61') && phoneNumber.length === 9) {
        phoneNumber = '61' + phoneNumber;
      }
      
      try {
        showToast('Logging in...');
        console.log('Login attempt with:', { phoneNumber, code });
        
        // Using the key-protected login endpoint
        const response = await fetch(`${API_BASE_URL}/auth/login-9G8LNToV`, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ phoneNumber, code })
        });
        
        const data = await response.json();
        console.log('Login response:', data);
        
        if (!response.ok) {
          throw new Error(data.message || data.error || 'Invalid OTP code');
        }
        
        // Store the access token
        if (data.accessToken) {
          setApiToken(data.accessToken);
          console.log('Token saved:', data.accessToken.substring(0, 50) + '...');
          
          // Also store refresh token for later
          if (data.refreshToken) {
            localStorage.setItem('propdeals_refresh', data.refreshToken);
          }
          
          // Clear cached suburbs since we're a new user
          clearSuburbsCache();
          
          updateApiStatusUI(true);
          showToast('âœ“ Logged in successfully!');
          
          // Clear the form
          document.getElementById('api-phone').value = '';
          document.getElementById('api-otp').value = '';
          document.getElementById('otp-section').classList.add('hidden');
          document.getElementById('btn-send-otp').textContent = 'Send OTP';
          
          hideSettingsDetail();
          
          // Reload dashboard data (small delay to let token propagate)
          setTimeout(() => loadDashboardData(), 500);
        } else {
          throw new Error('No access token received from server');
        }
      } catch (error) {
        console.error('Verify OTP error:', error);
        showToast('âœ— Login failed: ' + error.message);
      }
    }
    
    function toggleManualToken() {
      const section = document.getElementById('manual-token-section');
      section.classList.toggle('hidden');
    }
    
    function saveApiSettings() {
      const token = document.getElementById('api-token').value.trim();
      if (token) {
        setApiToken(token);
        updateApiStatusUI(true);
        showToast('API token saved successfully!');
        hideSettingsDetail();
      } else if (!isApiConnected()) {
        showToast('Please enter a token or log in with your phone');
      } else {
        hideSettingsDetail();
      }
    }
    
    // =====================================
    // DASHBOARD DATA LOADING
    // =====================================
    
    let dashboardLoading = false;
    
    async function loadDashboardData() {
      if (dashboardLoading) return;
      dashboardLoading = true;
      
      const token = localStorage.getItem('propdeals_jwt');
      if (!token) {
        dashboardLoading = false;
        return;
      }
      
      // Update date display
      const dateEl = document.getElementById('dashboard-date');
      if (dateEl) {
        const now = new Date();
        const options = { weekday: 'long', month: 'short', day: 'numeric' };
        dateEl.textContent = now.toLocaleDateString('en-AU', options);
      }
      
      // Update greeting based on time of day
      const greetingEl = document.querySelector('#page-dashboard h1');
      if (greetingEl) {
        const hour = new Date().getHours();
        let greeting = 'Good morning';
        if (hour >= 12 && hour < 17) greeting = 'Good afternoon';
        else if (hour >= 17) greeting = 'Good evening';
        greetingEl.textContent = greeting;
      }
      
      try {
        // Fetch all dashboard data in parallel
        const [metrics, suburbs] = await Promise.all([
          apiGetDashboardMetrics(),
          getSubscribedSuburbs()
        ]);
        
        // Update stats
        if (metrics) {
          // Leads Unlocked
          const unlockedEl = document.getElementById('stat-leads-unlocked');
          if (unlockedEl) unlockedEl.textContent = metrics.unLockedLeadsCount || 0;
          
          // Leaderboard Position
          const rankEl = document.getElementById('stat-leaderboard-position');
          if (rankEl) rankEl.textContent = '#' + (metrics.rank || '-');
          
          // Marketing Opportunities
          const opportunitiesEl = document.getElementById('stat-marketing-opportunities');
          if (opportunitiesEl) opportunitiesEl.textContent = (metrics.totalOpportunities || 0).toLocaleString();
        }
        
        // Get top 3 hot leads for dashboard
        if (suburbs.length > 0) {
          const hotLeadsData = await apiGetAllLeads({
            page: 1,
            perPage: 3,
            sellingScore: { min: 75, max: 100 },
            suburbs: suburbs
          });
          
          if (hotLeadsData && hotLeadsData.leads) {
            renderDashboardHotLeads(hotLeadsData.leads);
            
            // Update hero section with #1 lead if available
            if (hotLeadsData.leads.length > 0) {
              updateHeroLead(hotLeadsData.leads[0]);
            }
          }
        }
        
        // Get expiring listings for dashboard
        const expiredData = await apiGetExpiredListings({ page: 1, perPage: 3 });
        if (expiredData && expiredData.expiredLeads) {
          renderDashboardExpiring(expiredData.expiredLeads);
        }
        
      } catch (error) {
        console.error('Failed to load dashboard data:', error);
      } finally {
        dashboardLoading = false;
      }
    }
    
    function renderDashboardHotLeads(leads) {
      const container = document.getElementById('dashboard-hot-leads');
      if (!container) return;
      
      if (leads.length === 0) {
        container.innerHTML = `<div class="px-4 py-6 text-center text-gray-500 text-sm">No hot leads found in your suburbs</div>`;
        return;
      }
      
      let html = '';
      leads.forEach(lead => {
        const address = lead.streetAddress || lead.fullAddress || 'Unknown';
        const score = lead.sellingScore || 0;
        const suburb = lead.suburb || '';
        
        // Parse price
        let priceText = 'Est. value unknown';
        if (lead.salePrice) {
          const price = parseFloat(lead.salePrice.replace(/[$,]/g, ''));
          if (price >= 1000000) {
            priceText = `Est. $${(price / 1000000).toFixed(1)}M`;
          } else {
            priceText = `Est. $${Math.round(price / 1000)}K`;
          }
        }
        
        // Build signals
        const signals = [];
        if (lead.requested) signals.push('<span class="px-1.5 py-0.5 bg-green-100 text-green-700 text-xs rounded">Requested</span>');
        if (lead.garageSale) signals.push('<span class="px-1.5 py-0.5 bg-amber-100 text-amber-700 text-xs rounded">Garage Sale</span>');
        if (lead.neighbourSold) signals.push('<span class="px-1.5 py-0.5 bg-blue-100 text-blue-700 text-xs rounded">Neighbour Sold</span>');
        if (lead.recentlySold) signals.push('<span class="px-1.5 py-0.5 bg-purple-100 text-purple-700 text-xs rounded">Recently Sold</span>');
        
        // Color based on score
        let scoreColor = 'bg-yellow-100 text-yellow-700';
        if (score >= 90) scoreColor = 'bg-green-100 text-green-700';
        else if (score >= 75) scoreColor = 'bg-emerald-100 text-emerald-700';
        
        html += `
          <div class="px-4 py-3 hover:bg-gray-50 cursor-pointer" onclick="showLeadDetail('${address.replace(/'/g, "\\'")} ${suburb}', ${score})">
            <div class="flex items-center justify-between mb-1">
              <span class="text-sm font-medium text-gray-900">${address}, ${suburb}</span>
              <span class="w-6 h-6 ${scoreColor} rounded-full text-xs font-bold flex items-center justify-center">${score}</span>
            </div>
            <p class="text-xs text-gray-500">${priceText}</p>
            ${signals.length > 0 ? `<div class="flex items-center space-x-2 mt-2">${signals.slice(0,2).join('')}</div>` : ''}
          </div>
        `;
      });
      
      container.innerHTML = html;
    }
    
    function updateHeroLead(lead) {
      const heroSection = document.querySelector('#page-dashboard .bg-gradient-to-r.from-green-600');
      if (!heroSection) return;
      
      const address = lead.streetAddress || lead.fullAddress || 'Unknown';
      const suburb = lead.suburb || '';
      const score = lead.sellingScore || 0;
      const ownerName = lead.owner1Name || 'Owner';
      
      // Calculate commission (2.5% of sale price)
      let commission = '$0';
      if (lead.salePrice) {
        const price = parseFloat(lead.salePrice.replace(/[$,]/g, ''));
        commission = '$' + Math.round(price * 0.025).toLocaleString();
      }
      
      // Build signals text
      const signals = [];
      if (lead.requested) signals.push('Valuation requested');
      if (lead.ownerType === 'Owner Occupied') signals.push('Owner occupied');
      if (lead.neighbourSold) signals.push('Neighbour sold');
      
      // Calculate time since update
      let timeText = '';
      if (lead.updatedAt) {
        const updated = new Date(lead.updatedAt);
        const now = new Date();
        const diffDays = Math.floor((now - updated) / (1000 * 60 * 60 * 24));
        if (diffDays === 0) timeText = 'Updated today';
        else if (diffDays === 1) timeText = 'Updated yesterday';
        else timeText = `Updated ${diffDays} days ago`;
      }
      
      // Update hero content
      const titleEl = heroSection.querySelector('h2');
      if (titleEl) titleEl.textContent = `${ownerName} â€¢ ${address}`;
      
      const subtitleEl = heroSection.querySelector('.text-green-100.text-sm');
      if (subtitleEl) subtitleEl.textContent = `${suburb} â€¢ ${timeText} â€¢ Score: ${score}/100`;
      
      const commissionEl = heroSection.querySelector('.text-2xl.font-bold');
      if (commissionEl) commissionEl.textContent = commission;
      
      // Update signal chips
      const signalContainer = heroSection.querySelector('.flex.items-center.space-x-3.text-xs');
      if (signalContainer && signals.length > 0) {
        signalContainer.innerHTML = signals.slice(0, 3).map(s => `
          <span class="flex items-center space-x-1"><svg class="w-3.5 h-3.5" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/></svg><span>${s}</span></span>
        `).join('');
      }
    }
    
    function renderDashboardExpiring(listings) {
      const container = document.getElementById('dashboard-expiring');
      if (!container) return;
      
      if (listings.length === 0) {
        container.innerHTML = `<div class="px-4 py-6 text-center text-gray-500 text-sm">No expiring listings found</div>`;
        return;
      }
      
      let html = '';
      listings.forEach(listing => {
        const address = listing.streetAddress || listing.fullAddress || 'Unknown';
        const suburb = listing.suburb || '';
        const agency = listing.agency || 'Unknown agency';
        
        // Calculate days until expiry
        let daysText = '';
        let badgeColor = 'bg-amber-100 text-amber-700';
        if (listing.expiryDate) {
          const expiry = new Date(listing.expiryDate);
          const now = new Date();
          const diffDays = Math.ceil((expiry - now) / (1000 * 60 * 60 * 24));
          if (diffDays <= 0) {
            daysText = 'Expired';
            badgeColor = 'bg-red-100 text-red-700';
          } else if (diffDays <= 3) {
            daysText = diffDays + ' days';
            badgeColor = 'bg-red-100 text-red-700';
          } else if (diffDays <= 7) {
            daysText = diffDays + ' days';
            badgeColor = 'bg-orange-100 text-orange-700';
          } else {
            daysText = diffDays + ' days';
          }
        }
        
        // Parse price
        let priceText = '';
        if (listing.salePrice) {
          priceText = listing.salePrice;
        }
        
        html += `
          <div class="px-4 py-3 hover:bg-gray-50 cursor-pointer">
            <div class="flex items-center justify-between mb-1">
              <span class="text-sm font-medium text-gray-900">${address}, ${suburb}</span>
              ${daysText ? `<span class="px-2 py-0.5 ${badgeColor} text-xs font-medium rounded-full">${daysText}</span>` : ''}
            </div>
            <p class="text-xs text-gray-500">Listed with ${agency}</p>
            <div class="flex items-center justify-between mt-2">
              <span class="text-xs text-gray-400">${priceText}</span>
              <button class="px-2 py-1 bg-primary text-white text-xs rounded-lg font-medium hover:bg-primary/90">Contact</button>
            </div>
          </div>
        `;
      });
      
      container.innerHTML = html;
    }
    
    async function testApiConnection() {
      if (!isApiConnected()) {
        showToast('No token configured. Please log in first.');
        return;
      }
      
      try {
        const result = await apiGetDashboardMetrics();
        console.log('API Test Result:', result);
        updateApiStatusUI(true);
        showToast('âœ“ Connection successful!');
      } catch (error) {
        console.error('API Test Error:', error);
        updateApiStatusUI(false);
        showToast('âœ— Connection failed: ' + error.message);
      }
    }
    
    function updateApiStatusUI(connected) {
      const icon = document.getElementById('api-status-icon');
      const text = document.getElementById('api-status-text');
      const detail = document.getElementById('api-status-detail');
      
      if (connected) {
        icon.className = 'w-10 h-10 bg-green-100 rounded-full flex items-center justify-center';
        icon.innerHTML = '<svg class="w-5 h-5 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/></svg>';
        text.textContent = 'Connected';
        text.className = 'font-semibold text-green-600';
        detail.textContent = 'API is ready to use';
      } else {
        icon.className = 'w-10 h-10 bg-red-100 rounded-full flex items-center justify-center';
        icon.innerHTML = '<svg class="w-5 h-5 text-red-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/></svg>';
        text.textContent = 'Connection Failed';
        text.className = 'font-semibold text-red-600';
        detail.textContent = 'Check your credentials and try again';
      }
    }
    
    // Check connection status on page load
    function initApiStatus() {
      if (isApiConnected()) {
        // We have a token, but don't know if it's valid until we test
        const icon = document.getElementById('api-status-icon');
        const text = document.getElementById('api-status-text');
        const detail = document.getElementById('api-status-detail');
        if (icon) {
          icon.className = 'w-10 h-10 bg-amber-100 rounded-full flex items-center justify-center';
          icon.innerHTML = '<svg class="w-5 h-5 text-amber-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>';
          text.textContent = 'Token Saved';
          text.className = 'font-semibold text-amber-600';
          detail.textContent = 'Click "Test Connection" to verify';
        }
        
        // Load saved token into textarea
        const tokenField = document.getElementById('api-token');
        if (tokenField) {
          tokenField.value = getApiToken();
        }
      }
    }
    
    // ===== GOOGLE SHEETS INTEGRATION =====
    // Your Google Sheet ID
    const GOOGLE_SHEET_ID = '1oNLUkkTCy0TQdIFcTkmfGE-hprS7a2Bo4lT7okQWfyQ';
    const SHEET_NAME = 'Sheet1'; // Change if your tab has a different name
    
    // Column mapping from your spreadsheet
    const COLUMN_MAP = {
      leadName: 0,        // Lead Details (column A)
      dateReceived: 1,    // Date Received (column B)
      bedroom: 2,         // Bedroom (column C)
      bathroom: 3,        // Bathroom (column D)
      expectedPrice: 4,   // Expected Price (column E)
      email: 5,           // Email (column F)
      phone: 6,           // Phone Number (column G)
      address: 7,         // Address (column H)
      timeframe: 8,       // Selling Time Frame (column I)
      userId: 9,          // User ID (column J)
      leadCount: 10,      // Lead Count (column K)
      fullLeadA: 11,      // Full Lead (A) (column L)
      fullLeadB: 12,      // Full Lead (B) (column M)
      // column N is blank
      agentComments: 14,  // Agent Comments (column O)
      likelihood: 15,     // Likelihood of Listing (%) (column P)
      followups: 16,      // Number of Followups (column Q)
      appraisalSent: 17,  // Appraisal Sent (column R)
      appointment: 18,    // Appointment (column S)
      listing: 19,        // Listing (column T)
      onlineValuation: 20, // Online Valuation (Median) (column U)
      estimatedCommission: 21 // Estimated Commission (2%) (column V)
    };
    
    let sheetsData = [];
    let isLoadingSheets = false;
    
    // Gemini API Configuration
    const GEMINI_API_KEY = 'AIzaSyBEk_nIFYsn71DNaAlq8fuko8DKFc_wEYQ';
    const GEMINI_API_URL = 'https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash:generateContent';
    
    // Call Gemini API
    async function callGeminiAPI(prompt) {
      console.log('ðŸ¤– Calling Gemini API...');
      try {
        const response = await fetch(`${GEMINI_API_URL}?key=${GEMINI_API_KEY}`, {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          },
          body: JSON.stringify({
            contents: [{
              parts: [{
                text: prompt
              }]
            }],
            generationConfig: {
              temperature: 0.7,
              maxOutputTokens: 1024,
              responseMimeType: "application/json"
            }
          })
        });
        
        console.log('ðŸ¤– Gemini response status:', response.status);
        
        if (!response.ok) {
          const errorText = await response.text();
          console.error('ðŸ¤– Gemini error response:', errorText);
          throw new Error(`Gemini API error: ${response.status} - ${errorText}`);
        }
        
        const data = await response.json();
        console.log('ðŸ¤– Gemini data:', data);
        const text = data.candidates?.[0]?.content?.parts?.[0]?.text;
        if (!text) {
          console.error('ðŸ¤– No text in Gemini response:', data);
          throw new Error('No text in Gemini response');
        }
        console.log('ðŸ¤– Gemini raw response:', text);
        return text;
      } catch (error) {
        console.error('ðŸ¤– Gemini API error:', error);
        throw error;
      }
    }
    
    // Helper to parse JSON from AI response (handles markdown code blocks)
    function parseAIJsonResponse(response) {
      if (!response) return null;
      
      // Try direct parse first (if responseMimeType worked)
      try {
        return JSON.parse(response);
      } catch (e) {
        // Continue to other methods
      }
      
      // Remove markdown code blocks if present
      let cleaned = response.replace(/```json\s*/gi, '').replace(/```\s*/g, '');
      
      // Try to extract JSON object
      const jsonMatch = cleaned.match(/\{[\s\S]*\}/);
      if (jsonMatch) {
        try {
          return JSON.parse(jsonMatch[0]);
        } catch (e) {
          console.error('Failed to parse extracted JSON:', e);
        }
      }
      
      return null;
    }
    
    // Cache for property valuations
    const propertyValuationCache = {};
    
    // Estimate property value using Gemini AI
    async function estimatePropertyValue(lead) {
      // Create cache key
      const cacheKey = `${lead.streetAddress || ''}_${lead.suburb || ''}_${lead.state || ''}`.toLowerCase();
      
      // Return cached value if exists
      if (propertyValuationCache[cacheKey]) {
        return propertyValuationCache[cacheKey];
      }
      
      const prompt = `Estimate the current market value for a residential property in ${lead.suburb || 'Unknown'}, ${lead.state || 'Australia'}.

Property: ${lead.bed || 3} bedroom, ${lead.bath || 1} bathroom house.

Return ONLY valid JSON:
{"estimatedValue": 750000, "confidence": "medium"}`;

      try {
        const response = await callGeminiAPI(prompt);
        const parsed = parseAIJsonResponse(response);
        
        if (parsed && parsed.estimatedValue) {
          // Cache the result
          propertyValuationCache[cacheKey] = parsed;
          return parsed;
        }
      } catch (error) {
        console.error('Property valuation error:', error);
      }
      
      return null;
    }
    
    // Batch estimate property values for multiple leads
    async function batchEstimatePropertyValues(leads) {
      const leadsNeedingEstimates = leads.filter(lead => !lead.salePrice || lead.salePrice === '');
      
      // Process in parallel (max 3 at a time to avoid rate limits)
      const batchSize = 3;
      for (let i = 0; i < leadsNeedingEstimates.length; i += batchSize) {
        const batch = leadsNeedingEstimates.slice(i, i + batchSize);
        await Promise.all(batch.map(async (lead) => {
          const estimate = await estimatePropertyValue(lead);
          if (estimate) {
            lead.estimatedValue = estimate.estimatedValue;
            lead.valueConfidence = estimate.confidence;
          }
        }));
      }
      
      return leads;
    }

    // Generate AI Insights for a lead
    async function generateAIInsights(lead) {
      const prompt = `You are a real estate AI assistant. Analyze this property lead and provide insights.

Property Details:
- Address: ${lead.address || 'Not provided'}
- Bedrooms: ${lead.bedroom || 'Unknown'}
- Bathrooms: ${lead.bathroom || 'Unknown'}
- Expected Price: ${lead.expectedPrice || 'Not specified'}
- Selling Timeframe: ${lead.timeframe || 'Not specified'}
- Online Valuation: ${lead.onlineValuation || 'Not available'}

Lead Details:
- Name: ${lead.leadName || 'Unknown'}
- Likelihood of Listing: ${lead.likelihood || 'Unknown'}%
- Number of Follow-ups: ${lead.followups || 0}
- Appraisal Sent: ${lead.appraisalSent || 'No'}
- Appointment Scheduled: ${lead.appointment || 'No'}

Respond in JSON format only with this exact structure (no markdown, just JSON):
{
  "confidence": <number 1-100>,
  "signals": [
    {"icon": "<emoji>", "text": "<signal description>", "positive": <true/false>}
  ],
  "summary": "<brief 1-2 sentence summary of the opportunity>"
}

Provide 3-5 detected signals based on the data. Use relevant emojis like ðŸ“Š ðŸ“ˆ â° ðŸ’° ðŸ“ ðŸ  ðŸ”‘ etc.`;

      const response = await callGeminiAPI(prompt);
      const parsed = parseAIJsonResponse(response);
      if (parsed) return parsed;
      throw new Error('Invalid JSON response from AI');
    }
    
    // Generate Outreach Script for a lead
    async function generateOutreachScript(lead) {
      const firstName = (lead.name || lead.leadName || 'the homeowner').split(' ')[0];
      const prompt = `You are an expert real estate agent coach. Create a personalized outreach strategy for this property lead.

Property Details:
- Address: ${lead.address || 'Not provided'}
- Bedrooms: ${lead.bedrooms || lead.bedroom || 'Unknown'}
- Bathrooms: ${lead.bathrooms || lead.bathroom || 'Unknown'}
- Expected Price: ${lead.expectedPrice || 'Not specified'}
- Selling Timeframe: ${lead.timeframe || 'Not specified'}

Lead Details:
- Name: ${lead.name || lead.leadName || 'Unknown'}
- First Name: ${firstName}
- Phone: ${lead.phone || 'Not provided'}
- Email: ${lead.email || 'Not provided'}
- Likelihood of Listing: ${lead.likelihood || 'Unknown'}%
- Previous Follow-ups: ${lead.followups || 0}

Respond in JSON format only with this exact structure (no markdown, just JSON):
{
  "propertySummary": "<1 line summary of the property, e.g. '3 bed, 2 bath home in [suburb]'>",
  "openingMessage": "<personalized SMS or call opener using their first name>",
  "callAngle": "<the main value proposition or hook to use>",
  "voicemailScript": "<short 15-second voicemail script if they don't answer>",
  "smsTemplate": "<personalized SMS template using their first name>",
  "doorKnockScript": "<what to say if door knocking - casual opener>",
  "bestContactMethod": "<Call/SMS/Email/Door Knock - which is best for this lead and why>",
  "objections": [
    {"objection": "<common objection>", "response": "<suggested response>"}
  ],
  "followUpTiming": "<suggested timing for follow-up>"
}

Make all scripts warm, personal, and use their first name (${firstName}). Provide 2 likely objections with responses.`;

      const response = await callGeminiAPI(prompt);
      const parsed = parseAIJsonResponse(response);
      if (parsed) return parsed;
      throw new Error('Invalid JSON response from AI');
    }
    
    // Generate Property Valuation
    async function generateValuation(lead) {
      const prompt = `You are a real estate valuation expert. Provide a property value estimate based on available data.

Property Details:
- Address: ${lead.address || 'Not provided'}
- Bedrooms: ${lead.bedroom || 'Unknown'}
- Bathrooms: ${lead.bathroom || 'Unknown'}
- Expected Price from Owner: ${lead.expectedPrice || 'Not specified'}
- Online Valuation (Median): ${lead.onlineValuation || 'Not available'}

Based on typical Australian property markets and the details provided, estimate the property value.

Respond in JSON format only with this exact structure (no markdown, just JSON):
{
  "lowEstimate": "<formatted dollar amount like $850,000>",
  "midEstimate": "<formatted dollar amount like $920,000>",
  "highEstimate": "<formatted dollar amount like $990,000>",
  "confidence": "<Low/Medium/High>",
  "reasoning": "<1-2 sentence explanation of the estimate>",
  "comparableNote": "<brief note about comparable properties>"
}

Be realistic with estimates based on Australian property values.`;

      const response = await callGeminiAPI(prompt);
      const parsed = parseAIJsonResponse(response);
      if (parsed) return parsed;
      throw new Error('Invalid JSON response from AI');
    }
    
    // Generate Appraisal Snapshot
    async function generateAppraisalSnapshot(lead) {
      const prompt = `You are a real estate appraisal expert. Create a comprehensive appraisal snapshot for this property.

Property Details:
- Address: ${lead.address || 'Not provided'}
- Bedrooms: ${lead.bedroom || 'Unknown'}
- Bathrooms: ${lead.bathroom || 'Unknown'}
- Expected Price: ${lead.expectedPrice || 'Not specified'}
- Online Valuation: ${lead.onlineValuation || 'Not available'}

Owner Details:
- Name: ${lead.leadName || 'Unknown'}
- Selling Timeframe: ${lead.timeframe || 'Not specified'}

Respond in JSON format only with this exact structure (no markdown, just JSON):
{
  "propertyType": "<House/Apartment/Townhouse/Unit>",
  "estimatedValue": {
    "low": "<formatted dollar amount>",
    "mid": "<formatted dollar amount>",
    "high": "<formatted dollar amount>"
  },
  "marketAnalysis": "<2-3 sentence market analysis>",
  "keyFeatures": ["<feature 1>", "<feature 2>", "<feature 3>"],
  "sellingPoints": ["<point 1>", "<point 2>", "<point 3>"],
  "recommendedStrategy": "<recommended selling strategy>",
  "estimatedDaysOnMarket": "<number range like 30-45>",
  "recommendedListPrice": "<formatted dollar amount>"
}

Be comprehensive and professional as this will be shared with the property owner.`;

      const response = await callGeminiAPI(prompt);
      const parsed = parseAIJsonResponse(response);
      if (parsed) return parsed;
      throw new Error('Invalid JSON response from AI');
    }
    
    // CSV Parser - handles quoted fields with commas
    function parseCSV(csvText) {
      const rows = [];
      const lines = csvText.split('\n');
      
      for (const line of lines) {
        if (!line.trim()) continue;
        
        const row = [];
        let current = '';
        let inQuotes = false;
        
        for (let i = 0; i < line.length; i++) {
          const char = line[i];
          
          if (char === '"') {
            if (inQuotes && line[i + 1] === '"') {
              current += '"';
              i++; // Skip next quote
            } else {
              inQuotes = !inQuotes;
            }
          } else if (char === ',' && !inQuotes) {
            row.push(current.trim());
            current = '';
          } else {
            current += char;
          }
        }
        row.push(current.trim()); // Push last field
        rows.push(row);
      }
      
      return rows;
    }
    
    async function fetchGoogleSheetsData() {
      if (GOOGLE_SHEET_ID === 'YOUR_SHEET_ID_HERE') {
        console.log('Google Sheets not configured - using mock data');
        return null;
      }
      
      isLoadingSheets = true;
      updateLoadingState();
      
      try {
        // Use CSV export - more reliable for all data types including phone numbers
        const url = `https://docs.google.com/spreadsheets/d/${GOOGLE_SHEET_ID}/export?format=csv&sheet=${SHEET_NAME}`;
        const response = await fetch(url);
        const csvText = await response.text();
        
        // Parse CSV
        const rows = parseCSV(csvText);
        console.log('=== CSV DATA DEBUG ===');
        console.log('Header row:', rows[0]);
        console.log('First data row:', rows[1]);
        
        // Skip header row, map to our data structure
        sheetsData = rows.slice(1).map((row, index) => {
          const getValue = (colIndex) => row[colIndex] || '';
          const getFormattedValue = (colIndex) => row[colIndex] || '';
          
          // Handle phone numbers - normalize to +61 Australian format
          const getPhoneValue = (colIndex) => {
            let phone = row[colIndex] || '';
            console.log(`Phone at index ${colIndex}:`, phone);
            if (!phone) return '';
            
            phone = String(phone).trim();
            
            // Remove all non-digit characters except leading +
            phone = phone.replace(/[^\d+]/g, '');
            console.log('Cleaned phone:', phone);
            
            // Normalize to +61 format
            if (phone.startsWith('+61')) {
              // Already correct format
              return phone;
            } else if (phone.startsWith('61') && phone.length >= 11) {
              // Has 61 prefix but missing +
              return '+' + phone;
            } else if (phone.startsWith('0') && phone.length === 10) {
              // Australian format starting with 0 (e.g., 0412345678)
              return '+61' + phone.substring(1);
            } else if (phone.startsWith('4') && phone.length === 9) {
              // Mobile number missing leading 0 (e.g., 412345678)
              return '+61' + phone;
            } else if (phone.length === 9 && /^\d+$/.test(phone)) {
              // 9 digit number, assume Australian mobile missing leading 0
              return '+61' + phone;
            } else if (phone.length === 10 && /^\d+$/.test(phone)) {
              // 10 digit number starting with something else, assume Australian
              return '+61' + phone.substring(1);
            }
            
            // Return as-is if we can't normalize
            return phone;
          };
          
          // Parse likelihood percentage
          let likelihood = getValue(COLUMN_MAP.likelihood);
          if (typeof likelihood === 'string') {
            likelihood = parseInt(likelihood.replace('%', '')) || 0;
          }
          
          // Determine signal type based on timeframe
          const timeframe = getValue(COLUMN_MAP.timeframe);
          let signalType = 'Requested valuation';
          if (timeframe.toLowerCase().includes('3 month')) signalType = 'Hot - 3 months';
          else if (timeframe.toLowerCase().includes('6 month')) signalType = 'Warm - 6 months';
          else if (timeframe.toLowerCase().includes('12 month')) signalType = 'Long term - 12 months';
          else if (timeframe.toLowerCase().includes('not sure')) signalType = 'Exploratory';
          else if (timeframe.toLowerCase().includes('already')) signalType = 'Already listed';
          
          return {
            id: index + 1,
            name: getValue(COLUMN_MAP.leadName),
            address: getValue(COLUMN_MAP.address),
            email: getValue(COLUMN_MAP.email),
            phone: getPhoneValue(COLUMN_MAP.phone),
            bedrooms: getValue(COLUMN_MAP.bedroom),
            bathrooms: getValue(COLUMN_MAP.bathroom),
            expectedPrice: getValue(COLUMN_MAP.expectedPrice),
            timeframe: timeframe,
            dateReceived: getValue(COLUMN_MAP.dateReceived),
            agentComments: getValue(COLUMN_MAP.agentComments),
            likelihood: likelihood,
            followups: getValue(COLUMN_MAP.followups),
            appraisalSent: getValue(COLUMN_MAP.appraisalSent),
            appointment: getValue(COLUMN_MAP.appointment),
            listing: getValue(COLUMN_MAP.listing),
            valuation: getFormattedValue(COLUMN_MAP.onlineValuation),
            commission: getFormattedValue(COLUMN_MAP.estimatedCommission),
            signalType: signalType,
            // Calculate AI score based on likelihood and other factors
            aiScore: Math.min(99, Math.max(20, likelihood + Math.floor(Math.random() * 20)))
          };
        }).filter(lead => {
          // Filter out empty rows
          if (!lead.name || !lead.address) return false;
          
          // Filter out non-lead entries (headers, separators, etc.)
          const excludeTerms = ['new month', 'obviously not leads', 'not a lead'];
          const checkFields = [lead.name, lead.address, lead.timeframe, lead.agentComments].join(' ').toLowerCase();
          
          for (const term of excludeTerms) {
            if (checkFields.includes(term)) return false;
          }
          
          return true;
        });
        
        console.log(`Loaded ${sheetsData.length} leads from Google Sheets`);
        // Debug: Log phone numbers to verify they're loading correctly
        console.log('Phone numbers loaded:', sheetsData.map(l => ({ name: l.name, phone: l.phone })));
        isLoadingSheets = false;
        updateLoadingState();
        renderSheetsLeads();
        return sheetsData;
        
      } catch (error) {
        console.error('Error fetching Google Sheets:', error);
        isLoadingSheets = false;
        updateLoadingState();
        showToast('Failed to load data from Google Sheets');
        return null;
      }
    }
    
    function updateLoadingState() {
      const indicator = document.getElementById('sheets-loading-indicator');
      if (indicator) {
        indicator.style.display = isLoadingSheets ? 'flex' : 'none';
      }
    }
    
    function renderSheetsLeads() {
      const container = document.getElementById('sheets-leads-list');
      if (!container || sheetsData.length === 0) return;
      
      container.innerHTML = sheetsData.map(lead => {
        const scoreColor = lead.aiScore >= 80 ? 'green' : lead.aiScore >= 60 ? 'yellow' : 'orange';
        const likelihoodColor = lead.likelihood >= 50 ? 'green' : lead.likelihood >= 25 ? 'yellow' : 'red';
        
        return `
          <div class="lead-row border-b border-gray-100 px-4 py-3 hover:bg-gray-50 cursor-pointer transition-colors" onclick="showSheetLeadDetail(${lead.id})">
            <div class="flex items-center justify-between">
              <div class="flex-1 min-w-0">
                <div class="flex items-center space-x-3">
                  <div class="flex-shrink-0 w-10 h-10 bg-primary/10 rounded-full flex items-center justify-center">
                    <span class="text-primary font-semibold text-sm">${lead.name.split(' ').map(n => n[0]).join('').substring(0, 2)}</span>
                  </div>
                  <div class="min-w-0 flex-1">
                    <p class="font-medium text-gray-900 truncate">${lead.name}</p>
                    <p class="text-sm text-gray-500 truncate">${lead.address}</p>
                  </div>
                </div>
              </div>
              <div class="flex items-center space-x-4 ml-4">
                <div class="text-right">
                  <p class="text-sm font-semibold text-gray-900">${lead.valuation || 'N/A'}</p>
                  <p class="text-xs text-gray-500">${lead.timeframe}</p>
                </div>
                <div class="flex items-center space-x-2">
                  <span class="px-2 py-1 text-xs rounded-full bg-${likelihoodColor}-100 text-${likelihoodColor}-700">${lead.likelihood}%</span>
                  <div class="w-10 h-10 rounded-full bg-${scoreColor}-100 flex items-center justify-center">
                    <span class="text-sm font-bold text-${scoreColor}-600">${lead.aiScore}</span>
                  </div>
                </div>
              </div>
            </div>
            <div class="flex items-center space-x-4 mt-2 text-xs text-gray-500">
              <span>ðŸ“… ${lead.dateReceived}</span>
              <span>ðŸ›ï¸ ${lead.bedrooms} bed</span>
              <span>ðŸ› ${lead.bathrooms} bath</span>
              <span class="px-2 py-0.5 bg-blue-50 text-blue-600 rounded-full">${lead.signalType}</span>
              ${lead.appraisalSent?.toLowerCase() === 'yes' ? '<span class="px-2 py-0.5 bg-green-50 text-green-600 rounded-full">âœ“ Appraisal Sent</span>' : ''}
              ${lead.appointment?.toLowerCase() === 'yes' ? '<span class="px-2 py-0.5 bg-purple-50 text-purple-600 rounded-full">âœ“ Appointment</span>' : ''}
            </div>
          </div>
        `;
      }).join('');
      
      // Update stats
      document.getElementById('sheets-lead-count').textContent = sheetsData.length;
      
      const totalCommission = sheetsData.reduce((sum, lead) => {
        const comm = parseFloat(lead.commission?.replace(/[$,]/g, '')) || 0;
        return sum + comm;
      }, 0);
      document.getElementById('sheets-total-commission').textContent = '$' + totalCommission.toLocaleString();
    }
    
    function showSheetLeadDetail(leadId) {
      const lead = sheetsData.find(l => l.id === leadId);
      if (!lead) return;
      
      // Populate lead detail page with sheet data
      showLeadDetail(lead.address, lead.aiScore, lead);
    }
    
    // ===== EXCLUSIVE LEADS PAGE RENDERING =====
    let selectedLeadIndex = 0;
    let currentSortOrder = 'hottest'; // 'hottest' or 'newest'
    
    // Get hotness score based on timeframe (lower = hotter)
    function getHotnessScore(timeframe) {
      const tf = (timeframe || '').toLowerCase();
      if (tf.includes('3 month') || tf.includes('0-3') || tf.includes('asap') || tf.includes('now') || tf.includes('immediate')) {
        return 1; // Hottest
      } else if (tf.includes('6 month') || tf.includes('3-6') || tf.includes('4 month') || tf.includes('5 month')) {
        return 2; // Warm
      } else if (tf.includes('12') || tf.includes('year')) {
        return 3; // Cold
      } else if (tf.includes('not sure') || tf.includes('don\'t know') || tf.includes('not now') || tf.includes('not yet') || tf.includes('already') || tf.includes('no')) {
        return 4; // Coldest
      }
      return 5; // Unknown
    }
    
    function sortLeads(order) {
      currentSortOrder = order;
      
      // Update button styles
      const hottestBtn = document.getElementById('sort-hottest');
      const newestBtn = document.getElementById('sort-newest');
      
      if (order === 'hottest') {
        hottestBtn.className = 'px-3 py-1 text-xs font-medium rounded-full bg-primary text-white';
        newestBtn.className = 'px-3 py-1 text-xs font-medium rounded-full bg-gray-100 text-gray-600 hover:bg-gray-200';
        
        // Sort by hotness (timeframe)
        sheetsData.sort((a, b) => getHotnessScore(a.timeframe) - getHotnessScore(b.timeframe));
      } else {
        newestBtn.className = 'px-3 py-1 text-xs font-medium rounded-full bg-primary text-white';
        hottestBtn.className = 'px-3 py-1 text-xs font-medium rounded-full bg-gray-100 text-gray-600 hover:bg-gray-200';
        
        // Sort by date (newest first)
        sheetsData.sort((a, b) => {
          const dateA = a.dateReceived || '';
          const dateB = b.dateReceived || '';
          return dateB.localeCompare(dateA);
        });
      }
      
      selectedLeadIndex = 0;
      renderExclusiveLeads();
    }
    
    function renderExclusiveLeads() {
      const container = document.getElementById('exclusive-leads-list');
      const loadingEl = document.getElementById('exclusive-loading');
      
      if (!container) return;
      
      // Show loading state
      if (sheetsData.length === 0 && GOOGLE_SHEET_ID !== 'YOUR_SHEET_ID_HERE') {
        if (loadingEl) loadingEl.style.display = 'flex';
        return;
      }
      
      // Hide loading
      if (loadingEl) loadingEl.style.display = 'none';
      
      // Check if sheet is configured
      if (GOOGLE_SHEET_ID === 'YOUR_SHEET_ID_HERE') {
        container.innerHTML = `
          <div class="flex flex-col items-center justify-center py-12 px-4 text-center">
            <svg class="w-12 h-12 text-gray-300 mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
            </svg>
            <p class="text-gray-600 font-medium mb-2">Connect Google Sheets</p>
            <p class="text-gray-400 text-sm">Configure your Sheet ID to see live leads</p>
          </div>
        `;
        return;
      }
      
      if (sheetsData.length === 0) {
        container.innerHTML = `
          <div class="flex flex-col items-center justify-center py-12 px-4 text-center">
            <svg class="w-12 h-12 text-gray-300 mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"/>
            </svg>
            <p class="text-gray-600 font-medium mb-2">No leads found</p>
            <p class="text-gray-400 text-sm">Your sheet appears to be empty</p>
          </div>
        `;
        return;
      }
      
      // Render lead cards
      container.innerHTML = sheetsData.map((lead, index) => {
        const isSelected = index === selectedLeadIndex;
        const scoreColor = lead.aiScore >= 80 ? 'green' : lead.aiScore >= 60 ? 'yellow' : 'orange';
        
        // Format date relative
        let dateDisplay = lead.dateReceived || '';
        
        // Determine timeframe color
        const tf = (lead.timeframe || '').toLowerCase();
        let timeframeColor = 'bg-gray-100 text-gray-700'; // default
        if (tf.includes('3 month') || tf.includes('0-3') || tf.includes('asap') || tf.includes('now') || tf.includes('immediate')) {
          timeframeColor = 'bg-green-100 text-green-700';
        } else if (tf.includes('6 month') || tf.includes('3-6') || tf.includes('4 month') || tf.includes('5 month')) {
          timeframeColor = 'bg-yellow-100 text-yellow-700';
        } else if (tf.includes('12') || tf.includes('year') || tf.includes('not sure') || tf.includes('don\'t know') || tf.includes('not now') || tf.includes('not yet') || tf.includes('already') || tf.includes('no')) {
          timeframeColor = 'bg-red-100 text-red-700';
        }
        
        return `
          <div class="exclusive-lead-card border-l-4 ${isSelected ? 'border-l-primary bg-primary/5' : 'border-l-transparent hover:bg-gray-50'} px-4 py-4 cursor-pointer border-b border-gray-100" onclick="selectExclusiveLead(${index})">
            <div class="flex items-start justify-between mb-2">
              <span class="text-xs text-gray-400">${dateDisplay}</span>
              <span class="text-xs ${timeframeColor} px-2 py-0.5 rounded font-medium">${lead.timeframe || 'Not specified'}</span>
            </div>
            <h3 class="font-semibold text-gray-900">${lead.name}</h3>
            <p class="text-sm text-gray-500 mt-0.5 truncate">${lead.address}</p>
            <div class="flex items-center mt-3">
              <div class="flex items-center space-x-2">
                ${lead.phone ? `<button class="p-1.5 bg-green-100 text-green-600 rounded-lg hover:bg-green-200" title="Call ${lead.phone}" onclick="event.stopPropagation(); window.location.href='tel:${lead.phone.replace(/\\s/g, '')}'">
                  <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"/></svg>
                </button>` : `<span class="p-1.5 bg-gray-100 text-gray-400 rounded-lg" title="No phone number">
                  <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"/></svg>
                </span>`}
                <button class="p-1.5 bg-blue-100 text-blue-600 rounded-lg hover:bg-blue-200" title="Email" onclick="event.stopPropagation(); window.location.href='mailto:${lead.email}'">
                  <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"/></svg>
                </button>
              </div>
            </div>
          </div>
        `;
      }).join('');
      
      // Update stats
      updateExclusiveStats();
      
      // Show first lead detail
      if (sheetsData.length > 0) {
        updateExclusiveDetailPanel(sheetsData[selectedLeadIndex]);
      }
    }
    
    function selectExclusiveLead(index) {
      selectedLeadIndex = index;
      renderExclusiveLeads();
      if (sheetsData[index]) {
        updateExclusiveDetailPanel(sheetsData[index]);
      }
    }
    
    function updateExclusiveDetailPanel(lead) {
      // Update the right panel with lead details
      const detailName = document.querySelector('#page-exclusive .text-2xl.font-bold');
      const detailAddress = document.querySelector('#page-exclusive .text-gray-500.mt-1');
      const detailScore = document.querySelector('#page-exclusive .text-xl.font-black');
      
      if (detailName) detailName.textContent = lead.name;
      if (detailAddress) detailAddress.textContent = lead.address;
      if (detailScore) detailScore.textContent = lead.aiScore;
      
      // Update contact info with clickable buttons
      const contactInfo = document.querySelector('#page-exclusive .flex.items-center.space-x-4.mt-3.text-sm');
      if (contactInfo) {
        const phoneNumber = lead.phone ? lead.phone.replace(/\s/g, '') : '';
        const emailAddress = lead.email || '';
        
        contactInfo.innerHTML = `
          ${phoneNumber ? `
            <a href="tel:${phoneNumber}" class="inline-flex items-center space-x-2 px-3 py-1.5 bg-green-50 hover:bg-green-100 text-green-700 rounded-lg transition-colors">
              <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"/></svg>
              <span class="font-medium">${lead.phone}</span>
            </a>
          ` : '<span class="text-gray-400">No phone</span>'}
          ${emailAddress ? `
            <a href="mailto:${emailAddress}" class="inline-flex items-center space-x-2 px-3 py-1.5 bg-blue-50 hover:bg-blue-100 text-blue-700 rounded-lg transition-colors">
              <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"/></svg>
              <span class="font-medium">${lead.email}</span>
            </a>
          ` : '<span class="text-gray-400">No email</span>'}
        `;
      }
      
      // Update timeframe badge
      const timeframeBadge = document.querySelector('#page-exclusive .bg-amber-100.text-amber-700');
      if (timeframeBadge) {
        timeframeBadge.textContent = 'Selling: ' + (lead.timeframe || 'Unknown');
      }
      
      // Update Homeowner's Notes section
      const homeownerTimeframe = document.getElementById('homeowner-timeframe');
      if (homeownerTimeframe) {
        homeownerTimeframe.textContent = lead.timeframe || 'Not specified';
      }
      
      // Update mini pipeline
      updateMiniPipeline(lead.pipelineStage || 0);
      
      // Update outreach section
      updateOutreachSection(lead);
      
      // Store current lead for AI functions
      window.currentSelectedLead = lead;
      
      // Reset AI sections to loading state
      resetAILoadingState();
      
      // Load AI insights asynchronously
      loadAIContent(lead);
    }
    
    function resetAILoadingState() {
      // Reset property value
      const propValue = document.getElementById('ai-property-value');
      const propValueNote = document.getElementById('ai-property-value-note');
      const commission = document.getElementById('ai-commission');
      if (propValue) propValue.textContent = 'Loading...';
      if (propValueNote) propValueNote.textContent = 'Analyzing data...';
      if (commission) commission.textContent = '--';
      
      // Reset signals to loading
      const signalsList = document.getElementById('ai-signals-list');
      if (signalsList) {
        signalsList.innerHTML = `
          <div class="flex items-center justify-center py-4">
            <svg class="animate-spin h-5 w-5 text-primary mr-2" fill="none" viewBox="0 0 24 24">
              <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
              <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
            </svg>
            <span class="text-gray-500 text-sm">AI analyzing lead signals...</span>
          </div>
        `;
      }
      
      // Reset confidence
      const confidence = document.getElementById('ai-confidence');
      const confidenceContainer = document.getElementById('ai-confidence-container');
      if (confidence) confidence.textContent = 'Calculating...';
      if (confidenceContainer) {
        confidenceContainer.className = 'flex items-center justify-between bg-gray-50 rounded-lg px-4 py-2';
      }
      
      // Reset outreach
      const outreachContainer = document.getElementById('ai-outreach-container');
      if (outreachContainer) {
        outreachContainer.innerHTML = `
          <div class="flex items-center justify-center py-6">
            <svg class="animate-spin h-5 w-5 text-primary mr-2" fill="none" viewBox="0 0 24 24">
              <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
              <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
            </svg>
            <span class="text-gray-500 text-sm">AI generating outreach strategy...</span>
          </div>
        `;
      }
    }
    
    function updateMiniPipeline(currentStage) {
      const stages = document.querySelectorAll('.mini-pipeline-stage');
      const stageColors = [
        { active: 'bg-primary text-white ring-4 ring-primary/20 shadow-lg', label: 'text-primary' },
        { active: 'bg-blue-500 text-white ring-4 ring-blue-200 shadow-lg', label: 'text-blue-600' },
        { active: 'bg-purple-500 text-white ring-4 ring-purple-200 shadow-lg', label: 'text-purple-600' },
        { active: 'bg-green-500 text-white ring-4 ring-green-200 shadow-lg', label: 'text-green-600' },
        { active: 'bg-emerald-500 text-white ring-4 ring-emerald-200 shadow-lg', label: 'text-emerald-600' }
      ];
      
      stages.forEach((stage, index) => {
        const circle = stage.querySelector('div');
        const label = stage.querySelector('span');
        const stageIndex = parseInt(stage.dataset.stage);
        
        // Reset classes
        circle.className = 'w-10 h-10 rounded-full flex items-center justify-center text-sm font-bold transition-colors';
        
        if (stageIndex < currentStage) {
          // Completed stages - green checkmark style
          circle.classList.add('bg-green-500', 'text-white', 'shadow-md');
          label.className = 'text-xs font-semibold text-green-600 mt-1';
        } else if (stageIndex === currentStage) {
          // Active stage
          circle.classList.add(...stageColors[stageIndex].active.split(' '));
          label.className = 'text-xs font-semibold mt-1 ' + stageColors[stageIndex].label;
        } else {
          // Future stages - gray with hover effect
          circle.classList.add('bg-gray-200', 'text-gray-400', 'hover:bg-blue-100', 'hover:text-blue-600');
          label.className = 'text-xs text-gray-400 mt-1';
        }
        
        // Add click handler
        stage.onclick = () => moveToPipelineStage(stageIndex);
      });
    }
    
    function moveToPipelineStage(stageIndex) {
      if (!window.currentSelectedLead) return;
      
      const stages = ['New', 'Contacted', 'Appt', 'Listed', 'Sold'];
      window.currentSelectedLead.pipelineStage = stageIndex;
      
      // Update the mini pipeline display
      updateMiniPipeline(stageIndex);
      
      // Show toast notification
      showToast(`Lead moved to "${stages[stageIndex]}"`);
    }
    
    function toggleOutreachItem(element) {
      const dropdown = element.nextElementSibling;
      const arrow = element.querySelector('svg');
      
      if (dropdown.classList.contains('hidden')) {
        dropdown.classList.remove('hidden');
        arrow.style.transform = 'rotate(180deg)';
      } else {
        dropdown.classList.add('hidden');
        arrow.style.transform = 'rotate(0deg)';
      }
    }
    
    function updateOutreachSection(lead) {
      const leadFirstName = (lead.name || 'Homeowner').split(' ')[0];
      const agentName = getAgentName();
      const agency = getAgencyName();
      const mobile = getAgentMobile();
      
      // Reset checkboxes and close dropdowns
      ['check-call', 'check-sms', 'check-vm', 'check-door'].forEach(id => {
        const checkbox = document.getElementById(id);
        if (checkbox) checkbox.checked = false;
      });
      
      // Close all dropdowns
      document.querySelectorAll('#outreach-container .hidden').forEach(el => {
        el.classList.add('hidden');
      });
      
      // Get scripts based on personality style
      const scripts = getOutreachScripts(leadFirstName, agentName, agency, mobile);
      
      Object.entries(scripts).forEach(([id, text]) => {
        const el = document.getElementById(id);
        if (el) el.textContent = text;
      });
    }
    
    function getOutreachScripts(leadName, agentName, agency, mobile) {
      const style = agentPersona.style || 'professional';
      
      const scripts = {
        professional: {
          'script-call': `"Good morning/afternoon ${leadName}, this is ${agentName} from ${agency}. I noticed you recently requested a property valuation, and I wanted to reach out personally. I'd be happy to provide you with a comprehensive market analysis of your property. Would you have a few minutes to discuss?"`,
          'script-sms': `"Hi ${leadName}, this is ${agentName} from ${agency}. I saw you requested a property valuation. I'd be delighted to provide a complimentary, no-obligation appraisal at your convenience. Would you like me to send through some information? - ${agentName}"`,
          'script-vm': `"Hello ${leadName}, this is ${agentName} calling from ${agency}. I understand you're interested in knowing your property's current market value. I have some excellent insights about recent sales in your area that I'd love to share. Please feel free to return my call at ${mobile}. Thank you."`,
          'script-door': `"Good day, I'm ${agentName} from ${agency}. I work extensively in this area and wanted to introduce myself. I understand you may be considering your property options. I'm happy to provide any market information you might find useful, with absolutely no obligation."`
        },
        friendly: {
          'script-call': `"Hey ${leadName}! It's ${agentName} from ${agency}. I saw you were checking out what your place might be worth - exciting stuff! I'd love to have a quick chat and help you get a real feel for the market. Got a minute?"`,
          'script-sms': `"Hey ${leadName}! ðŸ‘‹ It's ${agentName} from ${agency}. Saw you're curious about your home's value - I'd love to help! Happy to pop over for a chat, no pressure at all. Let me know! ðŸ˜Š"`,
          'script-vm': `"Hey ${leadName}, it's ${agentName} from ${agency}! Just giving you a quick buzz - I saw you were interested in your property's value. I've got some great info about what's been happening in your area. Give me a call back when you get a chance on ${mobile}. Chat soon!"`,
          'script-door': `"Hey there! I'm ${agentName} from ${agency}. I'm often around the neighbourhood and thought I'd pop by to say hi! If you ever want to have a chat about the property market or what's happening locally, I'm always happy to help - no strings attached!"`
        },
        casual: {
          'script-call': `"Hey ${leadName}, ${agentName} here from ${agency}. Saw you were looking into your property value - all good, just thought I'd reach out. Happy to have a yarn about what's going on in the market if you're keen?"`,
          'script-sms': `"Hey ${leadName}, ${agentName} here from ${agency}. Noticed you checked out a valuation - happy to help if you want a proper look at what's happening locally. No worries either way! ðŸ¡"`,
          'script-vm': `"G'day ${leadName}, ${agentName} from ${agency}. Just giving you a bell about the valuation thing. Happy to have a chat whenever suits - give us a ring on ${mobile} if you're keen. Cheers!"`,
          'script-door': `"G'day! ${agentName} from ${agency}. Just in the area and thought I'd swing by. If you ever want a chat about property stuff, I'm always around. No pressure at all, just wanted to say hi!"`
        },
        energetic: {
          'script-call': `"Hi ${leadName}! This is ${agentName} from ${agency} - so excited to connect with you! I saw you're looking into your property's value and I'd LOVE to help! The market is really moving right now and I've got some amazing insights to share. Do you have a quick minute?"`,
          'script-sms': `"Hi ${leadName}! ðŸŽ‰ ${agentName} here from ${agency}! So excited you're thinking about your property's value! I'd absolutely love to help - the market is buzzing right now! Let me know if you'd like a free appraisal! ðŸ âœ¨"`,
          'script-vm': `"Hi ${leadName}! It's ${agentName} from ${agency} - hope you're having an awesome day! I'm super excited to chat with you about your property's value. The market is really dynamic right now and I've got some fantastic news to share! Call me back at ${mobile} - can't wait to speak with you!"`,
          'script-door': `"Hi there! I'm ${agentName} from ${agency} - so great to meet you! I'm really passionate about this area and I'd love to share what's happening in the market. It's such an exciting time for property owners right now! Would love to chat whenever suits you!"`
        }
      };
      
      return scripts[style] || scripts.professional;
    }
    
    async function loadAIContent(lead) {
      // Load AI insights and valuation in parallel
      try {
        const [insights, valuation] = await Promise.all([
          generateAIInsights(lead).catch(err => {
            console.error('AI Insights error:', err);
            return null;
          }),
          generateValuation(lead).catch(err => {
            console.error('Valuation error:', err);
            return null;
          })
        ]);
        
        // Update UI with insights
        if (insights) {
          updateInsightsUI(insights);
        } else {
          showInsightsError();
        }
        
        // Update UI with valuation
        if (valuation) {
          updateValuationUI(valuation);
        } else {
          showValuationError();
        }
        
      } catch (error) {
        console.error('Error loading AI content:', error);
        showToast('Error loading AI insights');
      }
    }
    
    function updateInsightsUI(insights) {
      // Update signals
      const signalsList = document.getElementById('ai-signals-list');
      if (signalsList && insights.signals) {
        signalsList.innerHTML = insights.signals.map(signal => `
          <div class="flex items-center space-x-2 text-sm">
            <span class="text-lg">${signal.icon}</span>
            <span class="text-gray-700">${signal.text}</span>
          </div>
        `).join('');
      }
      
      // Update confidence
      const confidence = document.getElementById('ai-confidence');
      const confidenceContainer = document.getElementById('ai-confidence-container');
      if (confidence && insights.confidence !== undefined) {
        const level = insights.confidence >= 70 ? 'High' : insights.confidence >= 40 ? 'Medium' : 'Low';
        const colorClass = insights.confidence >= 70 ? 'text-green-600' : insights.confidence >= 40 ? 'text-amber-600' : 'text-red-600';
        const bgClass = insights.confidence >= 70 ? 'bg-green-50' : insights.confidence >= 40 ? 'bg-amber-50' : 'bg-red-50';
        
        confidence.textContent = `${level} â€“ ${insights.confidence}% likely to list`;
        confidence.className = `font-semibold ${colorClass}`;
        if (confidenceContainer) {
          confidenceContainer.className = `flex items-center justify-between ${bgClass} rounded-lg px-4 py-2`;
        }
      }
    }
    
    function updateOutreachUI(outreach) {
      const container = document.getElementById('ai-outreach-container');
      if (!container) return;
      
      const lead = window.currentSelectedLead || {};
      const firstName = (lead.name || 'Homeowner').split(' ')[0];
      
      let objectionsHTML = '';
      if (outreach.objections && outreach.objections.length > 0) {
        objectionsHTML = outreach.objections.map(obj => `
          <div class="flex items-start space-x-2 text-sm">
            <span class="text-red-500">âš </span>
            <span class="text-gray-700"><strong>"${obj.objection}"</strong></span>
          </div>
          <div class="flex items-start space-x-2 text-sm ml-5 mb-2">
            <span class="text-green-500">â†’</span>
            <span class="text-gray-600 italic">${obj.response}</span>
          </div>
        `).join('');
      }
      
      container.innerHTML = `
        <!-- Lead Summary Header -->
        <div class="bg-gradient-to-r from-primary/5 to-primary/10 rounded-lg p-3 mb-4">
          <p class="font-semibold text-gray-900">Reaching out to ${firstName}</p>
          <p class="text-sm text-gray-600">${outreach.propertySummary || lead.address || 'Property details'}</p>
          ${outreach.bestContactMethod ? `<p class="text-xs text-primary font-medium mt-1">âœ¨ Best approach: ${outreach.bestContactMethod}</p>` : ''}
        </div>
        
        <!-- Action Checklist -->
        <div class="mb-4">
          <p class="text-xs text-gray-500 uppercase tracking-wide mb-2">Action Checklist</p>
          <div class="space-y-2">
            <label class="flex items-center space-x-3 p-2 bg-gray-50 rounded-lg cursor-pointer hover:bg-gray-100">
              <input type="checkbox" class="w-4 h-4 text-primary rounded border-gray-300 focus:ring-primary">
              <span class="text-sm text-gray-700">ðŸ“ž Call ${firstName}</span>
            </label>
            <label class="flex items-center space-x-3 p-2 bg-gray-50 rounded-lg cursor-pointer hover:bg-gray-100">
              <input type="checkbox" class="w-4 h-4 text-primary rounded border-gray-300 focus:ring-primary">
              <span class="text-sm text-gray-700">ðŸ’¬ Send SMS</span>
            </label>
            <label class="flex items-center space-x-3 p-2 bg-gray-50 rounded-lg cursor-pointer hover:bg-gray-100">
              <input type="checkbox" class="w-4 h-4 text-primary rounded border-gray-300 focus:ring-primary">
              <span class="text-sm text-gray-700">ðŸ“± Leave Voicemail</span>
            </label>
            <label class="flex items-center space-x-3 p-2 bg-gray-50 rounded-lg cursor-pointer hover:bg-gray-100">
              <input type="checkbox" class="w-4 h-4 text-primary rounded border-gray-300 focus:ring-primary">
              <span class="text-sm text-gray-700">ðŸšª Door Knock</span>
            </label>
          </div>
        </div>
        
        <!-- Scripts -->
        <div class="space-y-3">
          <div>
            <p class="text-xs text-gray-500 uppercase tracking-wide mb-1">ðŸ“ž Call Opening</p>
            <p class="text-sm text-gray-700 bg-blue-50 rounded-lg p-3 italic border-l-3 border-blue-400">"${outreach.openingMessage || 'No opening message generated'}"</p>
          </div>
          
          <div>
            <p class="text-xs text-gray-500 uppercase tracking-wide mb-1">ðŸ’¬ SMS Template</p>
            <p class="text-sm text-gray-700 bg-green-50 rounded-lg p-3 italic border-l-3 border-green-400">"${outreach.smsTemplate || outreach.openingMessage || 'No SMS template generated'}"</p>
          </div>
          
          <div>
            <p class="text-xs text-gray-500 uppercase tracking-wide mb-1">ðŸ“± Voicemail Script</p>
            <p class="text-sm text-gray-700 bg-purple-50 rounded-lg p-3 italic border-l-3 border-purple-400">"${outreach.voicemailScript || 'No voicemail script generated'}"</p>
          </div>
          
          <div>
            <p class="text-xs text-gray-500 uppercase tracking-wide mb-1">ðŸšª Door Knock Opener</p>
            <p class="text-sm text-gray-700 bg-amber-50 rounded-lg p-3 italic border-l-3 border-amber-400">"${outreach.doorKnockScript || 'No door knock script generated'}"</p>
          </div>
        </div>
        
        <!-- Call Angle -->
        <div class="mt-4">
          <p class="text-xs text-gray-500 uppercase tracking-wide mb-1">ðŸŽ¯ Your Hook / Value Proposition</p>
          <p class="text-sm text-gray-700 bg-primary/5 rounded-lg p-3 font-medium">${outreach.callAngle || 'No call angle generated'}</p>
        </div>
        
        <!-- Objections -->
        <div class="mt-4">
          <p class="text-xs text-gray-500 uppercase tracking-wide mb-2">ðŸ›¡ï¸ Handle Objections</p>
          <div class="space-y-1">
            ${objectionsHTML || '<p class="text-sm text-gray-500">No objections generated</p>'}
          </div>
        </div>
        
        ${outreach.followUpTiming ? `
        <div class="mt-4 p-3 bg-gray-100 rounded-lg">
          <p class="text-xs text-gray-500 uppercase tracking-wide mb-1">â° Follow-up Timing</p>
          <p class="text-sm text-gray-700 font-medium">${outreach.followUpTiming}</p>
        </div>
        ` : ''}
      `;
    }
    
    function updateValuationUI(valuation) {
      const propValue = document.getElementById('ai-property-value');
      const propValueNote = document.getElementById('ai-property-value-note');
      const commission = document.getElementById('ai-commission');
      
      if (propValue && valuation.lowEstimate && valuation.highEstimate) {
        propValue.textContent = `${valuation.lowEstimate} â€“ ${valuation.highEstimate}`;
      }
      
      if (propValueNote && valuation.reasoning) {
        propValueNote.textContent = valuation.reasoning;
      }
      
      // Calculate commission (2% of mid estimate)
      if (commission && valuation.midEstimate) {
        const midValue = parseFloat(valuation.midEstimate.replace(/[^0-9.]/g, ''));
        if (midValue) {
          const commissionValue = midValue * 0.02;
          const formattedCommission = commissionValue >= 1000 ? 
            '$' + (commissionValue / 1000).toFixed(0) + 'K' : 
            '$' + commissionValue.toLocaleString();
          commission.textContent = formattedCommission;
        }
      }
    }
    
    function showInsightsError() {
      const signalsList = document.getElementById('ai-signals-list');
      if (signalsList) {
        signalsList.innerHTML = `
          <div class="text-center py-4 text-gray-500 text-sm">
            <p>Unable to generate AI insights</p>
            <button onclick="loadAIContent(window.currentSelectedLead)" class="text-primary hover:underline mt-1">Retry</button>
          </div>
        `;
      }
      
      const confidence = document.getElementById('ai-confidence');
      if (confidence) {
        confidence.textContent = 'Unable to calculate';
      }
    }
    
    function showOutreachError() {
      const container = document.getElementById('ai-outreach-container');
      if (container) {
        container.innerHTML = `
          <div class="text-center py-6 text-gray-500 text-sm">
            <p>Unable to generate outreach strategy</p>
            <button onclick="loadAIContent(window.currentSelectedLead)" class="text-primary hover:underline mt-1">Retry</button>
          </div>
        `;
      }
    }
    
    function showValuationError() {
      const propValue = document.getElementById('ai-property-value');
      const propValueNote = document.getElementById('ai-property-value-note');
      
      if (propValue) propValue.textContent = 'Unable to estimate';
      if (propValueNote) propValueNote.textContent = 'Click retry to try again';
    }
    
    function updateExclusiveStats() {
      const newCount = sheetsData.filter(l => !l.followups || parseInt(l.followups) === 0).length;
      const contactedCount = sheetsData.filter(l => l.followups && parseInt(l.followups) > 0 && l.appointment?.toLowerCase() !== 'yes').length;
      const apptCount = sheetsData.filter(l => l.appointment?.toLowerCase() === 'yes').length;
      
      const newEl = document.getElementById('exclusive-new-count');
      const contactedEl = document.getElementById('exclusive-contacted-count');
      const apptEl = document.getElementById('exclusive-appt-count');
      
      if (newEl) newEl.textContent = newCount;
      if (contactedEl) contactedEl.textContent = contactedCount;
      if (apptEl) apptEl.textContent = apptCount;
    }
    
    async function refreshGoogleSheetData() {
      showToast('Refreshing data from Google Sheets...');
      const data = await fetchGoogleSheetsData();
      if (data) {
        renderExclusiveLeads();
        showToast('Data refreshed successfully!');
      }
    }
    
    // ===== END GOOGLE SHEETS INTEGRATION =====

    // Filter Modal
    function toggleFilterModal() {
      const modal = document.getElementById('filter-modal');
      modal.classList.toggle('hidden');
      document.body.style.overflow = modal.classList.contains('hidden') ? '' : 'hidden';
    }
    
    // Toggle filter switches
    document.addEventListener('click', (e) => {
      if (e.target.closest('.filter-toggle')) {
        e.target.closest('.filter-toggle').classList.toggle('active');
      }
    });
    
    // ===== LAUNCHPAD PAGE FUNCTIONS =====
    
    function scrollToLaunchpadSection(sectionId) {
      const section = document.getElementById(sectionId);
      if (section) {
        section.scrollIntoView({ behavior: 'smooth', block: 'start' });
      }
    }
    
    function openLaunchpadApplication() {
      // Open application modal or redirect to application form
      showToast('Application form opening...');
      // For now, just show a toast - can be connected to a form later
      setTimeout(() => {
        window.open('mailto:launchpad@getlistings.com.au?subject=Launchpad Application&body=I would like to apply for the Launchpad program.%0A%0AName:%0APhone:%0ACurrent Agency:%0ATarget Suburbs:%0A%0AWhy I want to join:', '_blank');
      }, 500);
    }
    
    function openLaunchpadCall() {
      // Open calendar booking or contact form
      showToast('Opening booking calendar...');
      // For now, mailto - can be connected to Calendly later
      setTimeout(() => {
        window.open('mailto:launchpad@getlistings.com.au?subject=Launchpad Walkthrough Request&body=I would like to schedule a private walkthrough of the Launchpad program.%0A%0AName:%0APhone:%0ABest time to call:', '_blank');
      }, 500);
    }
    
    // ===== BUYER DEMAND PAGE FUNCTIONS =====
    
    function scrollToBuyerSection(sectionId) {
      const section = document.getElementById(sectionId);
      if (section) {
        section.scrollIntoView({ behavior: 'smooth', block: 'start' });
      }
    }
    
    function openBuyerRequest(packageType) {
      const packageNames = {
        'starter': 'Starter ($500)',
        'growth': 'Growth ($2,000-$3,000)',
        'premium': 'Premium ($5,000+)',
        'general': 'Not specified'
      };
      
      showToast('Opening buyer request form...');
      setTimeout(() => {
        const subject = encodeURIComponent('Buyer Demand Request - ' + (packageNames[packageType] || 'General'));
        const body = encodeURIComponent(`I would like to request qualified buyers for my listing.

Package: ${packageNames[packageType] || 'Please advise'}

Property Details:
- Address: 
- Property Type: 
- Price Guide: 
- Bedrooms: 
- Target Suburbs: 

My Contact Details:
- Name: 
- Phone: 
- Email: 

Additional Notes:
`);
        window.open(`mailto:buyers@getlistings.com.au?subject=${subject}&body=${body}`, '_blank');
      }, 500);
    }
    
    function openBuyerCall() {
      showToast('Opening booking calendar...');
      setTimeout(() => {
        window.open('mailto:buyers@getlistings.com.au?subject=Buyer Demand Enquiry&body=I would like to discuss buyer demand options for my listings.%0A%0AName:%0APhone:%0ABest time to call:', '_blank');
      }, 500);
    }
    
    // ===== TALENT EXCHANGE PAGE FUNCTIONS =====
    
    function scrollToTalentSection(sectionId) {
      const section = document.getElementById(sectionId);
      if (section) {
        section.scrollIntoView({ behavior: 'smooth', block: 'start' });
      }
    }
    
    function openTalentModal(type) {
      if (type === 'post') {
        showToast('Opening role posting form...');
        setTimeout(() => {
          const subject = encodeURIComponent('Talent Exchange - Post a Role');
          const body = encodeURIComponent(`I would like to post an opportunity on the Talent Exchange.

ROLE DETAILS
Role Type: [Sales Agent / Buyer's Agent / Team Leader / Operations / Marketing]
Location: 
Target GCI: $

ABOUT THE OPPORTUNITY
Brief description:


Commission structure:


What makes this role attractive:


VISIBILITY PREFERENCE
[ ] Public - Visible to all Get Listings users
[ ] Anonymous - Role visible, identity hidden until mutual interest
[ ] Private - Visible only to candidates I shortlist

CONTACT DETAILS
Name: 
Phone: 
Email: 
Agency/Brand: 

I understand the $7,500 placement fee and 5% success fee structure.
`);
          window.open(`mailto:talent@getlistings.com.au?subject=${subject}&body=${body}`, '_blank');
        }, 500);
      } else if (type === 'intro') {
        showToast('Opening introduction request...');
        setTimeout(() => {
          const subject = encodeURIComponent('Talent Exchange - Private Introduction Request');
          const body = encodeURIComponent(`I would like to request a private introduction to potential candidates.

WHAT I'M LOOKING FOR
Role type: 
Location/market: 
Minimum GCI track record: $
Specific skills or experience: 

MY SITUATION
Current agency/brand: 
Why I'm hiring: 
Timeline: 

CONTACT DETAILS
Name: 
Phone: 
Email: 

I would like to discuss this confidentially before posting publicly.
`);
          window.open(`mailto:talent@getlistings.com.au?subject=${subject}&body=${body}`, '_blank');
        }, 500);
      }
    }
    
    function showTalentOpportunityDetail(opportunityId) {
      // In production, this would open a modal with full opportunity details
      const opportunities = {
        '1': {
          title: 'Senior Sales Agent',
          type: 'Anonymous',
          location: 'Eastern Suburbs, Sydney',
          gci: '$500K+',
          description: 'High-end residential team seeking an experienced listing agent.'
        },
        '2': {
          title: 'Team Leader â€“ New Projects',
          type: 'Public',
          location: 'Brisbane Inner City',
          gci: '$800K+',
          description: 'Ray White Projects expanding their off-the-plan division.'
        },
        '3': {
          title: 'Principal â€“ Greenfield Office',
          type: 'Private',
          location: 'Melbourne Growth Corridor',
          gci: '$1M+',
          description: 'Confidential equity opportunity in a new office.'
        }
      };
      
      const opp = opportunities[opportunityId];
      if (opp) {
        showToast(`${opp.title} - ${opp.location}`);
        setTimeout(() => {
          if (opp.type === 'Private') {
            alert(`This is a private opportunity.\n\n"${opp.title}"\n${opp.location}\nTarget GCI: ${opp.gci}\n\nTo express interest, you must be invited or request a private introduction.`);
          } else {
            alert(`"${opp.title}"\n${opp.location}\nTarget GCI: ${opp.gci}\nVisibility: ${opp.type}\n\n${opp.description}\n\nIn production, this would show full details and allow you to express interest.`);
          }
        }, 300);
      }
    }
    
    // Help page section scrolling
    function scrollToHelpSection(sectionId) {
      const section = document.getElementById(sectionId);
      if (section) {
        const helpPage = document.getElementById('page-help');
        const navBar = document.querySelector('#page-help .sticky');
        const navHeight = navBar ? navBar.offsetHeight : 60;
        const offset = section.offsetTop - navHeight - 20;
        helpPage.scrollTo({ top: offset, behavior: 'smooth' });
      }
    }
    
    // Subscription & Billing Functions
    let isAnnualBilling = false;
    
    function toggleBillingCycle() {
      isAnnualBilling = !isAnnualBilling;
      const toggle = document.getElementById('billing-toggle');
      const dot = document.getElementById('billing-toggle-dot');
      const label = document.getElementById('billing-toggle-label');
      
      if (isAnnualBilling) {
        toggle.classList.remove('bg-gray-200');
        toggle.classList.add('bg-green-500');
        dot.classList.add('translate-x-6');
        label.textContent = 'Annual';
      } else {
        toggle.classList.add('bg-gray-200');
        toggle.classList.remove('bg-green-500');
        dot.classList.remove('translate-x-6');
        label.textContent = 'Monthly';
      }
      
      // Update all price displays
      document.querySelectorAll('[data-monthly]').forEach(el => {
        const price = isAnnualBilling ? el.dataset.annual : el.dataset.monthly;
        el.textContent = '$' + price;
      });
    }
    
    function selectPlan(planId) {
      const planNames = {
        'starter': 'Starter ($149/mo)',
        'professional': 'Professional ($349/mo)',
        'growth': 'Growth ($599/mo)',
        'agency': 'Agency ($1,499/mo)'
      };
      
      if (planId === 'agency') {
        showToast('Opening contact form for Agency plan...');
        setTimeout(() => {
          window.open('mailto:sales@getlistings.com.au?subject=Agency Plan Enquiry&body=I would like to discuss the Agency plan for my office.%0A%0AOffice Name:%0ANumber of Agents:%0APhone:%0A%0AQuestions:', '_blank');
        }, 500);
        return;
      }
      
      if (planId === 'starter') {
        // Downgrade confirmation
        if (confirm('Are you sure you want to downgrade to Starter? You will lose access to some features and your limits will decrease.')) {
          showToast('Processing downgrade to Starter plan...');
          setTimeout(() => {
            showToast('Plan changed to Starter. Changes take effect at your next billing date.');
          }, 1500);
        }
        return;
      }
      
      if (planId === 'growth') {
        showToast('Processing upgrade to Growth plan...');
        setTimeout(() => {
          showToast('Upgrade successful! Welcome to Growth. Your new limits are now active.');
        }, 1500);
      }
    }
    
    function addAddon(addonType) {
      const addons = {
        'suburbs': { name: 'Extra Suburbs', price: '$25/suburb/month' },
        'unlocks': { name: 'Extra Unlocks', price: '$49 for 50 unlocks' },
        'sms': { name: 'Extra SMS Credits', price: '$29 for 100 SMS' },
        'exclusive': { name: 'Exclusive Suburb Lockout', price: '$299/suburb/month' },
        'crm': { name: 'CRM Integration', price: '$99/month' },
        'whitelabel': { name: 'White Label Portal', price: '$499/month' }
      };
      
      const addon = addons[addonType];
      
      if (addonType === 'exclusive' || addonType === 'whitelabel') {
        showToast('Opening contact form...');
        setTimeout(() => {
          window.open(`mailto:sales@getlistings.com.au?subject=${encodeURIComponent(addon.name)} Enquiry&body=I would like to discuss ${addon.name} (${addon.price}).%0A%0AName:%0APhone:%0A%0ADetails:`, '_blank');
        }, 500);
        return;
      }
      
      showToast(`Adding ${addon.name} to your subscription...`);
      setTimeout(() => {
        showToast(`${addon.name} added successfully!`);
      }, 1500);
    }
    
    function updatePaymentMethod() {
      showToast('Opening payment method update...');
      setTimeout(() => {
        alert('In production, this would open Stripe\'s secure payment update form.');
      }, 500);
    }
    
    function switchToAnnual() {
      if (confirm('Switch to annual billing and save $840/year? Your next charge will be $3,348 for the full year.')) {
        showToast('Switching to annual billing...');
        setTimeout(() => {
          showToast('Success! You are now on annual billing. You saved $840!');
        }, 1500);
      }
    }
    
    function pauseSubscription() {
      if (confirm('Pause your subscription for up to 3 months? Your data will be preserved, but you will not have access to leads during the pause.')) {
        showToast('Opening pause options...');
        setTimeout(() => {
          const duration = prompt('How many months would you like to pause? (1-3)');
          if (duration && ['1', '2', '3'].includes(duration)) {
            showToast(`Subscription paused for ${duration} month(s). We\'ll be here when you\'re ready!`);
          }
        }, 500);
      }
    }
    
    function cancelSubscription() {
      const reasons = [
        'Before you go...',
        '',
        'We\'d hate to see you leave. A few options:',
        'â€¢ Downgrade to Starter ($149/mo) to keep basic access',
        'â€¢ Pause for 1-3 months if you need a break',
        'â€¢ Talk to us if there\'s something we can fix',
        '',
        'Are you sure you want to cancel?'
      ].join('\n');
      
      if (confirm(reasons)) {
        const reason = prompt('Could you share why you\'re cancelling? (optional - helps us improve)');
        showToast('Processing cancellation...');
        setTimeout(() => {
          showToast('Subscription cancelled. You\'ll retain access until Feb 9, 2026.');
        }, 1500);
      }
    }
    
    // Navigation
    function showPage(pageId) {
      // Hide all pages
      document.querySelectorAll('.page').forEach(p => p.classList.add('hidden'));
      // Show selected page
      document.getElementById('page-' + pageId).classList.remove('hidden');
      // Update nav
      document.querySelectorAll('.sidebar-item').forEach(btn => {
        btn.classList.remove('active');
        btn.classList.add('text-gray-700', 'hover:bg-gray-100');
      });
      const activeNav = document.getElementById('nav-' + pageId);
      if (activeNav) {
        activeNav.classList.add('active');
        activeNav.classList.remove('text-gray-700', 'hover:bg-gray-100');
      }
      
      // Load Google Sheets data when Exclusive Leads page is shown
      if (pageId === 'exclusive') {
        renderExclusiveLeads();
        if (sheetsData.length === 0 && GOOGLE_SHEET_ID !== 'YOUR_SHEET_ID_HERE') {
          fetchGoogleSheetsData().then(() => renderExclusiveLeads());
        }
      }
      
      // Load branding opportunities when page is shown
      if (pageId === 'branding') {
        loadBrandingOpportunities();
      }
      
      // Load expiring listings when page is shown
      if (pageId === 'expired') {
        loadExpiringListings();
      }
      
      // Load hottest leads when page is shown
      if (pageId === 'hottest') {
        loadHottestLeads();
      }
      
      // Load seller scores when page is shown
      if (pageId === 'leads') {
        loadLeadsFromAPI();
      }
      
      // Load dashboard data when page is shown
      if (pageId === 'dashboard') {
        loadDashboardData();
      }
      
      // Load leaderboard when page is shown
      if (pageId === 'leaderboard') {
        loadLeaderboard();
      }
    }
    
    // Notification tabs
    function switchNotificationTab(tabId) {
      // Hide all notification content
      document.querySelectorAll('.notification-content').forEach(c => c.classList.add('hidden'));
      // Show selected content
      document.getElementById('notifications-' + tabId).classList.remove('hidden');
      // Update tab styles
      document.querySelectorAll('.notification-tab').forEach(tab => {
        tab.classList.remove('active', 'border-primary', 'text-primary');
        tab.classList.add('border-transparent', 'text-gray-500');
      });
      event.target.classList.add('active', 'border-primary', 'text-primary');
      event.target.classList.remove('border-transparent', 'text-gray-500');
    }
    
    // Property selection
    function selectProperty(index) {
      document.querySelectorAll('.property-card').forEach((card, i) => {
        if (i === index) {
          card.classList.add('border-primary', 'border-2');
          card.classList.remove('border-gray-200');
        } else {
          card.classList.remove('border-primary', 'border-2');
          card.classList.add('border-gray-200');
        }
      });
    }
    
    // Exclusive lead detail toggle
    function openExclusiveLeadDetail(element) {
      const card = element.closest('.exclusive-lead-card');
      const detailPanel = card.querySelector('.exclusive-lead-detail');
      const chevron = card.querySelector('.lead-chevron');
      
      // Close all other open panels
      document.querySelectorAll('.exclusive-lead-detail').forEach(panel => {
        if (panel !== detailPanel) {
          panel.classList.add('hidden');
          panel.closest('.exclusive-lead-card').querySelector('.lead-chevron').classList.remove('rotate-180');
        }
      });
      
      // Toggle this panel
      detailPanel.classList.toggle('hidden');
      chevron.classList.toggle('rotate-180');
    }
    
    // Update exclusive lead pipeline stage
    function updateExclusiveLeadStage(select) {
      const stage = select.value;
      const stageColors = {
        'new': 'bg-blue-100 text-blue-700',
        'contacted': 'bg-yellow-100 text-yellow-700',
        'appointment': 'bg-purple-100 text-purple-700',
        'listed': 'bg-green-100 text-green-700',
        'sold': 'bg-gray-100 text-gray-700'
      };
      // Visual feedback
      select.className = `text-xs font-medium px-2 py-1 rounded-full border-none cursor-pointer ${stageColors[stage] || 'bg-gray-100 text-gray-700'}`;
    }
    
    // Show exclusive lead detail in right panel
    function showExclusiveLeadDetail(index) {
      // Update selected state in lead list
      document.querySelectorAll('.exclusive-lead-card').forEach((card, i) => {
        if (i === index) {
          card.classList.add('border-l-primary', 'bg-primary/5');
          card.classList.remove('border-l-transparent');
        } else {
          card.classList.remove('border-l-primary', 'bg-primary/5');
          card.classList.add('border-l-transparent');
        }
      });
      // In a real app, this would load the lead's details into the right panel
      // For now, the first lead's details are always shown
    }
    
    // Settings tabs
    function showSettingsTab(tabId) {
      // Hide all settings content
      document.querySelectorAll('.settings-content').forEach(c => c.classList.add('hidden'));
      // Show selected content
      document.getElementById('settings-content-' + tabId).classList.remove('hidden');
      // Update tab styles
      document.querySelectorAll('.settings-tab').forEach(tab => {
        tab.classList.remove('bg-primary', 'text-white');
        tab.classList.add('text-gray-700', 'hover:bg-gray-100');
      });
      document.getElementById('settings-tab-' + tabId).classList.add('bg-primary', 'text-white');
      document.getElementById('settings-tab-' + tabId).classList.remove('text-gray-700', 'hover:bg-gray-100');
    }
    
    // Content Creation Templates - Extended library of 120 house images
    const houseImages = [
      'photo-1564013799919-ab600027ffc6','photo-1600596542815-ffad4c1539a9','photo-1600585154340-be6161a56a0c',
      'photo-1605276374104-dee2a0ed3cd6','photo-1512917774080-9991f1c4c750','photo-1600047509807-ba8f99d2cdde',
      'photo-1600566753190-17f0baa2a6c3','photo-1600573472550-8090b5e0745e','photo-1613490493576-7fde63acd811',
      'photo-1580587771525-78b9dba3b914','photo-1583608205776-bfd35f0d9f83','photo-1628624747186-a941c476b7ef',
      'photo-1449844908441-8829872d2607','photo-1598228723793-52759bba239c','photo-1600607687939-ce8a6c25118c',
      'photo-1600607687644-c7171b42498f','photo-1600566753086-00f18fb6b3ea','photo-1602343168117-bb8ffe3e2e9f',
      'photo-1600585154526-990dced4db0d','photo-1600210492486-724fe5c67fb0','photo-1600563438938-a9a27216b4f5',
      'photo-1600607688969-a5bfcd646154','photo-1600047508788-786f3865b4b9','photo-1600566752355-35792bedcfea',
      'photo-1600585154363-67eb9e2e2099','photo-1600074169098-16a54d791d0d','photo-1600048913493-1eb1e1a5e7c3',
      'photo-1600607687920-4e2a09cf159d','photo-1600566753151-384129cf4e3e','photo-1600573461222-d8a8a3a9a8b8',
      'photo-1558618666-fcd25c85cd64','photo-1568605114967-8130f3a36994','photo-1570129477492-45c003edd2be',
      'photo-1554995207-c18c203602cb','photo-1523217582562-09d0def993a6','photo-1494526585095-c41746248156',
      'photo-1430285561322-7808604715df','photo-1460317442991-0ec209397118','photo-1416331108676-a22ccb276e35',
      'photo-1486406146926-c627a92ad1ab','photo-1493809842364-78817add7ffb','photo-1484154218962-a197022b5858',
      'photo-1502672260266-1c1ef2d93688','photo-1560448204-e02f11c3d0e2','photo-1560185007-cde436f6a4d0',
      'photo-1560185008-b033106af5c3','photo-1560185127-6ed189bf02f4','photo-1560440021-33f9b867899d',
      'photo-1560448075-bb485b067938','photo-1560449752-3fd4bdbe7df0','photo-1560518883-ce09059eeffa',
      'photo-1560520653-9e0e4c89eb11','photo-1560520031-3a4dc4e9de0c','photo-1561753757-d8880c5a3551',
      'photo-1565182999561-18d7dc61c393','photo-1567496898669-ee935f5f647a','photo-1571939228382-b2f2b585ce15',
      'photo-1572120360610-d971b9d7767c','photo-1574362848149-11496d93a7c7','photo-1575517111478-7f6afd0973db',
      'photo-1576941089067-2de3c901e126','photo-1577415124269-fc1140a69e91','photo-1578683010236-d716f9a3f461',
      'photo-1582268611958-ebfd161ef9cf','photo-1583847268964-b28dc8f51f92','photo-1584622650111-993a426fbf0a',
      'photo-1585128792020-803d29415281','photo-1585773690306-2f0a46f2c382','photo-1586023492125-27b2c045efd7',
      'photo-1586105251261-72a756497a11','photo-1587094324087-74a0f53a3ad9','photo-1588854337115-1c67d9247e4d',
      'photo-1589834390005-5d4fb9bf3d32','photo-1590490360182-c33d57733427','photo-1591474200742-8e512e6f98f8',
      'photo-1592595896551-12b371d546d5','photo-1593696140826-c58b021acf8b','photo-1595526114035-0d45ed16cfbf',
      'photo-1597211833712-5e41faa202ea','photo-1598714805247-5dd440d87124','photo-1599423300746-b62533397364',
      'photo-1600121848594-d8644e57abab','photo-1600435335786-d74d2bb6de37','photo-1600489000022-c2086d79f9d4',
      'photo-1600585153490-76fb20a32601','photo-1600585154253-6c4b3b0e0c84','photo-1600585154340-be6161a56a0c',
      'photo-1600607687939-ce8a6c25118c','photo-1600607688969-a5bfcd646154','photo-1600619195296-72fbc8b14e97',
      'photo-1601918774946-25832a4be0d6','photo-1604014237800-1c9102c219da','photo-1604014238170-4def1e4e6fcf',
      'photo-1604014238312-ccb15bd3c6e6','photo-1604014237744-32a0c75f15a8','photo-1604014237256-11d475e2a2d8',
      'photo-1605146768851-eda79da39897','photo-1605276373954-0c4a0dac5b12','photo-1606074280798-2dabb75ce10c',
      'photo-1607582544956-e023052ef5d6','photo-1609347744403-2306e8a9ae27','photo-1609766857041-ed402ea8069a',
      'photo-1610569244796-5f4ea6fe92bb','photo-1611602132416-da2a76a46529','photo-1612637968894-660373e23b03',
      'photo-1613545325278-f24b0cae1224','photo-1613977257363-707ba9348227','photo-1614849963640-9cc74b2a826f',
      'photo-1615529182904-14819c35db37','photo-1615874959474-d609969a20ed','photo-1616137466211-f939a7fcd01b',
      'photo-1617104551722-3b2d51366400','photo-1617104678098-de229db51175','photo-1618221195710-dd6b41faaea6'
    ];
    const streets = ['Ocean View Dr','Harbour St','Palm Ave','Sunset Blvd','Marine Parade','Beach Rd','Cliff Walk','Bay View Tce','Coastal Hwy','Seaside Lane',
      'Kings Rd','Queens Ave','Victoria St','Albert Rd','George St','Elizabeth Ave','William Tce','Charles Cres','Edward Pl','Henry Lane'];
    const suburbs = ['Bondi','Manly','Mosman','Double Bay','Paddington','Surry Hills','Darlinghurst','Woollahra','Balmain','Newtown',
      'Coogee','Bronte','Tamarama','Rose Bay','Vaucluse','Point Piper','Kirribilli','Cremorne','Neutral Bay','Cammeray'];
    
    const templates = [];
    
    // Just Listed (20 templates)
    const justListedStyles = [
      {banner:'bg-primary',pos:'top'},
      {banner:'bg-gradient-to-r from-primary to-red-700',pos:'top'},
      {banner:'bg-gray-900',pos:'top'},
      {banner:'bg-primary',pos:'bottom'},
      {banner:'bg-white text-primary',pos:'corner'},
      {banner:'bg-gradient-to-r from-gray-900 to-gray-700',pos:'top'},
      {banner:'bg-primary',pos:'diagonal'},
      {banner:'bg-red-600',pos:'top'},
      {banner:'bg-gradient-to-br from-primary to-pink-600',pos:'top'},
      {banner:'bg-black',pos:'bottom'},
      {banner:'bg-primary/90 backdrop-blur',pos:'top'},
      {banner:'bg-gradient-to-r from-red-500 to-orange-500',pos:'top'},
      {banner:'bg-primary',pos:'floating'},
      {banner:'bg-gray-800',pos:'top'},
      {banner:'bg-gradient-to-r from-primary to-rose-600',pos:'top'},
      {banner:'bg-red-700',pos:'corner'},
      {banner:'bg-primary',pos:'strip'},
      {banner:'bg-gradient-to-r from-black to-gray-800',pos:'top'},
      {banner:'bg-primary border-2 border-white',pos:'top'},
      {banner:'bg-gradient-to-r from-primary via-red-600 to-primary',pos:'top'}
    ];
    for(let i=0;i<20;i++){
      const beds=2+Math.floor(Math.random()*4),baths=1+Math.floor(Math.random()*3),cars=1+Math.floor(Math.random()*3);
      const price=(0.8+Math.random()*3.5).toFixed(1);
      const style=justListedStyles[i];
      const streetNum=Math.floor(Math.random()*150)+1;
      templates.push({category:'just-listed',name:`Just Listed - Style ${i+1}`,img:houseImages[i],
        html:`<div class="absolute inset-0 bg-gradient-to-t from-black/70 via-black/20 to-transparent"></div>
        <div class="absolute top-0 left-0 right-0 ${style.banner} py-3 text-center"><span class="text-white text-lg font-bold tracking-wider">âœ¨ JUST LISTED</span></div>
        <div class="absolute bottom-0 left-0 right-0 p-4 text-white"><p class="font-bold text-lg">${streetNum} ${streets[i%20]}</p><p class="text-sm opacity-90">${suburbs[i%20]} NSW</p>
        <div class="flex items-center space-x-3 mt-2 text-sm"><span>${beds} ðŸ›</span><span>${baths} ðŸš¿</span><span>${cars} ðŸš—</span></div>
        <p class="text-xl font-bold mt-2">$${price}M</p></div>`});
    }
    
    // Sold (20 templates)
    const soldColors = ['green-600','emerald-500','green-700','teal-600','green-500','emerald-600','green-800','teal-500',
      'emerald-700','green-600','emerald-500','green-700','teal-600','green-500','emerald-600','green-800','teal-500','emerald-700','green-600','teal-700'];
    const soldRotations = ['-rotate-12','rotate-6','-rotate-6','rotate-12','rotate-0','-rotate-3','rotate-3','-rotate-9','rotate-9','-rotate-15',
      'rotate-15','-rotate-12','rotate-6','-rotate-6','rotate-12','rotate-0','-rotate-3','rotate-3','-rotate-9','rotate-9'];
    for(let i=0;i<20;i++){
      const days=Math.floor(Math.random()*21)+1;
      const soldPrice=(1.2+Math.random()*3).toFixed(2);
      templates.push({category:'sold',name:`Sold - Style ${i+1}`,img:houseImages[20+i],
        html:`<div class="absolute inset-0 bg-black/40"></div>
        <div class="absolute inset-0 flex items-center justify-center"><div class="bg-${soldColors[i]} px-8 py-4 transform ${soldRotations[i]} shadow-lg rounded-lg"><span class="text-white text-4xl font-black tracking-wide">SOLD</span></div></div>
        <div class="absolute bottom-0 left-0 right-0 bg-${soldColors[i]} py-3 text-center"><span class="text-white text-sm font-medium">ðŸŽ‰ Sold for $${soldPrice}M in ${days} days!</span></div>`});
    }
    
    // For Lease (20 templates)
    const leaseColors = ['blue-600','sky-600','indigo-600','blue-700','cyan-600','blue-500','sky-700','indigo-500',
      'blue-800','cyan-700','blue-600','sky-600','indigo-600','blue-700','cyan-600','blue-500','sky-700','indigo-500','blue-800','cyan-700'];
    for(let i=0;i<20;i++){
      const rent=350+Math.floor(Math.random()*650);
      const beds=1+Math.floor(Math.random()*4);
      const available=['Now','1st Feb','15th Feb','1st Mar','Immediately'][i%5];
      templates.push({category:'for-lease',name:`For Lease - Style ${i+1}`,img:houseImages[40+i],
        html:`<div class="absolute inset-0 bg-gradient-to-t from-${leaseColors[i].replace('600','900').replace('700','900').replace('500','800')}/80 via-transparent to-transparent"></div>
        <div class="absolute top-0 left-0 right-0 bg-${leaseColors[i]} py-3 text-center"><span class="text-white text-lg font-bold tracking-wider">ðŸ”‘ FOR LEASE</span></div>
        <div class="absolute bottom-0 left-0 right-0 p-4 text-white"><p class="text-3xl font-bold">$${rent}<span class="text-lg font-normal">/week</span></p>
        <p class="text-sm opacity-90 mt-1">Available ${available} â€¢ ${beds} Bed</p></div>`});
    }
    
    // Leased (20 templates)
    const leasedColors = ['purple-600','violet-600','fuchsia-600','purple-700','pink-600','purple-500','violet-700','fuchsia-500',
      'purple-800','pink-700','purple-600','violet-600','fuchsia-600','purple-700','pink-600','purple-500','violet-700','fuchsia-500','purple-800','pink-700'];
    for(let i=0;i<20;i++){
      const days=Math.floor(Math.random()*14)+1;
      templates.push({category:'leased',name:`Leased - Style ${i+1}`,img:houseImages[60+i],
        html:`<div class="absolute inset-0 bg-${leasedColors[i].replace('600','900').replace('700','900').replace('500','800')}/50"></div>
        <div class="absolute inset-0 flex items-center justify-center"><div class="border-4 border-${leasedColors[i].replace('600','400').replace('700','400').replace('500','300')} rounded-lg px-6 py-3 transform ${soldRotations[i]}"><span class="text-${leasedColors[i].replace('600','300').replace('700','300').replace('500','200')} text-3xl font-black">LEASED</span></div></div>
        <div class="absolute bottom-0 left-0 right-0 bg-${leasedColors[i]} py-2 text-center"><span class="text-white text-sm font-medium">ðŸŽ‰ Leased in ${days} days!</span></div>`});
    }
    
    // Open Home (20 templates)
    const openTimes = ['9:00am','9:30am','10:00am','10:30am','11:00am','11:30am','12:00pm','12:30pm','1:00pm','1:30pm',
      '2:00pm','2:30pm','3:00pm','9:15am','10:15am','11:15am','12:15pm','1:15pm','2:15pm','3:15pm'];
    const openDays = ['Saturday','Sunday','Saturday','Sunday','Saturday','Sunday','Saturday','Sunday','Saturday','Sunday',
      'Saturday','Sunday','Saturday','Sunday','Saturday','Sunday','Saturday','Sunday','Saturday','Sunday'];
    const openColors = ['amber-500','orange-500','yellow-500','amber-600','orange-600','amber-400','orange-400','yellow-600',
      'amber-700','orange-700','amber-500','orange-500','yellow-500','amber-600','orange-600','amber-400','orange-400','yellow-600','amber-700','orange-700'];
    for(let i=0;i<20;i++){
      const streetNum=Math.floor(Math.random()*200)+1;
      templates.push({category:'open-home',name:`Open Home - Style ${i+1}`,img:houseImages[80+i],
        html:`<div class="absolute inset-0 bg-gradient-to-t from-amber-900/80 via-transparent to-transparent"></div>
        <div class="absolute top-0 left-0 right-0 bg-${openColors[i]} py-2 text-center"><span class="text-white text-lg font-bold tracking-wider">ðŸ  OPEN HOME</span></div>
        <div class="absolute inset-0 flex items-center justify-center"><div class="bg-white/95 rounded-xl px-6 py-4 text-center shadow-lg"><p class="text-${openColors[i]} text-sm font-medium">THIS ${openDays[i].toUpperCase()}</p><p class="text-3xl font-bold text-gray-900">${openTimes[i]}</p></div></div>
        <div class="absolute bottom-0 left-0 right-0 p-3 text-white text-center"><p class="text-sm font-medium">${streetNum} ${streets[i%20]}, ${suburbs[i%20]}</p></div>`});
    }
    
    // Price Reduced (20 templates)
    const priceColors = ['red-500','rose-500','red-600','pink-500','red-700','rose-600','red-500','pink-600',
      'red-800','rose-700','red-500','rose-500','red-600','pink-500','red-700','rose-600','red-500','pink-600','red-800','rose-700'];
    for(let i=0;i<20;i++){
      const oldP=(1.5+Math.random()*2.5).toFixed(2);
      const reduction=50+Math.floor(Math.random()*200);
      const newP=(parseFloat(oldP)-reduction/1000).toFixed(2);
      templates.push({category:'price-reduced',name:`Price Reduced - Style ${i+1}`,img:houseImages[(100+i)%120],
        html:`<div class="absolute inset-0 bg-gradient-to-t from-red-900/80 via-red-900/30 to-transparent"></div>
        <div class="absolute top-0 left-0 right-0 bg-${priceColors[i]} py-2 text-center"><span class="text-white text-lg font-bold tracking-wider">â¬‡ï¸ PRICE REDUCED</span></div>
        <div class="absolute inset-0 flex items-center justify-center"><div class="text-center text-white"><p class="text-2xl font-bold line-through opacity-60">$${oldP}M</p><p class="text-4xl font-black text-amber-400">$${newP}M</p><p class="text-sm mt-2 bg-white/20 px-4 py-1 rounded-full">SAVE $${reduction}K</p></div></div>`});
    }
    
    function renderTemplates(filter='all'){
      const grid=document.getElementById('template-grid');
      const filtered=filter==='all'?templates:templates.filter(t=>t.category===filter);
      document.getElementById('template-count').textContent=filtered.length;
      grid.innerHTML=filtered.map((t,idx)=>`
        <div class="template-card bg-white rounded-xl border border-gray-200 overflow-hidden hover:shadow-lg transition-shadow cursor-pointer group" data-category="${t.category}" data-template-idx="${templates.indexOf(t)}">
          <div class="aspect-square relative overflow-hidden">
            <img src="https://images.unsplash.com/${t.img}?w=400&h=400&fit=crop" alt="${t.name}" class="w-full h-full object-cover">
            ${t.html}
          </div>
          <div class="p-4">
            <h3 class="font-medium text-gray-900">${t.name}</h3>
            <p class="text-xs text-gray-500 mt-1">Instagram, Facebook</p>
            <button onclick="openTemplateEditor(${templates.indexOf(t)})" class="w-full mt-3 py-2 bg-primary text-white rounded-lg text-sm font-medium opacity-0 group-hover:opacity-100 transition-opacity">Use Template</button>
          </div>
        </div>
      `).join('');
    }
    
    function filterTemplates(category){
      document.querySelectorAll('.template-filter').forEach(btn=>{
        btn.classList.remove('bg-primary','text-white');
        btn.classList.add('bg-white','border','border-gray-200','text-gray-700');
      });
      document.getElementById('filter-'+category).classList.add('bg-primary','text-white');
      document.getElementById('filter-'+category).classList.remove('bg-white','border','border-gray-200','text-gray-700');
      renderTemplates(category);
    }
    
    // Show Lead Detail page
    function showLeadDetail(address, score) {
      document.getElementById('lead-detail-address').textContent = address;
      // Hide all pages
      document.querySelectorAll('.page').forEach(p => p.classList.add('hidden'));
      // Show lead detail page
      document.getElementById('page-lead-detail').classList.remove('hidden');
      // Update nav (remove active from all)
      document.querySelectorAll('.sidebar-item').forEach(btn => {
        btn.classList.remove('active');
        btn.classList.add('text-gray-700', 'hover:bg-gray-100');
      });
      // Reset pipeline to stage 0 (New) for this lead
      resetLeadPipelineStages();
    }
    
    // Lead Detail Pipeline Functions
    let currentLeadPipelineStage = 0;
    
    function resetLeadPipelineStages() {
      currentLeadPipelineStage = 0;
      updateLeadPipelineUI();
    }
    
    function updateLeadPipelineStage(stageIndex) {
      currentLeadPipelineStage = stageIndex;
      updateLeadPipelineUI();
      
      const stageNames = ['New', 'Contacted', 'Appointment Set', 'Listed', 'Sold'];
      showToast(`Lead moved to "${stageNames[stageIndex]}" stage`);
    }
    
    function updateLeadPipelineUI() {
      const stages = document.querySelectorAll('#lead-detail-pipeline .lead-pipeline-stage');
      const stageColors = [
        { active: 'bg-primary text-white ring-4 ring-primary/20', inactive: 'bg-gray-200 text-gray-400', label: 'text-primary font-semibold' },
        { active: 'bg-blue-500 text-white ring-4 ring-blue-200', inactive: 'bg-gray-200 text-gray-400', label: 'text-blue-600 font-semibold' },
        { active: 'bg-purple-500 text-white ring-4 ring-purple-200', inactive: 'bg-gray-200 text-gray-400', label: 'text-purple-600 font-semibold' },
        { active: 'bg-green-500 text-white ring-4 ring-green-200', inactive: 'bg-gray-200 text-gray-400', label: 'text-green-600 font-semibold' },
        { active: 'bg-emerald-500 text-white ring-4 ring-emerald-200', inactive: 'bg-gray-200 text-gray-400', label: 'text-emerald-600 font-semibold' }
      ];
      
      stages.forEach((stage, idx) => {
        const circle = stage.querySelector('div');
        const label = stage.querySelector('span');
        const colors = stageColors[idx];
        
        // Reset classes
        circle.className = 'w-10 h-10 rounded-full flex items-center justify-center text-sm font-bold transition-colors';
        
        if (idx <= currentLeadPipelineStage) {
          // Active or completed stage
          circle.classList.add(...colors.active.split(' '));
          if (idx === currentLeadPipelineStage) {
            circle.classList.add('shadow-lg');
          }
          label.className = `text-xs mt-1 ${colors.label}`;
        } else {
          // Inactive stage
          circle.classList.add(...colors.inactive.split(' '));
          circle.classList.add('hover:bg-gray-300');
          label.className = 'text-xs text-gray-400 mt-1';
        }
      });
      
      // Update the progress lines
      const containers = document.querySelectorAll('#lead-detail-pipeline > div');
      containers.forEach((container, idx) => {
        const line = container.querySelector('.absolute.top-5');
        if (line) {
          if (idx < currentLeadPipelineStage) {
            line.classList.remove('bg-gray-200');
            line.classList.add('bg-green-400');
          } else {
            line.classList.remove('bg-green-400');
            line.classList.add('bg-gray-200');
          }
        }
      });
    }
    
    // Settings detail panels
    function showSettingsDetail(detailId) {
      document.getElementById('settings-detail-' + detailId).classList.remove('hidden');
      // If opening pipeline settings, render the stages
      if (detailId === 'pipeline') {
        renderPipelineSettings();
      }
      // If opening persona settings, load the data
      if (detailId === 'persona') {
        loadAgentPersona();
      }
      // If opening timezone settings, load the data
      if (detailId === 'timezone') {
        loadTimezoneSettings();
      }
    }
    
    function hideSettingsDetail() {
      document.querySelectorAll('.settings-detail').forEach(panel => panel.classList.add('hidden'));
    }
    
    // Agent Persona - stored in localStorage
    let agentPersona = JSON.parse(localStorage.getItem('agentPersona')) || {
      firstName: '',
      lastName: '',
      mobile: '',
      email: '',
      agency: '',
      title: '',
      reaUrl: '',
      domainUrl: '',
      website: '',
      style: 'professional',
      bio: ''
    };
    
    function loadAgentPersona() {
      document.getElementById('persona-first-name').value = agentPersona.firstName || '';
      document.getElementById('persona-last-name').value = agentPersona.lastName || '';
      document.getElementById('persona-mobile').value = agentPersona.mobile || '';
      document.getElementById('persona-email').value = agentPersona.email || '';
      document.getElementById('persona-agency').value = agentPersona.agency || '';
      document.getElementById('persona-title').value = agentPersona.title || '';
      document.getElementById('persona-rea-url').value = agentPersona.reaUrl || '';
      document.getElementById('persona-domain-url').value = agentPersona.domainUrl || '';
      document.getElementById('persona-website').value = agentPersona.website || '';
      document.getElementById('persona-bio').value = agentPersona.bio || '';
      
      // Set the style radio button
      const styleRadio = document.querySelector(`input[name="persona-style"][value="${agentPersona.style || 'professional'}"]`);
      if (styleRadio) styleRadio.checked = true;
    }
    
    function saveAgentPersona() {
      agentPersona = {
        firstName: document.getElementById('persona-first-name').value,
        lastName: document.getElementById('persona-last-name').value,
        mobile: document.getElementById('persona-mobile').value,
        email: document.getElementById('persona-email').value,
        agency: document.getElementById('persona-agency').value,
        title: document.getElementById('persona-title').value,
        reaUrl: document.getElementById('persona-rea-url').value,
        domainUrl: document.getElementById('persona-domain-url').value,
        website: document.getElementById('persona-website').value,
        style: document.querySelector('input[name="persona-style"]:checked')?.value || 'professional',
        bio: document.getElementById('persona-bio').value
      };
      
      localStorage.setItem('agentPersona', JSON.stringify(agentPersona));
      showToast('Agent persona saved!');
      hideSettingsDetail();
    }
    
    function getAgentName() {
      if (agentPersona.firstName) {
        return agentPersona.firstName;
      }
      return '[Agent]';
    }
    
    function getAgencyName() {
      return agentPersona.agency || '[Agency]';
    }
    
    function getAgentMobile() {
      return agentPersona.mobile || '[number]';
    }

    // Timezone Settings - stored in localStorage
    let userTimezone = localStorage.getItem('userTimezone') || Intl.DateTimeFormat().resolvedOptions().timeZone;

    function loadTimezoneSettings() {
      const select = document.getElementById('timezone-select');
      if (select) {
        // Set the select value to current timezone
        select.value = userTimezone;
        // If not found in options, default to Sydney
        if (!select.value) {
          select.value = 'Australia/Sydney';
        }
        // Update the live clock display
        updateTimezoneCurrentTime();
        // Add change listener
        select.onchange = function() {
          userTimezone = this.value;
          updateTimezoneCurrentTime();
        };
      }
    }

    function updateTimezoneCurrentTime() {
      const timeDisplay = document.getElementById('timezone-current-time');
      const select = document.getElementById('timezone-select');
      if (timeDisplay && select) {
        const tz = select.value;
        const time = new Date().toLocaleTimeString('en-US', { 
          timeZone: tz, 
          hour: '2-digit', 
          minute: '2-digit',
          second: '2-digit',
          hour12: true 
        });
        timeDisplay.textContent = time;
      }
    }

    function saveTimezone() {
      const select = document.getElementById('timezone-select');
      if (select) {
        userTimezone = select.value;
      }
      localStorage.setItem('userTimezone', userTimezone);
      showToast('Timezone saved: ' + userTimezone.replace(/_/g, ' ').split('/').pop());
      hideSettingsDetail();
    }

    // Start updating clock when timezone panel is open
    setInterval(() => {
      if (!document.getElementById('settings-detail-timezone').classList.contains('hidden')) {
        updateTimezoneCurrentTime();
      }
    }, 1000);

    // Pipeline Settings - stored in localStorage to persist
    let pipelineStagesConfig = JSON.parse(localStorage.getItem('pipelineStages')) || [
      { id: 'new', name: 'New', color: '#6b7280', colorName: 'gray', active: true },
      { id: 'contacted', name: 'Contacted', color: '#3b82f6', colorName: 'blue', active: true },
      { id: 'appraisal', name: 'Appraisal Set', color: '#8b5cf6', colorName: 'purple', active: true },
      { id: 'listed', name: 'Listed', color: '#22c55e', colorName: 'green', active: true },
      { id: 'sold', name: 'Sold', color: '#f59e0b', colorName: 'amber', active: true }
    ];
    
    function renderPipelineSettings() {
      const container = document.querySelector('#pipeline-stages-list .divide-y');
      container.innerHTML = pipelineStagesConfig.map((stage, idx) => `
        <div class="p-4 flex items-center space-x-4" data-stage-idx="${idx}">
          <span class="w-8 text-center text-gray-400 font-medium">${idx + 1}</span>
          <input type="color" value="${stage.color}" onchange="updatePipelineStageColor(${idx}, this.value)" class="w-10 h-10 rounded-lg cursor-pointer border-0">
          <input type="text" value="${stage.name}" onchange="updatePipelineStageName(${idx}, this.value)" class="flex-1 px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:border-primary">
          <label class="flex items-center space-x-2">
            <input type="checkbox" ${stage.active ? 'checked' : ''} onchange="updatePipelineStageActive(${idx}, this.checked)" class="rounded border-gray-300 text-primary w-5 h-5">
            <span class="text-sm text-gray-600">Active</span>
          </label>
          <button onclick="deletePipelineSettingsStage(${idx})" class="p-2 hover:bg-red-50 rounded-lg text-gray-400 hover:text-red-500" title="Delete stage">
            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"/></svg>
          </button>
        </div>
      `).join('');
    }
    
    function updatePipelineStageName(idx, name) {
      pipelineStagesConfig[idx].name = name;
    }
    
    function updatePipelineStageColor(idx, color) {
      pipelineStagesConfig[idx].color = color;
      // Map hex to Tailwind color name (approximate)
      const colorMap = {
        '#6b7280': 'gray', '#3b82f6': 'blue', '#8b5cf6': 'purple', '#22c55e': 'green',
        '#f59e0b': 'amber', '#06b6d4': 'cyan', '#ec4899': 'pink', '#6366f1': 'indigo',
        '#f97316': 'orange', '#14b8a6': 'teal', '#ef4444': 'red', '#eab308': 'yellow'
      };
      pipelineStagesConfig[idx].colorName = colorMap[color] || 'gray';
    }
    
    function updatePipelineStageActive(idx, active) {
      pipelineStagesConfig[idx].active = active;
    }
    
    function addPipelineSettingsStage() {
      const colors = ['#06b6d4', '#ec4899', '#6366f1', '#f97316', '#14b8a6'];
      const colorNames = ['cyan', 'pink', 'indigo', 'orange', 'teal'];
      const colorIdx = pipelineStagesConfig.length % colors.length;
      pipelineStagesConfig.push({
        id: `stage-${Date.now()}`,
        name: 'New Stage',
        color: colors[colorIdx],
        colorName: colorNames[colorIdx],
        active: true
      });
      renderPipelineSettings();
    }
    
    function deletePipelineSettingsStage(idx) {
      if (pipelineStagesConfig.length <= 1) {
        alert('You must have at least one pipeline stage.');
        return;
      }
      pipelineStagesConfig.splice(idx, 1);
      renderPipelineSettings();
    }
    
    function savePipelineSettings() {
      // Save to localStorage
      localStorage.setItem('pipelineStages', JSON.stringify(pipelineStagesConfig));
      
      // Rebuild the pipeline board with new stages
      rebuildPipelineBoard();
      
      // Show save confirmation
      const status = document.getElementById('pipeline-save-status');
      status.classList.remove('hidden');
      setTimeout(() => status.classList.add('hidden'), 2000);
    }
    
    function rebuildPipelineBoard() {
      const board = document.getElementById('pipeline-board');
      if (!board) return;
      
      // Get existing cards from all stages
      const existingCards = {};
      board.querySelectorAll('.pipeline-stage').forEach(stage => {
        const stageId = stage.dataset.stage;
        existingCards[stageId] = stage.querySelectorAll('.pipeline-card');
      });
      
      const colorClasses = {
        gray: { bg: 'bg-gray-100', text: 'text-gray-700', badge: 'bg-gray-200', hover: 'hover:bg-gray-200', border: 'border-gray-200' },
        blue: { bg: 'bg-blue-50', text: 'text-blue-700', badge: 'bg-blue-100', hover: 'hover:bg-blue-100', border: 'border-blue-200' },
        purple: { bg: 'bg-purple-50', text: 'text-purple-700', badge: 'bg-purple-100', hover: 'hover:bg-purple-100', border: 'border-purple-200' },
        green: { bg: 'bg-green-50', text: 'text-green-700', badge: 'bg-green-100', hover: 'hover:bg-green-100', border: 'border-green-200' },
        amber: { bg: 'bg-amber-50', text: 'text-amber-700', badge: 'bg-amber-100', hover: 'hover:bg-amber-100', border: 'border-amber-200' },
        cyan: { bg: 'bg-cyan-50', text: 'text-cyan-700', badge: 'bg-cyan-100', hover: 'hover:bg-cyan-100', border: 'border-cyan-200' },
        pink: { bg: 'bg-pink-50', text: 'text-pink-700', badge: 'bg-pink-100', hover: 'hover:bg-pink-100', border: 'border-pink-200' },
        indigo: { bg: 'bg-indigo-50', text: 'text-indigo-700', badge: 'bg-indigo-100', hover: 'hover:bg-indigo-100', border: 'border-indigo-200' },
        orange: { bg: 'bg-orange-50', text: 'text-orange-700', badge: 'bg-orange-100', hover: 'hover:bg-orange-100', border: 'border-orange-200' },
        teal: { bg: 'bg-teal-50', text: 'text-teal-700', badge: 'bg-teal-100', hover: 'hover:bg-teal-100', border: 'border-teal-200' },
        red: { bg: 'bg-red-50', text: 'text-red-700', badge: 'bg-red-100', hover: 'hover:bg-red-100', border: 'border-red-200' },
        yellow: { bg: 'bg-yellow-50', text: 'text-yellow-700', badge: 'bg-yellow-100', hover: 'hover:bg-yellow-100', border: 'border-yellow-200' }
      };
      
      board.innerHTML = pipelineStagesConfig.filter(s => s.active).map(stage => {
        const c = colorClasses[stage.colorName] || colorClasses.gray;
        const cards = existingCards[stage.id] ? Array.from(existingCards[stage.id]).map(card => card.outerHTML).join('') : '';
        const cardCount = existingCards[stage.id] ? existingCards[stage.id].length : 0;
        
        return `
          <div class="pipeline-stage w-56 ${c.bg} rounded-lg p-3 flex flex-col group" data-stage="${stage.id}" data-color="${stage.colorName}">
            <div class="flex items-center justify-between mb-3">
              <h3 class="stage-name font-semibold ${c.text} cursor-pointer ${c.hover} px-2 py-1 -mx-2 -my-1 rounded" onclick="editStageName(this)" title="Click to rename">${stage.name}</h3>
              <div class="flex items-center space-x-1">
                <span class="stage-count text-xs ${c.badge} px-2 py-0.5 rounded-full ${c.text}">${cardCount}</span>
                <button onclick="deletePipelineStage(this)" class="p-1 ${c.hover} rounded opacity-0 group-hover:opacity-100 transition-opacity" title="Delete stage">
                  <svg class="w-3.5 h-3.5 text-gray-400 hover:text-red-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/></svg>
                </button>
              </div>
            </div>
            <div class="pipeline-dropzone space-y-2 flex-1 overflow-auto min-h-[100px] rounded-lg transition-colors" data-stage="${stage.id}">
              ${cards}
            </div>
          </div>
        `;
      }).join('');
      
      // Re-initialize drag and drop
      initPipelineDragDrop();
      updatePipelineCounts();
    }

    // AI Scores data and sorting - also powers Leads page
    let aiScoresData = [];
    let aiScoresSortColumn = 'score';
    let aiScoresSortDirection = 'desc';
    let currentSuburbFilter = 'all';
    let currentSearchQuery = '';
    let leadsLoading = false;
    let leadsTotalCount = 0;
    let leadsCurrentPage = 1;
    
    // Signal type styling map
    const signalStyleMap = {
      'garageSale': {text:'Garage sale',bg:'bg-orange-100',color:'text-orange-700'},
      'listedForSale': {text:'Listed for sale',bg:'bg-green-100',color:'text-green-700'},
      'listedForRent': {text:'Listed for rent',bg:'bg-cyan-100',color:'text-cyan-700'},
      'requested': {text:'Requested valuation',bg:'bg-pink-100',color:'text-pink-700'},
      'neighbourSold': {text:'Neighbour selling',bg:'bg-purple-100',color:'text-purple-700'},
      'recentlySold': {text:'Recently sold',bg:'bg-gray-100',color:'text-gray-700'},
      'socialTag': {text:'Tagged on social',bg:'bg-blue-100',color:'text-blue-700'},
      'fsboListing': {text:'FSBO',bg:'bg-red-100',color:'text-red-700'}
    };
    
    // Convert API lead to display format
    function convertLeadToDisplay(lead) {
      // Build signals array from boolean flags
      const signals = [];
      if (lead.garageSale) signals.push(signalStyleMap.garageSale);
      if (lead.listedForSale) signals.push(signalStyleMap.listedForSale);
      if (lead.listedForRent) signals.push(signalStyleMap.listedForRent);
      if (lead.requested) signals.push(signalStyleMap.requested);
      if (lead.neighbourSold) signals.push(signalStyleMap.neighbourSold);
      if (lead.recentlySold) signals.push(signalStyleMap.recentlySold);
      if (lead.socialTag) signals.push(signalStyleMap.socialTag);
      if (lead.fsboListing) signals.push(signalStyleMap.fsboListing);
      
      // Calculate time ago from updatedAt
      const updated = new Date(lead.updatedAt);
      const now = new Date();
      const diffMs = now - updated;
      const diffMins = Math.floor(diffMs / 60000);
      let updatedText = '';
      if (diffMins < 60) updatedText = `${diffMins}m ago`;
      else if (diffMins < 1440) updatedText = `${Math.floor(diffMins/60)}h ago`;
      else if (diffMins < 10080) updatedText = `${Math.floor(diffMins/1440)}d ago`;
      else if (diffMins < 43200) updatedText = `${Math.floor(diffMins/10080)}w ago`;
      else updatedText = `${Math.floor(diffMins/43200)}mo ago`;
      
      // Parse sale price
      let value = 0;
      if (lead.salePrice) {
        const priceStr = lead.salePrice.replace(/[$,]/g, '');
        value = parseFloat(priceStr) / 1000000; // Convert to millions
      }
      
      return {
        id: lead._id,
        property: lead.streetAddress || lead.fullAddress || 'Unknown',
        suburb: lead.suburb || '',
        state: lead.state || '',
        postCode: lead.postCode || '',
        score: lead.sellingScore || 0,
        value: value.toFixed(1),
        updatedText,
        updatedMinutes: diffMins,
        signals,
        bed: lead.bed || 0,
        bath: lead.bath || 0,
        car: lead.car || 0,
        propertyType: lead.propertyType || '',
        ownerName: lead.owner1Name || '',
        ownerType: lead.ownerType || '',
        unlocked: lead.unLocked || false,
        rawData: lead
      };
    }
    
    // Load leads from API
    async function loadLeadsFromAPI(options = {}) {
      if (leadsLoading) return;
      leadsLoading = true;
      
      const tbody = document.getElementById('leads-table-body');
      if (tbody) {
        tbody.innerHTML = '<tr><td colspan="6" class="text-center py-8"><div class="flex items-center justify-center space-x-2"><div class="animate-spin rounded-full h-5 w-5 border-b-2 border-primary"></div><span class="text-gray-500">Loading leads...</span></div></td></tr>';
      }
      
      try {
        const token = localStorage.getItem('propdeals_jwt');
        if (!token) {
          throw new Error('Not authenticated');
        }
        
        // Get subscribed suburbs first
        const suburbs = await getSubscribedSuburbs();
        
        const apiOptions = {
          page: options.page || 1,
          perPage: options.perPage || 50
        };
        
        // Filter by subscribed suburbs
        if (suburbs.length > 0) {
          apiOptions.suburbs = suburbs;
        }
        
        // Add search if provided
        if (options.search) {
          apiOptions.search = options.search;
        }
        
        // Add selling score filter
        if (options.sellingScore) {
          apiOptions.sellingScore = options.sellingScore;
        }
        
        // Add insights filter
        if (options.insights) {
          apiOptions.insights = options.insights;
        }
        
        const data = await apiGetAllLeads(apiOptions);
        
        if (data && data.leads) {
          aiScoresData = data.leads.map(convertLeadToDisplay);
          leadsTotalCount = data.total || data.leads.length;
          leadsCurrentPage = options.page || 1;
          
          // Extract unique suburbs for filter tabs
          updateSuburbTabs();
        }
        
        renderLeadsTable();
      } catch (error) {
        console.error('Failed to load leads:', error);
        if (tbody) {
          if (error.message === 'Not authenticated' || error.message.includes('Session expired')) {
            tbody.innerHTML = `<tr><td colspan="6" class="text-center py-12">
              <div class="text-gray-400 mb-2">
                <svg class="w-16 h-16 mx-auto" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"></path>
                </svg>
              </div>
              <div class="text-gray-700 font-medium text-lg">Login Required</div>
              <div class="text-gray-400 text-sm mt-1 mb-4">Connect to Get Listings API to view your leads</div>
              <button onclick="showSettingsDetail('api')" class="px-6 py-2.5 bg-primary text-white rounded-lg text-sm font-medium hover:bg-red-700 transition-colors">
                <span class="flex items-center justify-center gap-2">
                  <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 16l-4-4m0 0l4-4m-4 4h14m-5 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h7a3 3 0 013 3v1"></path>
                  </svg>
                  Log In
                </span>
              </button>
            </td></tr>`;
          } else {
            tbody.innerHTML = `<tr><td colspan="6" class="text-center py-8">
              <div class="text-red-500 font-medium">Failed to load leads</div>
              <div class="text-gray-400 text-sm mt-1">${error.message}</div>
              <button onclick="loadLeadsFromAPI()" class="mt-3 px-4 py-2 bg-primary text-white rounded-lg text-sm hover:bg-red-700">Retry</button>
            </td></tr>`;
          }
        }
      } finally {
        leadsLoading = false;
      }
    }
    
    // Update suburb filter tabs based on subscribed suburbs
    function updateSuburbTabs() {
      const container = document.getElementById('suburb-tabs-container');
      if (!container) return;
      
      // Get subscribed suburbs from cache
      const suburbs = cachedSubscribedSuburbs || [];
      
      // Count leads per suburb
      const suburbCounts = {};
      let totalCount = aiScoresData.length;
      
      suburbs.forEach(s => {
        const count = aiScoresData.filter(lead => 
          lead.suburb && lead.suburb.toLowerCase() === s.suburb.toLowerCase()
        ).length;
        suburbCounts[s.suburb] = count;
      });
      
      // Update total count
      const totalCountEl = document.getElementById('suburb-count-all');
      if (totalCountEl) totalCountEl.textContent = totalCount.toLocaleString();
      
      // Build suburb tabs HTML
      let tabsHtml = `
        <button onclick="filterLeadsBySuburb('all')" id="suburb-tab-all" class="suburb-tab px-4 py-3 text-sm font-medium border-b-2 ${currentSuburbFilter === 'all' ? 'border-primary text-primary' : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'}">
          All Suburbs
          <span class="ml-1.5 px-2 py-0.5 ${currentSuburbFilter === 'all' ? 'bg-primary/10 text-primary' : 'bg-gray-100 text-gray-600'} text-xs rounded-full">${totalCount.toLocaleString()}</span>
        </button>
      `;
      
      suburbs.forEach(s => {
        const isActive = currentSuburbFilter === s.suburb.toLowerCase();
        const count = suburbCounts[s.suburb] || 0;
        tabsHtml += `
          <button onclick="filterLeadsBySuburb('${s.suburb.toLowerCase()}')" class="suburb-tab px-4 py-3 text-sm font-medium border-b-2 ${isActive ? 'border-primary text-primary' : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'}">
            ${s.suburb}
            <span class="ml-1.5 px-2 py-0.5 ${isActive ? 'bg-primary/10 text-primary' : 'bg-gray-100 text-gray-600'} text-xs rounded-full">${count.toLocaleString()}</span>
          </button>
        `;
      });
      
      // Add spacer and manage button
      tabsHtml += `
        <div class="flex-1"></div>
        <button onclick="showPage('settings')" class="flex items-center space-x-1 px-3 py-1.5 text-xs text-gray-500 hover:text-primary hover:bg-gray-50 rounded-lg">
          <svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"/><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/></svg>
          <span>Manage Suburbs</span>
        </button>
      `;
      
      container.innerHTML = tabsHtml;
    }
    
    // Alias for backward compatibility - now just calls API
    function generateAIScores() {
      loadLeadsFromAPI();
    }
    
    function renderLeadsTable() {
      // Filter by suburb
      let filtered = currentSuburbFilter === 'all' 
        ? [...aiScoresData] 
        : aiScoresData.filter(row => row.suburb.toLowerCase() === currentSuburbFilter);
      
      // Filter by signal
      if (currentSignalFilter && currentSignalFilter !== 'all') {
        filtered = filtered.filter(row => 
          row.signals.some(s => s.text.toLowerCase() === currentSignalFilter.toLowerCase())
        );
      }
      
      // Filter by score range
      if (currentScoreFilter && currentScoreFilter !== 'all') {
        filtered = filtered.filter(row => {
          if (currentScoreFilter === 'high') return row.score >= 75;
          if (currentScoreFilter === 'medium') return row.score >= 50 && row.score < 75;
          if (currentScoreFilter === 'low') return row.score >= 10 && row.score < 50;
          return true;
        });
      }
      
      // Filter out sold & listed properties
      if (hideSoldListedFilter) {
        filtered = filtered.filter(row => 
          !row.signals.some(s => {
            const txt = s.text.toLowerCase();
            return txt.includes('sold') || txt.includes('listed');
          })
        );
      }
      
      // Filter by search
      if (currentSearchQuery) {
        const q = currentSearchQuery.toLowerCase();
        filtered = filtered.filter(row => 
          row.property.toLowerCase().includes(q) || 
          row.suburb.toLowerCase().includes(q) ||
          row.signals.some(s => s.text.toLowerCase().includes(q))
        );
      }
      
      // Sort data
      const sorted = filtered.sort((a, b) => {
        let aVal, bVal;
        switch(aiScoresSortColumn) {
          case 'property': aVal = a.property.toLowerCase(); bVal = b.property.toLowerCase(); break;
          case 'suburb': aVal = a.suburb.toLowerCase(); bVal = b.suburb.toLowerCase(); break;
          case 'score': aVal = a.score; bVal = b.score; break;
          case 'value': aVal = a.value; bVal = b.value; break;
          case 'updated': aVal = a.updatedMinutes; bVal = b.updatedMinutes; break;
          default: aVal = a.score; bVal = b.score;
        }
        if(typeof aVal === 'string') {
          return aiScoresSortDirection === 'asc' ? aVal.localeCompare(bVal) : bVal.localeCompare(aVal);
        }
        return aiScoresSortDirection === 'asc' ? aVal - bVal : bVal - aVal;
      });
      
      const tbody = document.getElementById('leads-table-body');
      if (!tbody) return;
      
      let html = '';
      
      for(const row of sorted) {
        let scoreColor, barColor;
        if(row.score >= 85) { scoreColor = 'text-green-600'; barColor = 'bg-green-500'; }
        else if(row.score >= 70) { scoreColor = 'text-lime-600'; barColor = 'bg-lime-500'; }
        else if(row.score >= 55) { scoreColor = 'text-yellow-600'; barColor = 'bg-yellow-500'; }
        else { scoreColor = 'text-orange-600'; barColor = 'bg-orange-500'; }
        
        const signalsHtml = row.signals.map(s => `<span class="px-2 py-0.5 ${s.bg} ${s.color} text-xs rounded mr-1">${s.text}</span>`).join('');
        
        html += `<tr class="hover:bg-gray-50 cursor-pointer" onclick="showLeadDetail('${row.property}, ${row.suburb}', ${row.score})">
          <td class="px-6 py-3 font-medium text-gray-900">${row.property}</td>
          <td class="px-6 py-3 text-sm text-gray-600">${row.suburb}</td>
          <td class="px-6 py-3"><div class="flex items-center"><div class="w-16 bg-gray-200 rounded-full h-2 mr-2"><div class="${barColor} h-2 rounded-full" style="width:${row.score}%"></div></div><span class="${scoreColor} font-bold">${row.score}</span></div></td>
          <td class="px-6 py-3">${signalsHtml}</td>
          <td class="px-6 py-3 text-sm text-gray-600">$${row.value}M</td>
          <td class="px-6 py-3 text-sm text-gray-400">${row.updatedText}</td>
        </tr>`;
      }
      
      tbody.innerHTML = html;
      
      // Update counts
      const showingEl = document.getElementById('leads-showing');
      const totalEl = document.getElementById('leads-total');
      if (showingEl) showingEl.textContent = `1-${Math.min(sorted.length, 50)}`;
      if (totalEl) totalEl.textContent = sorted.length.toLocaleString();
    }
    
    function filterLeadsBySuburb(suburb) {
      currentSuburbFilter = suburb;
      
      // Update tab styling
      document.querySelectorAll('.suburb-tab').forEach(tab => {
        const tabId = tab.id;
        const tabSuburb = tabId.replace('suburb-tab-', '');
        if (tabSuburb === suburb) {
          tab.classList.remove('border-transparent', 'text-gray-500');
          tab.classList.add('border-primary', 'text-primary');
          const badge = tab.querySelector('span');
          if (badge) {
            badge.classList.remove('bg-gray-100', 'text-gray-600');
            badge.classList.add('bg-primary/10', 'text-primary');
          }
        } else {
          tab.classList.remove('border-primary', 'text-primary');
          tab.classList.add('border-transparent', 'text-gray-500');
          const badge = tab.querySelector('span');
          if (badge) {
            badge.classList.remove('bg-primary/10', 'text-primary');
            badge.classList.add('bg-gray-100', 'text-gray-600');
          }
        }
      });
      
      renderLeadsTable();
    }
    
    // Signal filter for quick tabs
    let currentSignalFilter = 'all';
    function filterLeadsBySignal(signal) {
      currentSignalFilter = signal;
      
      // Update signal tab styling
      document.querySelectorAll('.signal-tab').forEach(tab => {
        const tabText = tab.textContent.trim().replace(/[0-9]/g, '').trim();
        const isMatch = (signal === 'all' && tabText === 'All') || 
                        tabText.toLowerCase() === signal.toLowerCase();
        
        if (isMatch) {
          tab.classList.remove('bg-white', 'border-gray-200', 'text-gray-600');
          tab.classList.add('bg-primary', 'text-white', 'border-primary');
        } else {
          tab.classList.remove('bg-primary', 'text-white', 'border-primary');
          tab.classList.add('bg-white', 'border-gray-200', 'text-gray-600');
        }
      });
      
      renderLeadsTable();
    }
    
    // Score range filter
    let currentScoreFilter = 'all';
    function filterLeadsByScore(range) {
      currentScoreFilter = range;
      
      // Update score button styling
      document.querySelectorAll('.score-filter-btn').forEach(btn => {
        const btnRange = btn.getAttribute('data-score');
        
        if (btnRange === range) {
          // Active state
          if (range === 'high') {
            btn.className = 'score-filter-btn px-3 py-1 text-xs font-medium rounded-md transition-colors bg-green-100 text-green-800';
          } else if (range === 'medium') {
            btn.className = 'score-filter-btn px-3 py-1 text-xs font-medium rounded-md transition-colors bg-amber-100 text-amber-800';
          } else if (range === 'low') {
            btn.className = 'score-filter-btn px-3 py-1 text-xs font-medium rounded-md transition-colors bg-gray-200 text-gray-800';
          } else {
            btn.className = 'score-filter-btn px-3 py-1 text-xs font-medium rounded-md transition-colors bg-primary text-white';
          }
        } else {
          // Inactive state
          btn.className = 'score-filter-btn px-3 py-1 text-xs font-medium rounded-md transition-colors bg-white text-gray-600 border border-gray-200 hover:bg-gray-50';
        }
      });
      
      renderLeadsTable();
    }
    
    // Hide sold & listed filter
    let hideSoldListedFilter = false;
    function toggleHideSoldListed() {
      hideSoldListedFilter = !hideSoldListedFilter;
      const btn = document.getElementById('hide-sold-listed-btn');
      if (btn) {
        if (hideSoldListedFilter) {
          btn.classList.remove('bg-white', 'text-gray-600', 'border-gray-200');
          btn.classList.add('bg-primary', 'text-white', 'border-primary');
        } else {
          btn.classList.remove('bg-primary', 'text-white', 'border-primary');
          btn.classList.add('bg-white', 'text-gray-600', 'border-gray-200');
        }
      }
      renderLeadsTable();
    }
    
    function searchLeadsTable(query) {
      currentSearchQuery = query;
      renderLeadsTable();
    }
    
    function sortLeadsTable(column) {
      if(aiScoresSortColumn === column) {
        aiScoresSortDirection = aiScoresSortDirection === 'asc' ? 'desc' : 'asc';
      } else {
        aiScoresSortColumn = column;
        aiScoresSortDirection = column === 'score' || column === 'value' ? 'desc' : 'asc';
      }
      renderLeadsTable();
    }
    
    function filterLeadsTable() {
      // Score filter dropdown
      renderLeadsTable();
    }
    
    // Column resizing
    function initColumnResize() {
      const table = document.getElementById('leads-main-table');
      if (!table) return;
      
      const handles = table.querySelectorAll('.resize-handle');
      let isResizing = false;
      let currentTh = null;
      let startX = 0;
      let startWidth = 0;
      
      handles.forEach(handle => {
        handle.addEventListener('mousedown', (e) => {
          e.preventDefault();
          e.stopPropagation();
          isResizing = true;
          currentTh = handle.parentElement;
          startX = e.pageX;
          startWidth = currentTh.offsetWidth;
          handle.classList.add('active');
          document.body.style.cursor = 'col-resize';
          document.body.style.userSelect = 'none';
        });
      });
      
      document.addEventListener('mousemove', (e) => {
        if (!isResizing) return;
        const diff = e.pageX - startX;
        const newWidth = Math.max(parseInt(currentTh.style.minWidth) || 80, startWidth + diff);
        currentTh.style.width = newWidth + 'px';
      });
      
      document.addEventListener('mouseup', () => {
        if (isResizing) {
          isResizing = false;
          document.body.style.cursor = '';
          document.body.style.userSelect = '';
          document.querySelectorAll('.resize-handle').forEach(h => h.classList.remove('active'));
          currentTh = null;
        }
      });
    }
    
    // ===== PIPELINE DRAG AND DROP =====
    function initPipelineDragDrop() {
      const cards = document.querySelectorAll('.pipeline-card[draggable="true"]');
      const dropZones = document.querySelectorAll('.pipeline-dropzone');
      let draggedCard = null;
      
      cards.forEach(card => {
        card.addEventListener('dragstart', (e) => {
          draggedCard = card;
          card.classList.add('opacity-50', 'ring-2', 'ring-primary');
          e.dataTransfer.effectAllowed = 'move';
          e.dataTransfer.setData('text/plain', card.dataset.id);
        });
        
        card.addEventListener('dragend', () => {
          draggedCard.classList.remove('opacity-50', 'ring-2', 'ring-primary');
          dropZones.forEach(zone => zone.classList.remove('bg-sky-50', 'ring-2', 'ring-sky-300'));
          draggedCard = null;
        });
      });
      
      dropZones.forEach(zone => {
        zone.addEventListener('dragover', (e) => {
          e.preventDefault();
          e.dataTransfer.dropEffect = 'move';
          zone.classList.add('bg-sky-50', 'ring-2', 'ring-sky-300');
        });
        
        zone.addEventListener('dragleave', () => {
          zone.classList.remove('bg-sky-50', 'ring-2', 'ring-sky-300');
        });
        
        zone.addEventListener('drop', (e) => {
          e.preventDefault();
          zone.classList.remove('bg-sky-50', 'ring-2', 'ring-sky-300');
          if (draggedCard) {
            zone.appendChild(draggedCard);
            updatePipelineCounts();
            showToast(`Card moved to ${zone.dataset.stage}`);
          }
        });
      });
    }
    
    function updatePipelineCounts() {
      document.querySelectorAll('.pipeline-stage').forEach(stage => {
        const count = stage.querySelectorAll('.pipeline-card').length;
        const badge = stage.querySelector('.stage-count');
        if (badge) badge.textContent = count;
      });
    }
    
    // ===== PIPELINE STAGE MANAGEMENT =====
    function editStageName(element) {
      const currentName = element.textContent;
      const input = document.createElement('input');
      input.type = 'text';
      input.value = currentName;
      input.className = 'font-semibold bg-white border border-gray-300 rounded px-2 py-1 text-sm focus:outline-none focus:border-primary w-full';
      
      element.replaceWith(input);
      input.focus();
      input.select();
      
      const saveName = () => {
        const newName = input.value.trim() || currentName;
        const h3 = document.createElement('h3');
        h3.className = element.className;
        h3.textContent = newName;
        h3.onclick = () => editStageName(h3);
        h3.title = 'Click to rename';
        input.replaceWith(h3);
        showToast(`Stage renamed to "${newName}"`);
      };
      
      input.addEventListener('blur', saveName);
      input.addEventListener('keydown', (e) => {
        if (e.key === 'Enter') {
          e.preventDefault();
          input.blur();
        }
        if (e.key === 'Escape') {
          input.value = currentName;
          input.blur();
        }
      });
    }
    
    const stageColors = ['gray', 'blue', 'purple', 'green', 'amber', 'cyan', 'pink', 'indigo', 'orange', 'teal'];
    let stageIdCounter = 100;
    
    function addPipelineStage() {
      const board = document.getElementById('pipeline-board');
      const existingStages = board.querySelectorAll('.pipeline-stage').length;
      const color = stageColors[existingStages % stageColors.length];
      const stageId = `stage-${stageIdCounter++}`;
      
      const colorClasses = {
        gray: { bg: 'bg-gray-100', text: 'text-gray-700', badge: 'bg-gray-200', hover: 'hover:bg-gray-200', border: 'border-gray-200' },
        blue: { bg: 'bg-blue-50', text: 'text-blue-700', badge: 'bg-blue-100', hover: 'hover:bg-blue-100', border: 'border-blue-200' },
        purple: { bg: 'bg-purple-50', text: 'text-purple-700', badge: 'bg-purple-100', hover: 'hover:bg-purple-100', border: 'border-purple-200' },
        green: { bg: 'bg-green-50', text: 'text-green-700', badge: 'bg-green-100', hover: 'hover:bg-green-100', border: 'border-green-200' },
        amber: { bg: 'bg-amber-50', text: 'text-amber-700', badge: 'bg-amber-100', hover: 'hover:bg-amber-100', border: 'border-amber-200' },
        cyan: { bg: 'bg-cyan-50', text: 'text-cyan-700', badge: 'bg-cyan-100', hover: 'hover:bg-cyan-100', border: 'border-cyan-200' },
        pink: { bg: 'bg-pink-50', text: 'text-pink-700', badge: 'bg-pink-100', hover: 'hover:bg-pink-100', border: 'border-pink-200' },
        indigo: { bg: 'bg-indigo-50', text: 'text-indigo-700', badge: 'bg-indigo-100', hover: 'hover:bg-indigo-100', border: 'border-indigo-200' },
        orange: { bg: 'bg-orange-50', text: 'text-orange-700', badge: 'bg-orange-100', hover: 'hover:bg-orange-100', border: 'border-orange-200' },
        teal: { bg: 'bg-teal-50', text: 'text-teal-700', badge: 'bg-teal-100', hover: 'hover:bg-teal-100', border: 'border-teal-200' }
      };
      
      const c = colorClasses[color];
      
      const stageHtml = `
        <div class="pipeline-stage w-56 ${c.bg} rounded-lg p-3 flex flex-col group" data-stage="${stageId}" data-color="${color}">
          <div class="flex items-center justify-between mb-3">
            <h3 class="stage-name font-semibold ${c.text} cursor-pointer ${c.hover} px-2 py-1 -mx-2 -my-1 rounded" onclick="editStageName(this)" title="Click to rename">New Stage</h3>
            <div class="flex items-center space-x-1">
              <span class="stage-count text-xs ${c.badge} px-2 py-0.5 rounded-full ${c.text}">0</span>
              <button onclick="deletePipelineStage(this)" class="p-1 ${c.hover} rounded opacity-0 group-hover:opacity-100 transition-opacity" title="Delete stage">
                <svg class="w-3.5 h-3.5 text-gray-400 hover:text-red-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/></svg>
              </button>
            </div>
          </div>
          <div class="pipeline-dropzone space-y-2 flex-1 overflow-auto min-h-[100px] rounded-lg transition-colors" data-stage="${stageId}">
          </div>
        </div>
      `;
      
      board.insertAdjacentHTML('beforeend', stageHtml);
      initPipelineDragDrop(); // Re-init drag and drop for new stage
      showToast('New stage added! Click the name to rename it.');
    }
    
    function deletePipelineStage(button) {
      const stage = button.closest('.pipeline-stage');
      const stageName = stage.querySelector('.stage-name').textContent;
      const cardCount = stage.querySelectorAll('.pipeline-card').length;
      
      if (cardCount > 0) {
        if (!confirm(`"${stageName}" has ${cardCount} card(s). Delete anyway? Cards will be lost.`)) {
          return;
        }
      }
      
      stage.remove();
      showToast(`Stage "${stageName}" deleted`);
    }
    
    function showToast(message) {
      const toast = document.createElement('div');
      toast.className = 'fixed bottom-4 right-4 bg-gray-900 text-white px-4 py-2 rounded-lg shadow-lg z-50 animate-fade-in';
      toast.textContent = message;
      document.body.appendChild(toast);
      setTimeout(() => {
        toast.style.opacity = '0';
        toast.style.transition = 'opacity 0.3s';
        setTimeout(() => toast.remove(), 300);
      }, 2000);
    }
    
    // ===== TEMPLATE EDITOR =====
    let currentTemplateIndex = null;
    let uploadedPhotoDataUrl = null;
    
    function openTemplateEditor(templateIdx) {
      currentTemplateIndex = templateIdx;
      const template = templates[templateIdx];
      
      // Set template name
      document.getElementById('editor-template-name').textContent = template.name;
      
      // Reset form fields with sample data
      document.getElementById('editor-address').value = '42 Ocean View Drive';
      document.getElementById('editor-suburb').value = 'Bondi';
      document.getElementById('editor-price').value = '$2,450,000';
      document.getElementById('editor-beds').value = '4';
      document.getElementById('editor-baths').value = '2';
      document.getElementById('editor-cars').value = '2';
      document.getElementById('editor-agent-name').value = 'John Davidson';
      document.getElementById('editor-agent-phone').value = '0412 345 678';
      
      // Reset photo upload
      uploadedPhotoDataUrl = null;
      document.getElementById('photo-placeholder').classList.remove('hidden');
      document.getElementById('photo-preview-container').classList.add('hidden');
      
      // Render preview
      updatePreview();
      
      // Show modal
      document.getElementById('template-editor-modal').classList.remove('hidden');
      document.body.style.overflow = 'hidden';
    }
    
    function closeTemplateEditor() {
      document.getElementById('template-editor-modal').classList.add('hidden');
      document.body.style.overflow = '';
    }
    
    function updatePreview() {
      if (currentTemplateIndex === null) return;
      
      const template = templates[currentTemplateIndex];
      const preview = document.getElementById('template-preview');
      const address = document.getElementById('editor-address').value || '42 Ocean View Drive';
      const suburb = document.getElementById('editor-suburb').value || 'Bondi';
      const price = document.getElementById('editor-price').value || '$2,450,000';
      const beds = document.getElementById('editor-beds').value;
      const baths = document.getElementById('editor-baths').value;
      const cars = document.getElementById('editor-cars').value;
      const agentName = document.getElementById('editor-agent-name').value || 'John Davidson';
      const agentPhone = document.getElementById('editor-agent-phone').value || '0412 345 678';
      
      // Use uploaded photo or template default
      const photoUrl = uploadedPhotoDataUrl || `https://images.unsplash.com/${template.img}?w=800&h=800&fit=crop`;
      
      // Generate preview based on template category
      let overlayHtml = '';
      const cat = template.category;
      
      if (cat === 'just-listed') {
        overlayHtml = `
          <div class="absolute inset-0 bg-gradient-to-t from-black/70 via-transparent to-transparent"></div>
          <div class="absolute top-3 left-3 bg-primary text-white px-3 py-1 rounded-lg text-sm font-bold">JUST LISTED</div>
          <div class="absolute bottom-0 left-0 right-0 p-4 text-white">
            <p class="text-lg font-bold">${address}</p>
            <p class="text-sm opacity-80">${suburb}</p>
            <div class="flex items-center space-x-3 mt-2 text-sm">
              <span>ðŸ› ${beds}</span><span>ðŸ› ${baths}</span><span>ðŸš— ${cars}</span>
            </div>
            <p class="text-xl font-bold mt-2">${price}</p>
          </div>`;
      } else if (cat === 'sold') {
        overlayHtml = `
          <div class="absolute inset-0 bg-gradient-to-t from-green-900/70 via-transparent to-transparent"></div>
          <div class="absolute inset-0 flex items-center justify-center">
            <div class="border-4 border-green-400 rounded-lg px-6 py-3 transform -rotate-12">
              <span class="text-green-400 text-4xl font-black">SOLD</span>
            </div>
          </div>
          <div class="absolute bottom-0 left-0 right-0 p-4 text-white text-center">
            <p class="font-bold">${address}, ${suburb}</p>
            <p class="text-sm opacity-80 mt-1">Another happy seller! ðŸŽ‰</p>
          </div>`;
      } else if (cat === 'under-offer') {
        overlayHtml = `
          <div class="absolute inset-0 bg-gradient-to-t from-amber-900/70 via-transparent to-transparent"></div>
          <div class="absolute top-3 left-3 bg-amber-500 text-white px-3 py-1 rounded-lg text-sm font-bold">âš¡ UNDER OFFER</div>
          <div class="absolute bottom-0 left-0 right-0 p-4 text-white">
            <p class="text-lg font-bold">${address}</p>
            <p class="text-sm opacity-80">${suburb}</p>
          </div>`;
      } else if (cat === 'leased') {
        overlayHtml = `
          <div class="absolute inset-0 bg-gradient-to-t from-purple-900/70 via-transparent to-transparent"></div>
          <div class="absolute inset-0 flex items-center justify-center">
            <div class="border-4 border-purple-400 rounded-lg px-6 py-3">
              <span class="text-purple-300 text-4xl font-black">LEASED</span>
            </div>
          </div>`;
      } else if (cat === 'open-home') {
        overlayHtml = `
          <div class="absolute inset-0 bg-gradient-to-t from-amber-900/70 via-transparent to-transparent"></div>
          <div class="absolute top-0 left-0 right-0 bg-amber-500 py-2 text-center">
            <span class="text-white text-lg font-bold">ðŸ  OPEN HOME</span>
          </div>
          <div class="absolute inset-0 flex items-center justify-center">
            <div class="bg-white/95 rounded-xl px-6 py-4 text-center shadow-lg">
              <p class="text-amber-600 text-sm font-medium">THIS SATURDAY</p>
              <p class="text-3xl font-bold text-gray-900">10:00am</p>
            </div>
          </div>
          <div class="absolute bottom-0 left-0 right-0 p-3 text-white text-center">
            <p class="text-sm font-medium">${address}, ${suburb}</p>
          </div>`;
      } else if (cat === 'price-reduced') {
        overlayHtml = `
          <div class="absolute inset-0 bg-gradient-to-t from-red-900/70 via-transparent to-transparent"></div>
          <div class="absolute top-0 left-0 right-0 bg-red-500 py-2 text-center">
            <span class="text-white text-lg font-bold">â¬‡ï¸ PRICE REDUCED</span>
          </div>
          <div class="absolute inset-0 flex items-center justify-center">
            <div class="text-center text-white">
              <p class="text-4xl font-black text-amber-400">${price}</p>
            </div>
          </div>`;
      }
      
      // Agent footer
      const agentFooter = `
        <div class="absolute bottom-0 left-0 right-0 bg-white/95 backdrop-blur p-3 flex items-center space-x-3">
          <div class="w-10 h-10 bg-primary rounded-full flex items-center justify-center text-white font-bold text-sm">${agentName.split(' ').map(n=>n[0]).join('')}</div>
          <div class="flex-1">
            <p class="text-sm font-semibold text-gray-900">${agentName}</p>
            <p class="text-xs text-gray-500">${agentPhone}</p>
          </div>
        </div>`;
      
      preview.innerHTML = `
        <img src="${photoUrl}" class="w-full h-full object-cover">
        ${overlayHtml}
        ${cat === 'just-listed' ? '' : ''}
      `;
    }
    
    function handlePhotoUpload(event) {
      const file = event.target.files[0];
      if (!file) return;
      
      const reader = new FileReader();
      reader.onload = (e) => {
        uploadedPhotoDataUrl = e.target.result;
        document.getElementById('uploaded-photo-preview').src = uploadedPhotoDataUrl;
        document.getElementById('photo-placeholder').classList.add('hidden');
        document.getElementById('photo-preview-container').classList.remove('hidden');
        updatePreview();
      };
      reader.readAsDataURL(file);
    }
    
    function removeUploadedPhoto() {
      uploadedPhotoDataUrl = null;
      document.getElementById('photo-input').value = '';
      document.getElementById('photo-placeholder').classList.remove('hidden');
      document.getElementById('photo-preview-container').classList.add('hidden');
      updatePreview();
    }
    
    function setPreviewSize(size) {
      const preview = document.getElementById('template-preview');
      document.querySelectorAll('.preview-size-btn').forEach(btn => {
        btn.classList.remove('active', 'bg-white/20');
        btn.classList.add('bg-white/10', 'text-white/60');
      });
      event.target.classList.add('active', 'bg-white/20');
      event.target.classList.remove('bg-white/10', 'text-white/60');
      
      if (size === 'square') {
        preview.style.width = '400px';
        preview.style.height = '400px';
      } else if (size === 'story') {
        preview.style.width = '225px';
        preview.style.height = '400px';
      } else if (size === 'landscape') {
        preview.style.width = '400px';
        preview.style.height = '225px';
      }
      updatePreview();
    }
    
    function exportTemplate(destination) {
      // In a real app, this would use html2canvas or similar to export
      const messages = {
        download: 'Template downloaded! Check your Downloads folder.',
        instagram: 'Opening Instagram... (In production, this would share directly)',
        facebook: 'Opening Facebook... (In production, this would share directly)'
      };
      
      showToast(messages[destination]);
      
      // Simulate download with a small delay
      if (destination === 'download') {
        setTimeout(() => {
          showToast('âœ“ marketing-post.png saved');
        }, 1000);
      }
    }
    
    // Format button toggle
    document.addEventListener('click', (e) => {
      if (e.target.classList.contains('export-format-btn')) {
        document.querySelectorAll('.export-format-btn').forEach(btn => {
          btn.classList.remove('active', 'bg-primary', 'text-white');
          btn.classList.add('bg-gray-100', 'text-gray-600');
        });
        e.target.classList.add('active', 'bg-primary', 'text-white');
        e.target.classList.remove('bg-gray-100', 'text-gray-600');
      }
    });

    // ===== SEARCH FUNCTIONALITY =====
    function initSearch() {
      // Content Creation search
      const marketingSearch = document.querySelector('#page-marketing input[type="text"]');
      if (marketingSearch) {
        marketingSearch.addEventListener('input', (e) => {
          const query = e.target.value.toLowerCase();
          const templates = document.querySelectorAll('#template-grid > div');
          templates.forEach(template => {
            const text = template.textContent.toLowerCase();
            template.style.display = text.includes(query) ? '' : 'none';
          });
        });
      }
      
      // Leads page search
      const leadsSearch = document.querySelector('#page-leads input[type="text"]');
      if (leadsSearch) {
        leadsSearch.addEventListener('input', (e) => {
          const query = e.target.value.toLowerCase();
          const cards = document.querySelectorAll('#page-leads .bg-white.rounded-xl');
          cards.forEach(card => {
            const text = card.textContent.toLowerCase();
            card.style.display = text.includes(query) ? '' : 'none';
          });
        });
      }
      
      // Properties page search  
      const propertiesSearch = document.querySelector('#page-properties input[type="text"]');
      if (propertiesSearch) {
        propertiesSearch.addEventListener('input', (e) => {
          const query = e.target.value.toLowerCase();
          const rows = document.querySelectorAll('#page-properties tbody tr');
          rows.forEach(row => {
            const text = row.textContent.toLowerCase();
            row.style.display = text.includes(query) ? '' : 'none';
          });
        });
      }
      
      // Exclusive Leads search
      const exclusiveSearch = document.querySelector('#page-exclusive input[type="text"]');
      if (exclusiveSearch) {
        exclusiveSearch.addEventListener('input', (e) => {
          const query = e.target.value.toLowerCase();
          const cards = document.querySelectorAll('#page-exclusive .bg-white.rounded-xl');
          cards.forEach(card => {
            const text = card.textContent.toLowerCase();
            card.style.display = text.includes(query) ? '' : 'none';
          });
        });
      }
    }
    
    // ===== ANALYTICS CHARTS =====
    function initAnalyticsCharts() {
      // Simple canvas-based charts for demo
      const chartConfigs = [
        { id: 'leads-trend-chart', type: 'line', data: [12, 19, 15, 25, 22, 30, 28, 35, 40, 38, 45, 52] },
        { id: 'conversion-chart', type: 'bar', data: [65, 45, 35, 25] },
        { id: 'source-chart', type: 'pie', data: [40, 25, 20, 15], labels: ['AI Scores', 'Referrals', 'Web', 'Other'] },
        { id: 'score-distribution-chart', type: 'bar', data: [8, 15, 35, 28, 14] }
      ];
      
      chartConfigs.forEach(config => {
        const container = document.getElementById(config.id);
        if (!container) return;
        
        const canvas = document.createElement('canvas');
        canvas.width = container.offsetWidth || 300;
        canvas.height = container.offsetHeight || 200;
        container.innerHTML = '';
        container.appendChild(canvas);
        
        const ctx = canvas.getContext('2d');
        drawChart(ctx, canvas, config);
      });
    }
    
    function drawChart(ctx, canvas, config) {
      const { type, data } = config;
      const w = canvas.width;
      const h = canvas.height;
      const padding = 40;
      const chartW = w - padding * 2;
      const chartH = h - padding * 2;
      const maxVal = Math.max(...data);
      
      ctx.clearRect(0, 0, w, h);
      
      if (type === 'line') {
        // Draw line chart
        ctx.strokeStyle = '#0ea5e9';
        ctx.lineWidth = 3;
        ctx.beginPath();
        data.forEach((val, i) => {
          const x = padding + (i / (data.length - 1)) * chartW;
          const y = h - padding - (val / maxVal) * chartH;
          i === 0 ? ctx.moveTo(x, y) : ctx.lineTo(x, y);
        });
        ctx.stroke();
        
        // Draw dots
        ctx.fillStyle = '#0ea5e9';
        data.forEach((val, i) => {
          const x = padding + (i / (data.length - 1)) * chartW;
          const y = h - padding - (val / maxVal) * chartH;
          ctx.beginPath();
          ctx.arc(x, y, 4, 0, Math.PI * 2);
          ctx.fill();
        });
        
        // Draw gradient fill
        const gradient = ctx.createLinearGradient(0, padding, 0, h - padding);
        gradient.addColorStop(0, 'rgba(14, 165, 233, 0.3)');
        gradient.addColorStop(1, 'rgba(14, 165, 233, 0)');
        ctx.fillStyle = gradient;
        ctx.beginPath();
        ctx.moveTo(padding, h - padding);
        data.forEach((val, i) => {
          const x = padding + (i / (data.length - 1)) * chartW;
          const y = h - padding - (val / maxVal) * chartH;
          ctx.lineTo(x, y);
        });
        ctx.lineTo(w - padding, h - padding);
        ctx.closePath();
        ctx.fill();
      } else if (type === 'bar') {
        const barWidth = chartW / data.length * 0.6;
        const gap = chartW / data.length * 0.4;
        const colors = ['#c8102e', '#0ea5e9', '#10b981', '#f59e0b', '#8b5cf6'];
        
        data.forEach((val, i) => {
          const x = padding + (i * (barWidth + gap)) + gap / 2;
          const barH = (val / maxVal) * chartH;
          const y = h - padding - barH;
          
          ctx.fillStyle = colors[i % colors.length];
          ctx.beginPath();
          ctx.roundRect(x, y, barWidth, barH, 4);
          ctx.fill();
        });
      } else if (type === 'pie') {
        const centerX = w / 2;
        const centerY = h / 2;
        const radius = Math.min(chartW, chartH) / 2 - 10;
        const colors = ['#c8102e', '#0ea5e9', '#10b981', '#f59e0b'];
        const total = data.reduce((a, b) => a + b, 0);
        let startAngle = -Math.PI / 2;
        
        data.forEach((val, i) => {
          const sliceAngle = (val / total) * Math.PI * 2;
          ctx.fillStyle = colors[i];
          ctx.beginPath();
          ctx.moveTo(centerX, centerY);
          ctx.arc(centerX, centerY, radius, startAngle, startAngle + sliceAngle);
          ctx.closePath();
          ctx.fill();
          startAngle += sliceAngle;
        });
        
        // Draw center hole for donut effect
        ctx.fillStyle = '#fff';
        ctx.beginPath();
        ctx.arc(centerX, centerY, radius * 0.5, 0, Math.PI * 2);
        ctx.fill();
      }
    }
    
    // ===== ONBOARDING FLOW =====
    let currentOnboardingStep = 1;
    const totalOnboardingSteps = 5;
    
    function showOnboarding() {
      currentOnboardingStep = 1;
      updateOnboardingUI();
      document.getElementById('onboarding-modal').classList.remove('hidden');
    }
    
    function closeOnboarding() {
      document.getElementById('onboarding-modal').classList.add('hidden');
      localStorage.setItem('onboardingComplete', 'true');
    }
    
    function nextOnboardingStep() {
      if (currentOnboardingStep < totalOnboardingSteps) {
        currentOnboardingStep++;
        updateOnboardingUI();
      } else {
        closeOnboarding();
      }
    }
    
    function prevOnboardingStep() {
      if (currentOnboardingStep > 1) {
        currentOnboardingStep--;
        updateOnboardingUI();
      }
    }
    
    function updateOnboardingUI() {
      // Update step visibility using data-step attributes
      document.querySelectorAll('.onboarding-step').forEach(step => {
        const stepNum = parseInt(step.dataset.step);
        step.classList.toggle('active', stepNum === currentOnboardingStep);
        step.style.display = stepNum === currentOnboardingStep ? 'block' : 'none';
      });
      
      // Update progress dots
      document.querySelectorAll('.onboarding-dot').forEach(dot => {
        const dotNum = parseInt(dot.dataset.dot);
        dot.classList.toggle('active', dotNum === currentOnboardingStep);
      });
    }
    
    function checkFirstVisit() {
      if (!localStorage.getItem('onboardingComplete')) {
        setTimeout(() => showOnboarding(), 500);
      }
    }
    
    // ===== INSTANT APPRAISAL =====
    async function openInstantAppraisal() {
      // Get current selected lead
      const lead = window.currentSelectedLead;
      if (!lead) {
        showToast('Please select a lead first');
        return;
      }
      
      // Parse address for display
      const address = lead.address || '42 Ocean View Drive, Bondi';
      const parts = address.split(', ');
      const streetAddress = parts[0] || '42 Ocean View Drive';
      const suburb = parts.slice(1).join(', ') || 'Bondi, NSW 2026';
      
      // Update appraisal document with property details
      document.getElementById('appraisal-property-address').textContent = streetAddress;
      document.getElementById('appraisal-suburb').textContent = suburb.includes('NSW') ? suburb : suburb + ', NSW 2026';
      
      // Set current date
      const now = new Date();
      const months = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];
      document.getElementById('appraisal-date').textContent = months[now.getMonth()] + ' ' + now.getFullYear();
      
      // Update property details
      updateAppraisalPropertyDetails(lead);
      
      // Show loading state for value
      const valueRange = document.getElementById('appraisal-value-range');
      if (valueRange) {
        valueRange.innerHTML = '<span class="animate-pulse">Generating AI Valuation...</span>';
      }
      
      // Show modal
      document.getElementById('instant-appraisal-modal').classList.remove('hidden');
      document.body.style.overflow = 'hidden';
      
      // Generate AI appraisal
      try {
        const appraisal = await generateAppraisalSnapshot(lead);
        updateAppraisalDocument(appraisal, lead);
      } catch (error) {
        console.error('Error generating appraisal:', error);
        if (valueRange) {
          valueRange.textContent = lead.onlineValuation || '$1,500,000 - $2,000,000';
        }
      }
    }
    
    function updateAppraisalPropertyDetails(lead) {
      // Update bedroom/bathroom counts if available
      const bedroomEl = document.querySelector('#appraisal-document .bg-blue-100 + .text-2xl');
      const bathroomEl = document.querySelector('#appraisal-document .bg-cyan-100 + .text-2xl');
      
      // Find the bedroom and bathroom text elements more reliably
      const statCards = document.querySelectorAll('#appraisal-document .grid-cols-4 > div');
      if (statCards.length >= 2) {
        const bedroomCount = statCards[0].querySelector('.text-2xl');
        const bathroomCount = statCards[1].querySelector('.text-2xl');
        
        if (bedroomCount && lead.bedroom) {
          bedroomCount.textContent = lead.bedroom;
        }
        if (bathroomCount && lead.bathroom) {
          bathroomCount.textContent = lead.bathroom;
        }
      }
    }
    
    function updateAppraisalDocument(appraisal, lead) {
      // Update value range
      const valueRange = document.getElementById('appraisal-value-range');
      if (valueRange && appraisal.estimatedValue) {
        valueRange.textContent = `${appraisal.estimatedValue.low} - ${appraisal.estimatedValue.high}`;
      }
      
      // Store appraisal data for PDF generation
      window.currentAppraisal = {
        ...appraisal,
        lead: lead,
        generatedAt: new Date().toISOString()
      };
    }
    
    function closeInstantAppraisal() {
      document.getElementById('instant-appraisal-modal').classList.add('hidden');
      document.body.style.overflow = '';
    }
    
    function emailAppraisal() {
      showToast('ðŸ“§ Appraisal sent to homeowner!');
      closeInstantAppraisal();
    }
    
    function downloadAppraisal() {
      showToast('ðŸ“¥ Downloading PDF...');
      // In production, this would generate actual PDF
      setTimeout(() => {
        showToast('âœ… Appraisal saved to Downloads');
      }, 1500);
    }
    
    // Close on backdrop click
    document.addEventListener('click', (e) => {
      if (e.target.id === 'instant-appraisal-modal') {
        closeInstantAppraisal();
      }
    });
    
    // Initialize on load
    document.addEventListener('DOMContentLoaded', () => {
      renderTemplates();
      generateReliabilityInsights();
      generateNearbyLeads();
      initSMSFlowBuilder();
      initColumnResize();
      initPipelineDragDrop();
      initSearch();
      setTimeout(() => initAnalyticsCharts(), 100);
      checkFirstVisit();
      initApiStatus();
      
      // Load dashboard data if authenticated
      if (isApiConnected()) {
        loadDashboardData();
      }
    });
    
    // ===== LEAD RELIABILITY ADMIN =====
    let reliabilityInsights = [];
    
    function generateReliabilityInsights() {
      const properties = [
        '42 Ocean View Dr, Bondi', '156 Harbour St, Sydney', '89 King St, Sydney', '23 Beach Rd, Coogee',
        '78 Park Ave, Parramatta', '234 Rose St, Paddington', '12 Palm Ave, Manly', '45 Marine Pde, Manly',
        '67 Station St, Newtown', '19 Valley View, Mosman', '88 Cliff Walk, Vaucluse', '33 Bay View Tce, Bondi',
        '101 Coastal Hwy, Coogee', '55 Sunset Blvd, Manly', '77 George St, Sydney', '14 Queen St, Mosman',
        '29 Creek Rd, Bondi', '63 Lake View Dr, Coogee', '8 Forest Rd, Manly', '92 Garden St, Paddington'
      ];
      
      const insightTypes = [
        { type: 'Garage sale', icon: 'ðŸ·ï¸', color: 'orange' },
        { type: 'Tagged on social media', icon: 'ðŸ“±', color: 'blue' },
        { type: 'Listed for sale', icon: 'ðŸ ', color: 'green' },
        { type: 'Neighbour selling', icon: 'ðŸ˜ï¸', color: 'purple' },
        { type: 'Listed for rent', icon: 'ðŸ”‘', color: 'cyan' },
        { type: 'Requested valuation', icon: 'ðŸ“Š', color: 'pink' },
        { type: 'FSBO', icon: 'ðŸ‘¤', color: 'red' },
        { type: 'Recently sold', icon: 'âœ…', color: 'gray' },
        { type: 'Expiring listing', icon: 'â°', color: 'amber' }
      ];
      
      const sources = [
        'Facebook', 'Instagram', 'Domain.com.au', 'Realestate.com.au', 'CoreLogic', 
        'RP Data', 'Google Maps', 'LinkedIn', 'Local newspaper', 'Council records'
      ];
      
      const evidenceSnippets = [
        'User posted: \"Moving sale this weekend! Everything must go...\"',
        'Property listed 3 days ago with asking price $1.2M',
        'Detected in background of Instagram story',
        'Mentioned in Facebook Marketplace post',
        'Owner searched for \"property valuation\" on Google',
        'Council DA approved for renovation 6 months ago',
        'Neighbour at #44 sold for $2.1M last week',
        'LinkedIn shows job change to Melbourne',
        'Rental listing appeared on Domain',
        'FSBO sign detected in Street View update'
      ];
      
      reliabilityInsights = [];
      
      for (let i = 0; i < 50; i++) {
        const confidence = Math.floor(Math.random() * 50) + 50; // 50-99%
        const numSources = Math.floor(Math.random() * 5) + 1; // 1-5 sources
        const insight = insightTypes[Math.floor(Math.random() * insightTypes.length)];
        const shuffledSources = [...sources].sort(() => 0.5 - Math.random()).slice(0, numSources);
        const daysAgo = Math.floor(Math.random() * 7);
        const hoursAgo = Math.floor(Math.random() * 24);
        
        // Auto-approve logic: 90%+ confidence AND 4+ sources
        const autoApproved = confidence >= 90 && numSources >= 4;
        
        reliabilityInsights.push({
          id: i + 1,
          property: properties[Math.floor(Math.random() * properties.length)],
          insightType: insight.type,
          icon: insight.icon,
          color: insight.color,
          confidence,
          sources: shuffledSources,
          numSources,
          evidence: evidenceSnippets[Math.floor(Math.random() * evidenceSnippets.length)],
          detected: daysAgo === 0 ? `${hoursAgo}h ago` : `${daysAgo}d ago`,
          status: autoApproved ? 'approved' : 'pending', // pending, approved, rejected
          autoApproved
        });
      }
      
      renderReliabilityTable();
    }
    
    let reliabilitySortOrder = 'desc'; // 'asc' or 'desc'
    
    function sortReliabilityByConfidence() {
      reliabilitySortOrder = reliabilitySortOrder === 'desc' ? 'asc' : 'desc';
      const icon = document.getElementById('confidence-sort-icon');
      if (icon) {
        icon.innerHTML = reliabilitySortOrder === 'desc' 
          ? '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>'
          : '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 15l7-7 7 7"/>';
        icon.classList.remove('text-gray-400');
        icon.classList.add('text-primary');
      }
      renderReliabilityTable(document.getElementById('reliability-filter').value);
    }
    
    function renderReliabilityTable(filter = 'pending') {
      const tbody = document.getElementById('reliability-table-body');
      if (!tbody) return;
      
      let filtered = filter === 'all' ? [...reliabilityInsights] : reliabilityInsights.filter(i => i.status === filter);
      
      // Sort by confidence
      filtered.sort((a, b) => reliabilitySortOrder === 'desc' ? b.confidence - a.confidence : a.confidence - b.confidence);
      
      // Update counts
      const pendingCount = reliabilityInsights.filter(i => i.status === 'pending').length;
      document.getElementById('pending-count').textContent = pendingCount;
      
      tbody.innerHTML = filtered.slice(0, 20).map(insight => {
        const confidenceColor = insight.confidence >= 90 ? 'green' : insight.confidence >= 70 ? 'yellow' : 'orange';
        const confidenceBg = insight.confidence >= 90 ? 'bg-green-100 text-green-700' : insight.confidence >= 70 ? 'bg-yellow-100 text-yellow-700' : 'bg-orange-100 text-orange-700';
        
        const statusBadge = insight.status === 'approved' 
          ? '<span class=\"px-2 py-0.5 bg-green-100 text-green-700 text-xs rounded-full\">âœ“ Approved</span>'
          : insight.status === 'rejected'
          ? '<span class=\"px-2 py-0.5 bg-red-100 text-red-700 text-xs rounded-full\">âœ— Rejected</span>'
          : '';
        
        const actionButtons = insight.status === 'pending' ? `
          <div class=\"flex items-center justify-center space-x-2\">
            <button onclick=\"approveInsight(${insight.id})\" class=\"p-2 bg-green-100 text-green-600 rounded-lg hover:bg-green-200 transition-colors\" title=\"Approve - Add to database\">
              <svg class=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M5 13l4 4L19 7\"/></svg>
            </button>
            <button onclick=\"rejectInsight(${insight.id})\" class=\"p-2 bg-red-100 text-red-600 rounded-lg hover:bg-red-200 transition-colors\" title=\"Reject - Not a real signal\">
              <svg class=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M6 18L18 6M6 6l12 12\"/></svg>
            </button>
          </div>
        ` : statusBadge;
        
        const autoTag = insight.autoApproved && insight.status === 'approved' 
          ? '<span class=\"ml-2 px-1.5 py-0.5 bg-blue-100 text-blue-600 text-[10px] rounded\">AUTO</span>' 
          : '';
        
        return `
          <tr class=\"hover:bg-gray-50 ${insight.status !== 'pending' ? 'opacity-60' : ''}\">
            <td class=\"px-4 py-3\">
              <p class=\"font-medium text-gray-900 text-sm\">${insight.property}</p>
            </td>
            <td class=\"px-4 py-3\">
              <span class=\"inline-flex items-center space-x-1 px-2 py-1 bg-${insight.color}-100 text-${insight.color}-700 text-xs rounded-full\">
                <span>${insight.icon}</span>
                <span>${insight.insightType}</span>
              </span>
            </td>
            <td class=\"px-4 py-3\">
              <div class=\"flex items-center space-x-2\">
                <div class=\"w-16 bg-gray-200 rounded-full h-2\">
                  <div class=\"bg-${confidenceColor}-500 h-2 rounded-full\" style=\"width: ${insight.confidence}%\"></div>
                </div>
                <span class=\"${confidenceBg} px-2 py-0.5 rounded text-xs font-bold\">${insight.confidence}%</span>
              </div>
            </td>
            <td class=\"px-4 py-3\">
              <span class=\"inline-flex items-center space-x-1 ${insight.numSources >= 4 ? 'text-green-600 font-semibold' : 'text-gray-600'}\">
                <span class=\"text-sm\">${insight.numSources} source${insight.numSources > 1 ? 's' : ''}</span>
                ${insight.numSources >= 4 ? '<svg class=\"w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\"><path fill-rule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clip-rule=\"evenodd\"/></svg>' : ''}
              </span>
              <p class=\"text-xs text-gray-400 mt-0.5\">${insight.sources.slice(0, 3).join(', ')}${insight.numSources > 3 ? '...' : ''}</p>
            </td>
            <td class=\"px-4 py-3\">
              <p class=\"text-xs text-gray-600 max-w-xs truncate\" title=\"${insight.evidence}\">${insight.evidence}</p>
            </td>
            <td class=\"px-4 py-3 text-sm text-gray-500\">${insight.detected}</td>
            <td class=\"px-4 py-3 text-center\">
              ${actionButtons}${autoTag}
            </td>
          </tr>
        `;
      }).join('');
    }
    
    function approveInsight(id) {
      const insight = reliabilityInsights.find(i => i.id === id);
      if (insight) {
        insight.status = 'approved';
        const row = event.target.closest('tr');
        row.classList.add('bg-green-50');
        setTimeout(() => {
          renderReliabilityTable(document.getElementById('reliability-filter').value);
          showToast(`âœ“ Insight approved and added to database`);
        }, 300);
      }
    }
    
    function rejectInsight(id) {
      const insight = reliabilityInsights.find(i => i.id === id);
      if (insight) {
        insight.status = 'rejected';
        const row = event.target.closest('tr');
        row.classList.add('bg-red-50');
        setTimeout(() => {
          renderReliabilityTable(document.getElementById('reliability-filter').value);
          showToast(`âœ— Insight rejected`);
        }, 300);
      }
    }
    
    function autoApproveHighConfidence() {
      let count = 0;
      reliabilityInsights.forEach(insight => {
        if (insight.status === 'pending' && insight.confidence >= 90 && insight.numSources >= 4) {
          insight.status = 'approved';
          insight.autoApproved = true;
          count++;
        }
      });
      renderReliabilityTable(document.getElementById('reliability-filter').value);
      showToast(`âœ“ Auto-approved ${count} high-confidence insights`);
    }
    
    function filterReliabilityInsights(filter) {
      renderReliabilityTable(filter);
    }
    
    // ===== NEARBY LEADS =====
    let nearbySuburbs = [];
    let selectedUpgradeSuburbs = new Set();
    
    function generateNearbyLeads() {
      // Suburbs adjacent to user's subscribed suburbs (Bondi, Coogee, Bronte, Tamarama)
      const adjacentSuburbs = [
        { name: 'Randwick', distance: '0.8km from Coogee', leads: 18, highPriority: 3, avgValue: '$1.8M', price: 49 },
        { name: 'Waverley', distance: '0.5km from Bondi', leads: 14, highPriority: 2, avgValue: '$2.1M', price: 59 },
        { name: 'Woollahra', distance: '1.2km from Bondi', leads: 22, highPriority: 4, avgValue: '$3.2M', price: 79 },
        { name: 'Paddington', distance: '1.5km from Bondi', leads: 11, highPriority: 1, avgValue: '$2.4M', price: 69 },
        { name: 'Maroubra', distance: '1.1km from Coogee', leads: 16, highPriority: 2, avgValue: '$1.5M', price: 45 },
        { name: 'Kensington', distance: '1.4km from Randwick', leads: 8, highPriority: 0, avgValue: '$1.2M', price: 39 }
      ];
      
      const signals = ['Garage sale', 'Tagged on social media', 'Listed for sale', 'FSBO', 'Requested valuation', 'Neighbour selling'];
      
      nearbySuburbs = adjacentSuburbs.map((suburb, idx) => {
        // Generate mock hidden leads for each suburb
        const leads = [];
        for (let i = 0; i < suburb.leads; i++) {
          const isHighPriority = i < suburb.highPriority;
          leads.push({
            id: `${idx}-${i}`,
            address: `${Math.floor(Math.random() * 200) + 1} â—â—â—â—â—â—â—â— St`,
            suburb: suburb.name,
            signal: signals[Math.floor(Math.random() * signals.length)],
            confidence: Math.floor(Math.random() * 30) + 70,
            daysAgo: Math.floor(Math.random() * 14),
            highPriority: isHighPriority,
            value: `$${(Math.random() * 2 + 1).toFixed(1)}M`
          });
        }
        return { ...suburb, leadsList: leads };
      });
      
      renderNearbySuburbs();
      renderUpgradeSuburbsList();
    }
    
    function renderNearbySuburbs() {
      const grid = document.getElementById('nearby-suburbs-grid');
      if (!grid) return;
      
      grid.innerHTML = nearbySuburbs.map(suburb => `
        <div class="bg-white rounded-xl border border-gray-200 overflow-hidden hover:shadow-lg transition-shadow">
          <!-- Suburb Header -->
          <div class="p-4 border-b border-gray-100">
            <div class="flex items-center justify-between mb-2">
              <div class="flex items-center space-x-2">
                <h3 class="font-bold text-gray-900">${suburb.name}</h3>
                ${suburb.highPriority > 0 ? `<span class="px-1.5 py-0.5 bg-red-100 text-red-600 text-[10px] font-medium rounded">${suburb.highPriority} HOT</span>` : ''}
              </div>
              <span class="text-xs text-gray-400">${suburb.distance}</span>
            </div>
            <div class="flex items-center space-x-4 text-sm">
              <span class="text-amber-600 font-semibold">${suburb.leads} leads</span>
              <span class="text-gray-400">â€¢</span>
              <span class="text-gray-600">Avg. ${suburb.avgValue}</span>
            </div>
          </div>
          
          <!-- Blurred Lead Preview -->
          <div class="p-3 space-y-2 relative">
            ${suburb.leadsList.slice(0, 3).map(lead => `
              <div class="flex items-center justify-between py-2 px-3 bg-gray-50 rounded-lg ${lead.highPriority ? 'border-l-2 border-red-400' : ''}">
                <div class="flex-1">
                  <p class="text-sm font-medium text-gray-900 blur-[4px] select-none">${lead.address}</p>
                  <p class="text-xs text-gray-500">${lead.signal} â€¢ ${lead.confidence}% confidence</p>
                </div>
                <div class="w-8 h-8 bg-gray-200 rounded-lg flex items-center justify-center">
                  <svg class="w-4 h-4 text-gray-400" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z" clip-rule="evenodd"/></svg>
                </div>
              </div>
            `).join('')}
            ${suburb.leads > 3 ? `
              <p class="text-center text-xs text-gray-400 py-1">+ ${suburb.leads - 3} more hidden leads</p>
            ` : ''}
            
            <!-- Blur Overlay -->
            <div class="absolute inset-0 bg-gradient-to-t from-white via-white/80 to-transparent flex flex-col items-center justify-end pb-4 pointer-events-none">
              <div class="pointer-events-auto">
                <button onclick="showNearbyUpgradeModal('${suburb.name}')" class="px-4 py-2 bg-gradient-to-r from-amber-500 to-orange-500 text-white rounded-lg text-sm font-medium hover:from-amber-600 hover:to-orange-600 flex items-center space-x-2 shadow-lg">
                  <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 11V7a4 4 0 118 0m-4 8v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2z"/></svg>
                  <span>Unlock ${suburb.name} - $${suburb.price}/mo</span>
                </button>
              </div>
            </div>
          </div>
        </div>
      `).join('');
    }
    
    function renderUpgradeSuburbsList() {
      const list = document.getElementById('upgrade-suburbs-list');
      if (!list) return;
      
      list.innerHTML = nearbySuburbs.map(suburb => `
        <label class="flex items-center p-4 border border-gray-200 rounded-xl hover:border-amber-300 hover:bg-amber-50/30 cursor-pointer transition-colors ${selectedUpgradeSuburbs.has(suburb.name) ? 'border-amber-400 bg-amber-50' : ''}">
          <input type="checkbox" class="w-5 h-5 text-amber-500 rounded border-gray-300 focus:ring-amber-500" ${selectedUpgradeSuburbs.has(suburb.name) ? 'checked' : ''} onchange="toggleUpgradeSuburb('${suburb.name}')">
          <div class="ml-4 flex-1">
            <div class="flex items-center justify-between">
              <div class="flex items-center space-x-2">
                <span class="font-semibold text-gray-900">${suburb.name}</span>
                ${suburb.highPriority > 0 ? `<span class="px-1.5 py-0.5 bg-red-100 text-red-600 text-[10px] font-medium rounded">${suburb.highPriority} HOT</span>` : ''}
              </div>
              <span class="text-amber-600 font-bold">$${suburb.price}/mo</span>
            </div>
            <div class="flex items-center space-x-3 mt-1 text-sm text-gray-500">
              <span>${suburb.leads} leads available</span>
              <span>â€¢</span>
              <span>Avg. value ${suburb.avgValue}</span>
              <span>â€¢</span>
              <span>${suburb.distance}</span>
            </div>
          </div>
        </label>
      `).join('');
    }
    
    function toggleUpgradeSuburb(suburbName) {
      if (selectedUpgradeSuburbs.has(suburbName)) {
        selectedUpgradeSuburbs.delete(suburbName);
      } else {
        selectedUpgradeSuburbs.add(suburbName);
      }
      updateUpgradeTotal();
      renderUpgradeSuburbsList();
    }
    
    function updateUpgradeTotal() {
      const count = selectedUpgradeSuburbs.size;
      const total = nearbySuburbs
        .filter(s => selectedUpgradeSuburbs.has(s.name))
        .reduce((sum, s) => sum + s.price, 0);
      
      document.getElementById('selected-suburbs-count').textContent = `${count} suburb${count !== 1 ? 's' : ''}`;
      document.getElementById('selected-suburbs-price').textContent = `$${total}`;
      document.getElementById('upgrade-btn').disabled = count === 0;
    }
    
    function showNearbyUpgradeModal(preselect) {
      if (preselect) {
        selectedUpgradeSuburbs.clear();
        selectedUpgradeSuburbs.add(preselect);
        updateUpgradeTotal();
        renderUpgradeSuburbsList();
      }
      document.getElementById('nearby-upgrade-modal').classList.remove('hidden');
    }
    
    function hideNearbyUpgradeModal() {
      document.getElementById('nearby-upgrade-modal').classList.add('hidden');
    }
    
    function requestUpgrade() {
      const suburbs = Array.from(selectedUpgradeSuburbs).join(', ');
      hideNearbyUpgradeModal();
      showToast(`ðŸŽ‰ Upgrade request sent for: ${suburbs}`);
      selectedUpgradeSuburbs.clear();
      updateUpgradeTotal();
    }
    
    // ===== SMS FLOW BUILDER =====
    let smsTemplates = [];
    let smsFlowSteps = [];
    let draggedTemplateId = null;
    
    function initSMSFlowBuilder() {
      smsTemplates = [
        {
          id: 'welcome',
          name: 'Welcome Message',
          category: 'opener',
          icon: 'ðŸ‘‹',
          color: 'blue',
          delay: 'Immediate',
          message: "Hi {{first_name}}! Thanks for your interest in {{property_address}}. I'm {{agent_name}}, a local property specialist. Would you like a free, no-obligation valuation of your property?",
          tip: 'Warm, personal introduction'
        },
        {
          id: 'value-prop',
          name: 'Value Proposition',
          category: 'nurture',
          icon: 'ðŸ’Ž',
          color: 'purple',
          delay: '1 hour',
          message: "Did you know? Properties in {{suburb}} have increased 12% this year. A quick valuation could reveal your home's true worth - no strings attached. Interested?",
          tip: 'Shows market knowledge'
        },
        {
          id: 'social-proof',
          name: 'Social Proof',
          category: 'nurture',
          icon: 'â­',
          color: 'amber',
          delay: '1 day',
          message: "I recently helped a neighbour at {{suburb}} sell for $180K above reserve! Happy to share what makes properties here so desirable. Free valuation available this week.",
          tip: 'Builds trust with results'
        },
        {
          id: 'urgency',
          name: 'Gentle Urgency',
          category: 'closer',
          icon: 'â°',
          color: 'orange',
          delay: '2 days',
          message: "Hi {{first_name}}, I have limited spots for free valuations this week in {{suburb}}. Would Tuesday or Thursday work better for you? Takes just 15 mins.",
          tip: 'Creates FOMO with options'
        },
        {
          id: 'booking-cta',
          name: 'Booking CTA',
          category: 'closer',
          icon: 'ðŸ“…',
          color: 'green',
          delay: '3 days',
          message: "Last chance {{first_name}}! Book your free valuation here: {{booking_link}} - or just reply YES and I'll call you to arrange a time that suits. ðŸ ",
          tip: 'Clear call-to-action'
        },
        {
          id: 'followup',
          name: 'Friendly Follow-up',
          category: 'nurture',
          icon: 'ðŸ’¬',
          color: 'cyan',
          delay: '1 day',
          message: "Hi {{first_name}}, just checking in! If you have any questions about the property market in {{suburb}}, I'm here to help. No pressure, just good advice. ðŸ˜Š",
          tip: 'Low pressure check-in'
        },
        {
          id: 'market-update',
          name: 'Market Update',
          category: 'nurture',
          icon: 'ðŸ“Š',
          color: 'indigo',
          delay: '2 days',
          message: "ðŸ“ˆ Quick update {{first_name}}: 3 properties just sold near you this week! Curious what yours might fetch? Reply for a quick chat.",
          tip: 'Timely market insights'
        }
      ];
      
      renderSMSTemplatesLibrary();
    }
    
    function renderSMSTemplatesLibrary() {
      const library = document.getElementById('sms-templates-library');
      if (!library) return;
      
      const categories = [
        { id: 'opener', name: 'Openers', desc: 'Start the conversation' },
        { id: 'nurture', name: 'Nurture', desc: 'Build relationship' },
        { id: 'closer', name: 'Closers', desc: 'Book the valuation' }
      ];
      
      library.innerHTML = categories.map(cat => {
        const catTemplates = smsTemplates.filter(t => t.category === cat.id);
        return `
          <div class="mb-4">
            <h3 class="text-xs font-semibold text-gray-400 uppercase tracking-wider mb-2">${cat.name}</h3>
            <div class="space-y-2">
              ${catTemplates.map(template => `
                <div class="p-3 bg-${template.color}-50 border border-${template.color}-200 rounded-xl cursor-grab hover:shadow-md transition-shadow"
                     draggable="true" 
                     ondragstart="dragSMSTemplate(event, '${template.id}')"
                     ondragend="endDragSMSTemplate(event)">
                  <div class="flex items-center space-x-2 mb-2">
                    <span class="text-lg">${template.icon}</span>
                    <span class="font-medium text-gray-900 text-sm">${template.name}</span>
                  </div>
                  <p class="text-xs text-gray-600 line-clamp-2">${template.message.substring(0, 80)}...</p>
                  <div class="flex items-center justify-between mt-2">
                    <span class="text-[10px] text-${template.color}-600 bg-${template.color}-100 px-2 py-0.5 rounded-full">${template.tip}</span>
                    <span class="text-[10px] text-gray-400">â± ${template.delay}</span>
                  </div>
                </div>
              `).join('')}
            </div>
          </div>
        `;
      }).join('');
    }
    
    function dragSMSTemplate(event, templateId) {
      draggedTemplateId = templateId;
      event.dataTransfer.setData('text/plain', templateId);
      event.target.classList.add('opacity-50', 'scale-95');
    }
    
    function endDragSMSTemplate(event) {
      event.target.classList.remove('opacity-50', 'scale-95');
    }
    
    function allowDrop(event) {
      event.preventDefault();
      const canvas = document.getElementById('sms-flow-canvas');
      canvas.classList.add('border-primary', 'bg-primary/5');
    }
    
    function dropSMSTemplate(event) {
      event.preventDefault();
      const canvas = document.getElementById('sms-flow-canvas');
      canvas.classList.remove('border-primary', 'bg-primary/5');
      
      const templateId = event.dataTransfer.getData('text/plain') || draggedTemplateId;
      const template = smsTemplates.find(t => t.id === templateId);
      
      if (template) {
        // Add to flow
        const stepId = `step-${Date.now()}`;
        smsFlowSteps.push({ ...template, stepId });
        renderSMSFlow();
      }
      
      draggedTemplateId = null;
    }
    
    function renderSMSFlow() {
      const canvas = document.getElementById('sms-flow-canvas');
      const placeholder = document.getElementById('sms-flow-placeholder');
      
      if (smsFlowSteps.length === 0) {
        canvas.innerHTML = `
          <div id="sms-flow-placeholder" class="text-center py-12 text-gray-400">
            <svg class="w-12 h-12 mx-auto mb-3 text-gray-300" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"/></svg>
            <p class="font-medium">Drag SMS templates here</p>
            <p class="text-sm mt-1">Build your conversion flow step by step</p>
          </div>
        `;
      } else {
        canvas.innerHTML = smsFlowSteps.map((step, index) => `
          <div class="relative mb-0" id="${step.stepId}">
            ${index > 0 ? `
              <!-- Time Delay Rung -->
              <div class="flex items-center justify-center py-3">
                <div class="flex flex-col items-center">
                  <div class="w-0.5 h-4 bg-gray-300"></div>
                  <div class="flex items-center space-x-2 px-4 py-2 bg-amber-50 rounded-full border border-amber-200 shadow-sm">
                    <svg class="w-4 h-4 text-amber-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>
                    <span class="text-xs text-amber-700 font-medium">Wait</span>
                    <select class="text-xs px-2 py-1 border border-amber-300 rounded-lg bg-white font-semibold text-amber-700 focus:outline-none focus:ring-2 focus:ring-amber-200" onchange="updateStepDelay('${step.stepId}', this.value)">
                      <option value="Immediate" ${step.delay === 'Immediate' ? 'selected' : ''}>Immediate</option>
                      <option value="30 minutes" ${step.delay === '30 minutes' ? 'selected' : ''}>30 minutes</option>
                      <option value="1 hour" ${step.delay === '1 hour' ? 'selected' : ''}>1 hour</option>
                      <option value="2 hours" ${step.delay === '2 hours' ? 'selected' : ''}>2 hours</option>
                      <option value="1 day" ${step.delay === '1 day' ? 'selected' : ''}>1 day</option>
                      <option value="2 days" ${step.delay === '2 days' ? 'selected' : ''}>2 days</option>
                      <option value="3 days" ${step.delay === '3 days' ? 'selected' : ''}>3 days</option>
                    </select>
                  </div>
                  <div class="w-0.5 h-4 bg-gray-300"></div>
                </div>
              </div>
            ` : ''}
            <div class="bg-white rounded-xl border border-gray-200 shadow-sm overflow-hidden">
              <div class="flex items-center justify-between px-4 py-2 bg-${step.color}-50 border-b border-${step.color}-100">
                <div class="flex items-center space-x-2">
                  <span class="text-lg cursor-grab" draggable="true">${step.icon}</span>
                  <span class="font-medium text-gray-900 text-sm">${step.name}</span>
                  <span class="text-[10px] bg-${step.color}-100 text-${step.color}-600 px-2 py-0.5 rounded-full">Step ${index + 1}</span>
                </div>
                <button onclick="removeSMSStep('${step.stepId}')" class="p-1 text-gray-400 hover:text-red-500 hover:bg-red-50 rounded transition-colors">
                  <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/></svg>
                </button>
              </div>
              <div class="p-4">
                <textarea class="w-full text-sm text-gray-700 border border-gray-200 rounded-lg p-3 focus:outline-none focus:border-primary resize-none" rows="3" onchange="updateStepMessage('${step.stepId}', this.value)">${step.message}</textarea>
                <div class="flex items-center justify-between mt-2 text-xs text-gray-400">
                  <span>${step.message.length} chars</span>
                  <span class="${step.message.length > 160 ? 'text-amber-500' : 'text-green-500'}">${step.message.length > 160 ? '2 SMS segments' : '1 SMS segment'}</span>
                </div>
              </div>
            </div>
          </div>
        `).join('');
      }
      
      // Update message count
      document.getElementById('flow-message-count').textContent = smsFlowSteps.length;
    }
    
    function removeSMSStep(stepId) {
      smsFlowSteps = smsFlowSteps.filter(s => s.stepId !== stepId);
      renderSMSFlow();
    }
    
    function updateStepDelay(stepId, delay) {
      const step = smsFlowSteps.find(s => s.stepId === stepId);
      if (step) step.delay = delay;
    }
    
    function updateStepMessage(stepId, message) {
      const step = smsFlowSteps.find(s => s.stepId === stepId);
      if (step) step.message = message;
    }
    
    function copyMergeField(field) {
      navigator.clipboard.writeText(field);
      showToast(`Copied ${field} to clipboard`);
    }
    
    function previewSMSFlow() {
      if (smsFlowSteps.length === 0) {
        showToast('Add some messages to your flow first');
        return;
      }
      
      const preview = document.getElementById('sms-preview-messages');
      preview.innerHTML = smsFlowSteps.map((step, index) => `
        <div class="flex flex-col ${index > 0 ? 'mt-3' : ''}">
          ${index > 0 ? `<div class="text-center text-[10px] text-gray-400 mb-2">â± ${step.delay} later</div>` : ''}
          <div class="bg-green-500 text-white rounded-2xl rounded-tl-sm px-4 py-2 text-sm max-w-[85%]">
            ${step.message.replace(/\{\{first_name\}\}/g, 'Sarah').replace(/\{\{property_address\}\}/g, '42 Ocean View Dr').replace(/\{\{suburb\}\}/g, 'Bondi').replace(/\{\{agent_name\}\}/g, 'John').replace(/\{\{booking_link\}\}/g, 'book.link/john')}
          </div>
        </div>
      `).join('');
      
      document.getElementById('sms-preview-modal').classList.remove('hidden');
    }
    
    function hideSMSPreviewModal() {
      document.getElementById('sms-preview-modal').classList.add('hidden');
    }
    
    function saveSMSFlow() {
      if (smsFlowSteps.length === 0) {
        showToast('Add some messages to your flow first');
        return;
      }
      showToast(`âœ“ Flow saved with ${smsFlowSteps.length} messages`);
    }
  </script>
</body>
</html>
